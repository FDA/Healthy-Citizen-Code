webvowl.app=function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="/public/js/lib/web-vowl",e(e.s=313)}({0:function(t,n,e){var r,o;function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){function a(t){return t&&(t.ownerDocument||t.document||t).documentElement}function u(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function l(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function c(t){return null===t?NaN:+t}function s(t){return!isNaN(t)}function f(t){return{left:function(n,e,r,o){for(3>arguments.length&&(r=0),4>arguments.length&&(o=n.length);r<o;){var i=r+o>>>1;0>t(n[i],e)?r=i+1:o=i}return r},right:function(n,e,r,o){for(3>arguments.length&&(r=0),4>arguments.length&&(o=n.length);r<o;){var i=r+o>>>1;0<t(n[i],e)?o=i:r=i+1}return r}}}function h(t){return t.length}function d(t){for(var n=1;t*n%1;)n*=10;return n}function p(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function g(){this._=Object.create(null)}function v(t){return"__proto__"==(t+="")||"\0"===t[0]?"\0"+t:t}function y(t){return"\0"===(t+="")[0]?t.slice(1):t}function m(t){return v(t)in this._}function x(t){return(t=v(t))in this._&&delete this._[t]}function b(){var t=[];for(var n in this._)t.push(y(n));return t}function M(){var t=0;for(var n in this._)++t;return t}function w(){for(var t in this._)return!1;return!0}function S(){this._=Object.create(null)}function _(t){return t}function k(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function C(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e,r=0,o=Ei.length;r<o;++r)if((e=Ei[r]+n)in t)return e}function E(){}function L(){}function A(t){function n(){for(var n,r=e,o=-1,i=r.length;++o<i;)(n=r[o].on)&&n.apply(this,arguments);return t}var e=[],r=new g;return n.on=function(n,o){var i,a=r.get(n);return 2>arguments.length?a&&a.on:(a&&(a.on=null,e=e.slice(0,i=e.indexOf(a)).concat(e.slice(i+1)),r.remove(n)),o&&e.push(r.set(n,{on:o})),t)},n}function N(){vi.event.preventDefault()}function O(){for(var t,n=vi.event;t=n.sourceEvent;)n=t;return n}function T(t){for(var n=new L,e=0,r=arguments.length;++e<r;)n[arguments[e]]=A(n);return n.of=function(e,r){return function(o){try{var i=o.sourceEvent=vi.event;o.target=t,vi.event=o,n[o.type].apply(e,r)}finally{vi.event=i}}},n}function D(t){return Ai(t,Di),t}function F(t){return"function"==typeof t?t:function(){return Ni(t,this)}}function z(t){return"function"==typeof t?t:function(){return Oi(t,this)}}function P(t,n){return t=vi.ns.qualify(t),null==n?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof n?t.local?function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,n)}:function(){this.setAttribute(t,n)}}function R(t){return t.trim().replace(/\s+/g," ")}function I(t){return new RegExp("(?:^|\\s+)"+vi.requote(t)+"(?:\\s+|$)","g")}function q(t){return(t+"").trim().split(/^|\s+/)}function B(t,n){var e=(t=q(t).map(j)).length;return"function"==typeof n?function(){for(var r=-1,o=n.apply(this,arguments);++r<e;)t[r](this,o)}:function(){for(var r=-1;++r<e;)t[r](this,n)}}function j(t){var n=I(t);return function(e,r){if(o=e.classList)return r?o.add(t):o.remove(t);var o=e.getAttribute("class")||"";r?(n.lastIndex=0,!n.test(o)&&e.setAttribute("class",R(o+" "+t))):e.setAttribute("class",R(o.replace(n," ")))}}function V(t,n,e){return null==n?function(){this.style.removeProperty(t)}:"function"==typeof n?function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}:function(){this.style.setProperty(t,n,e)}}function U(t,n){return null==n?function(){delete this[t]}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}:function(){this[t]=n}}function W(t){return"function"==typeof t?t:(t=vi.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var n=this.ownerDocument,e=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===e&&"http://www.w3.org/1999/xhtml"===n.documentElement.namespaceURI?n.createElement(t):n.createElementNS(e,t)}}function H(){var t=this.parentNode;t&&t.removeChild(this)}function Y(t){return{__data__:t}}function Z(t){return function(){return Ti(this,t)}}function G(t){return arguments.length||(t=l),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function J(t,n){for(var e=0,r=t.length;e<r;e++)for(var o,i=t[e],a=0,u=i.length;a<u;a++)(o=i[a])&&n(o,a,e);return t}function $(t){return Ai(t,zi),t}function X(t){var n,e;return function(r,o,i){var a,u=t[i].update,l=u.length;for(i!=e&&(e=i,n=0),o>=n&&(n=o+1);!(a=u[n])&&++n<l;);return a}}function K(t,n,e){function r(){var n=this[o];n&&(this.removeEventListener(t,n,n.$),delete this[o])}var o="__on"+t,i=t.indexOf("."),a=Q;0<i&&(t=t.slice(0,i));var u=Pi.get(t);return u&&(t=u,a=tt),i?n?function(){var i=a(n,mi(arguments));r.call(this),this.addEventListener(t,this[o]=i,i.$=e),i._=n}:r:n?E:function(){var n,e=new RegExp("^__on([^.]+)"+vi.requote(t)+"$");for(var r in this)if(n=r.match(e)){var o=this[r];this.removeEventListener(n[1],o,o.$),delete this[r]}}}function Q(t,n){return function(e){var r=vi.event;vi.event=e,n[0]=this.__data__;try{t.apply(this,n)}finally{vi.event=r}}}function tt(t,n){var e=Q(t,n);return function(t){var n=this,r=t.relatedTarget;r&&(r===n||8&r.compareDocumentPosition(n))||e.call(n,t)}}function nt(t){var n=".dragsuppress-"+ ++Ii,e="click"+n,r=vi.select(u(t)).on("touchmove"+n,N).on("dragstart"+n,N).on("selectstart"+n,N);if(null==Ri&&(Ri=!("onselectstart"in t)&&C(t.style,"userSelect")),Ri){var o=a(t).style,i=o[Ri];o[Ri]="none"}return function(t){if(r.on(n,null),Ri&&(o[Ri]=i),t){var a=function(){r.on(e,null)};r.on(e,(function(){N(),a()}),!0),setTimeout(a,0)}}}function et(t,n){n.changedTouches&&(n=n.changedTouches[0]);var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();if(0>qi){var o=u(t);if(o.scrollX||o.scrollY){var i=(e=vi.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();qi=!(i.f||i.e),e.remove()}}return qi?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var a=t.getBoundingClientRect();return[n.clientX-a.left-t.clientLeft,n.clientY-a.top-t.clientTop]}function rt(){return vi.event.changedTouches[0].identifier}function ot(t){return 0<t?1:0>t?-1:0}function it(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function at(t){return 1<t?0:-1>t?Vi:Math.acos(t)}function ut(t){return 1<t?Wi:-1>t?-Wi:Math.asin(t)}function lt(t){return((t=Math.exp(t))+1/t)/2}function ct(t){return(t=Math.sin(t/2))*t}function st(){}function ft(t,n,e){return this instanceof ft?(this.h=+t,this.s=+n,void(this.l=+e)):2>arguments.length?t instanceof ft?new ft(t.h,t.s,t.l):kt(""+t,Ct,ft):new ft(t,n,e)}function ht(t,n,e){function r(t){return Math.round(255*function(t){return 360<t?t-=360:0>t&&(t+=360),60>t?o+(i-o)*t/60:180>t?i:240>t?o+(i-o)*(240-t)/60:o}(t))}var o,i;return t=isNaN(t)?0:0>(t%=360)?t+360:t,n=isNaN(n)?0:0>n?0:1<n?1:n,o=2*(e=0>e?0:1<e?1:e)-(i=.5>=e?e*(1+n):e+n-e*n),new Mt(r(t+120),r(t),r(t-120))}function dt(t,n,e){return this instanceof dt?(this.h=+t,this.c=+n,void(this.l=+e)):2>arguments.length?t instanceof dt?new dt(t.h,t.c,t.l):yt(t instanceof gt?t.l:(t=Et((t=vi.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new dt(t,n,e)}function pt(t,n,e){return isNaN(t)&&(t=0),isNaN(n)&&(n=0),new gt(e,Math.cos(t*=Hi)*n,Math.sin(t)*n)}function gt(t,n,e){return this instanceof gt?(this.l=+t,this.a=+n,void(this.b=+e)):2>arguments.length?t instanceof gt?new gt(t.l,t.a,t.b):t instanceof dt?pt(t.h,t.c,t.l):Et((t=Mt(t)).r,t.g,t.b):new gt(t,n,e)}function vt(t,n,e){var r=(t+16)/116,o=r+n/500,i=r-e/200;return new Mt(bt(3.2404542*(o=mt(o)*ta)-1.5371385*(r=1*mt(r))-.4985314*(i=mt(i)*na)),bt(-.969266*o+1.8760108*r+.041556*i),bt(.0556434*o-.2040259*r+1.0572252*i))}function yt(t,n,e){return 0<t?new dt(Math.atan2(e,n)*Yi,Math.sqrt(n*n+e*e),t):new dt(NaN,NaN,t)}function mt(t){return.206893034<t?t*t*t:(t-4/29)/7.787037}function xt(t){return.008856<t?Math.pow(t,1/3):7.787037*t+4/29}function bt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function Mt(t,n,e){return this instanceof Mt?(this.r=~~t,this.g=~~n,void(this.b=~~e)):2>arguments.length?t instanceof Mt?new Mt(t.r,t.g,t.b):kt(""+t,Mt,ht):new Mt(t,n,e)}function wt(t){return new Mt(t>>16,255&t>>8,255&t)}function St(t){return wt(t)+""}function _t(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function kt(t,n,e){var r,o,i,a=0,u=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(o=r[2].split(","),r[1]){case"hsl":return e(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100);case"rgb":return n(At(o[0]),At(o[1]),At(o[2]))}return(i=oa.get(t))?n(i.r,i.g,i.b):(null==t||"#"!==t.charAt(0)||isNaN(i=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&i)>>4,a|=a>>4,u=240&i,u|=u>>4,l=15&i,l|=l<<4):7===t.length&&(a=(16711680&i)>>16,u=(65280&i)>>8,l=255&i)),n(a,u,l))}function Ct(t,n,e){var r,o,i=Math.min(t/=255,n/=255,e/=255),a=Math.max(t,n,e),u=a-i,l=(a+i)/2;return u?(o=.5>l?u/(a+i):u/(2-a-i),r=t==a?(n-e)/u+(n<e?6:0):n==a?(e-t)/u+2:(t-n)/u+4,r*=60):(r=NaN,o=0<l&&1>l?0:r),new ft(r,o,l)}function Et(t,n,e){var r=xt((.4124564*(t=Lt(t))+.3575761*(n=Lt(n))+.1804375*(e=Lt(e)))/ta),o=xt((.2126729*t+.7151522*n+.072175*e)/1);return gt(116*o-16,500*(r-o),200*(o-xt((.0193339*t+.119192*n+.9503041*e)/na)))}function Lt(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function At(t){var n=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*n):n}function Nt(t){return"function"==typeof t?t:function(){return t}}function Ot(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Tt(n,e,t,r)}}function Tt(t,n,e,r){function o(){var t,n=l.status;if(!n&&function(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}(l)||200<=n&&300>n||304===n){try{t=e.call(i,l)}catch(t){return void a.error.call(i,t)}a.load.call(i,t)}else a.error.call(i,l)}var i={},a=vi.dispatch("beforesend","progress","load","error"),u={},l=new XMLHttpRequest,c=null;return this.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(t)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=o:l.onreadystatechange=function(){3<l.readyState&&o()},l.onprogress=function(t){var n=vi.event;vi.event=t;try{a.progress.call(i,l)}finally{vi.event=n}},i.header=function(t,n){return t=(t+"").toLowerCase(),2>arguments.length?u[t]:(null==n?delete u[t]:u[t]=n+"",i)},i.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",i):n},i.responseType=function(t){return arguments.length?(c=t,i):c},i.response=function(t){return e=t,i},["get","post"].forEach((function(t){i[t]=function(){return i.send.apply(i,[t].concat(mi(arguments)))}})),i.send=function(e,r,o){if(2===arguments.length&&"function"==typeof r&&(o=r,r=null),l.open(e,t,!0),null==n||"accept"in u||(u.accept=n+",*/*"),l.setRequestHeader)for(var s in u)l.setRequestHeader(s,u[s]);return null!=n&&l.overrideMimeType&&l.overrideMimeType(n),null!=c&&(l.responseType=c),null!=o&&i.on("error",o).on("load",(function(t){o(null,t)})),a.beforesend.call(i,l),l.send(null==r?null:r),i},i.abort=function(){return l.abort(),i},vi.rebind(i,a,"on"),null==r?i:i.get(function(t){return 1===t.length?function(n,e){t(null==n?e:null)}:t}(r))}function Dt(t,n,e){var r=arguments.length;2>r&&(n=0),3>r&&(e=Date.now());var o=e+n,i={c:t,t:o,n:null};return aa?aa.n=i:ia=i,aa=i,ua||(la=clearTimeout(la),ua=1,ca(Ft)),i}function Ft(){var t=zt(),n=Pt()-t;24<n?(isFinite(n)&&(clearTimeout(la),la=setTimeout(Ft,n)),ua=0):(ua=1,ca(Ft))}function zt(){for(var t=Date.now(),n=ia;n;)t>=n.t&&n.c(t-n.t)&&(n.c=null),n=n.n;return t}function Pt(){for(var t,n=ia,e=1/0;n;)n.c?(n.t<e&&(e=n.t),n=(t=n).n):n=t?t.n=n.n:ia=n.n;return aa=t,e}function Rt(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function It(t){var n=t.decimal,e=t.thousands,r=t.grouping,o=t.currency,i=r&&e?function(t,n){for(var o=t.length,i=[],a=0,u=r[0],l=0;0<o&&0<u&&(l+u+1>n&&(u=Math.max(1,n-l)),i.push(t.substring(o-=u,o+u)),!((l+=u+1)>n));)u=r[a=(a+1)%r.length];return i.reverse().join(e)}:_;return function(t){var e=fa.exec(t),r=e[1]||" ",a=e[2]||">",u=e[3]||"-",l=e[4]||"",c=e[5],s=+e[6],f=e[7],h=e[8],d=e[9],p=1,g="",v="",y=!1,m=!0;switch(h&&(h=+h.substring(1)),(c||"0"===r&&"="===a)&&(c=r="0",a="="),d){case"n":f=!0,d="g";break;case"%":p=100,v="%",d="f";break;case"p":p=100,v="%",d="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+d.toLowerCase());case"c":m=!1;case"d":y=!0,h=0;break;case"s":p=-1,d="r"}"$"===l&&(g=o[0],v=o[1]),"r"!=d||h||(d="g"),null!=h&&("g"==d?h=Math.max(1,Math.min(21,h)):("e"==d||"f"==d)&&(h=Math.max(0,Math.min(20,h)))),d=ha.get(d)||qt;var x=c&&f;return function(t){var e=v;if(y&&t%1)return"";var o=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===u?"":u;if(0>p){var l=vi.formatPrefix(t,h);t=l.scale(t),e=l.symbol+v}else t*=p;var b,M,w=(t=d(t,h)).lastIndexOf(".");if(0>w){var S=m?t.lastIndexOf("e"):-1;0>S?(b=t,M=""):(b=t.substring(0,S),M=t.substring(S))}else b=t.substring(0,w),M=n+t.substring(w+1);!c&&f&&(b=i(b,1/0));var _=g.length+b.length+M.length+(x?0:o.length),k=_<s?Array(_=s-_+1).join(r):"";return x&&(b=i(k+b,k.length?s-M.length:1/0)),o+=g,t=b+M,("<"===a?o+t+k:">"===a?k+o+t:"^"===a?k.substring(0,_>>=1)+o+t+k.substring(_):o+(x?t:k+t))+e}}}function qt(t){return t+""}function Bt(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function jt(t,n,e){function r(n){var e=t(n),r=i(e,1);return n-e<r-n?e:r}function o(e){return n(e=t(new pa(e-1)),1),e}function i(t,e){return n(t=new pa(+t),e),t}function a(t,r,i){var a=o(t),u=[];if(1<i)for(;a<r;)e(a)%i||u.push(new Date(+a)),n(a,1);else for(;a<r;)u.push(new Date(+a)),n(a,1);return u}t.floor=t,t.round=r,t.ceil=o,t.offset=i,t.range=a;var u=t.utc=Vt(t);return u.floor=u,u.round=Vt(r),u.ceil=Vt(o),u.offset=Vt(i),u.range=function(t,n,e){try{pa=Bt;var r=new Bt;return r._=t,a(r,n,e)}finally{pa=Date}},t}function Vt(t){return function(n,e){try{pa=Bt;var r=new Bt;return r._=n,t(r,e)._}finally{pa=Date}}}function Ut(t){function n(t){function n(n){for(var e,o,i,a=[],u=-1,l=0;++u<r;)37===t.charCodeAt(u)&&(a.push(t.slice(l,u)),null!=(o=va[e=t.charAt(++u)])&&(e=t.charAt(++u)),(i=b[e])&&(e=i(n,null==o?"e"===e?" ":"0":o)),a.push(e),l=u+1);return a.push(t.slice(l,u)),a.join("")}var r=t.length;return n.parse=function(n){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(e(r,t,n,0)!=n.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&pa!==Bt,i=new(o?Bt:pa);return"j"in r?i.setFullYear(r.y,0,r.j):"W"in r||"U"in r?(!("w"in r)&&(r.w="W"in r?1:0),i.setFullYear(r.y,0,1),i.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(i.getDay()+5)%7:r.w+7*r.U-(i.getDay()+6)%7)):i.setFullYear(r.y,r.m,r.d),i.setHours(r.H+(0|r.Z/100),r.M+r.Z%100,r.S,r.L),o?i._:i},n.toString=function(){return t},n}function e(t,n,e,r){for(var o,i,a,u=0,l=n.length,c=e.length;u<l;){if(r>=c)return-1;if(37===(o=n.charCodeAt(u++))){if(a=n.charAt(u++),!(i=M[a in va?n.charAt(u++):a])||0>(r=i(t,e,r)))return-1}else if(o!=e.charCodeAt(r++))return-1}return r}var r=t.dateTime,o=t.date,i=t.time,a=t.periods,u=t.days,l=t.shortDays,c=t.months,s=t.shortMonths;n.utc=function(t){function e(t){try{var n=new(pa=Bt);return n._=t,r(n)}finally{pa=Date}}var r=n(t);return e.parse=function(t){try{pa=Bt;var n=r.parse(t);return n&&n._}finally{pa=Date}},e.toString=r.toString,e},n.multi=n.utc.multi=cn;var f=vi.map(),h=Ht(u),d=Yt(u),p=Ht(l),g=Yt(l),v=Ht(c),y=Yt(c),m=Ht(s),x=Yt(s);a.forEach((function(t,n){f.set(t.toLowerCase(),n)}));var b={a:function(t){return l[t.getDay()]},A:function(t){return u[t.getDay()]},b:function(t){return s[t.getMonth()]},B:function(t){return c[t.getMonth()]},c:n(r),d:function(t,n){return Wt(t.getDate(),n,2)},e:function(t,n){return Wt(t.getDate(),n,2)},H:function(t,n){return Wt(t.getHours(),n,2)},I:function(t,n){return Wt(t.getHours()%12||12,n,2)},j:function(t,n){return Wt(1+da.dayOfYear(t),n,3)},L:function(t,n){return Wt(t.getMilliseconds(),n,3)},m:function(t,n){return Wt(t.getMonth()+1,n,2)},M:function(t,n){return Wt(t.getMinutes(),n,2)},p:function(t){return a[+(12<=t.getHours())]},S:function(t,n){return Wt(t.getSeconds(),n,2)},U:function(t,n){return Wt(da.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return Wt(da.mondayOfYear(t),n,2)},x:n(o),X:n(i),y:function(t,n){return Wt(t.getFullYear()%100,n,2)},Y:function(t,n){return Wt(t.getFullYear()%1e4,n,4)},Z:un,"%":function(){return"%"}},M={a:function(t,n,e){p.lastIndex=0;var r=p.exec(n.slice(e));return r?(t.w=g.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(t,n,e){h.lastIndex=0;var r=h.exec(n.slice(e));return r?(t.w=d.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(t,n,e){m.lastIndex=0;var r=m.exec(n.slice(e));return r?(t.m=x.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(t,n,e){v.lastIndex=0;var r=v.exec(n.slice(e));return r?(t.m=y.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(t,n,r){return e(t,b.c.toString(),n,r)},d:tn,e:tn,H:en,I:en,j:nn,L:an,m:Qt,M:rn,p:function(t,n,e){var r=f.get(n.slice(e,e+=2).toLowerCase());return null==r?-1:(t.p=r,e)},S:on,U:Gt,w:Zt,W:Jt,x:function(t,n,r){return e(t,b.x.toString(),n,r)},X:function(t,n,r){return e(t,b.X.toString(),n,r)},y:Xt,Y:$t,Z:Kt,"%":ln};return n}function Wt(t,n,e){var r=0>t?"-":"",o=(r?-t:t)+"",i=o.length;return r+(i<e?Array(e-i+1).join(n)+o:o)}function Ht(t){return new RegExp("^(?:"+t.map(vi.requote).join("|")+")","i")}function Yt(t){for(var n=new g,e=-1,r=t.length;++e<r;)n.set(t[e].toLowerCase(),e);return n}function Zt(t,n,e){ya.lastIndex=0;var r=ya.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Gt(t,n,e){ya.lastIndex=0;var r=ya.exec(n.slice(e));return r?(t.U=+r[0],e+r[0].length):-1}function Jt(t,n,e){ya.lastIndex=0;var r=ya.exec(n.slice(e));return r?(t.W=+r[0],e+r[0].length):-1}function $t(t,n,e){ya.lastIndex=0;var r=ya.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Xt(t,n,e){ya.lastIndex=0;var r=ya.exec(n.slice(e,e+2));return r?(t.y=function(t){return t+(68<t?1900:2e3)}(+r[0]),e+r[0].length):-1}function Kt(t,n,e){return/^[+-]\d{4}$/.test(n=n.slice(e,e+5))?(t.Z=-n,e+5):-1}function Qt(t,n,e){ya.lastIndex=0;var r=ya.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function tn(t,n,e){ya.lastIndex=0;var r=ya.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function nn(t,n,e){ya.lastIndex=0;var r=ya.exec(n.slice(e,e+3));return r?(t.j=+r[0],e+r[0].length):-1}function en(t,n,e){ya.lastIndex=0;var r=ya.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function rn(t,n,e){ya.lastIndex=0;var r=ya.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function on(t,n,e){ya.lastIndex=0;var r=ya.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function an(t,n,e){ya.lastIndex=0;var r=ya.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function un(t){var n=t.getTimezoneOffset(),e=0<n?"-":"+",r=0|Ci(n)/60,o=Ci(n)%60;return e+Wt(r,"0",2)+Wt(o,"0",2)}function ln(t,n,e){ma.lastIndex=0;var r=ma.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function cn(t){for(var n=t.length,e=-1;++e<n;)t[e][0]=this(t[e][0]);return function(n){for(var e=0,r=t[e];!r[1](n);)r=t[++e];return r[0](n)}}function sn(){}function fn(t,n,e){var r=e.s=t+n,o=r-t;e.t=t-(r-o)+(n-o)}function hn(t,n){t&&wa.hasOwnProperty(t.type)&&wa[t.type](t,n)}function dn(t,n,e){var r,o=-1,i=t.length-e;for(n.lineStart();++o<i;)r=t[o],n.point(r[0],r[1],r[2]);n.lineEnd()}function pn(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)dn(t[e],n,1);n.polygonEnd()}function gn(){function t(t,n){n=n*Hi/2+Vi/4;var e=(t*=Hi)-r,a=0<=e?1:-1,u=a*e,l=Math.cos(n),c=Math.sin(n),s=i*c,f=o*l+s*Math.cos(u),h=s*a*Math.sin(u);_a.add(Math.atan2(h,f)),r=t,o=l,i=c}var n,e,r,o,i;ka.point=function(a,u){ka.point=t,r=(n=a)*Hi,o=Math.cos(u=(e=u)*Hi/2+Vi/4),i=Math.sin(u)},ka.lineEnd=function(){t(n,e)}}function vn(t){var n=t[0],e=t[1],r=Math.cos(e);return[r*Math.cos(n),r*Math.sin(n),Math.sin(e)]}function yn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function mn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function xn(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function bn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Mn(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function wn(t){return[Math.atan2(t[1],t[0]),ut(t[2])]}function Sn(t,n){return Ci(t[0]-n[0])<Bi&&Ci(t[1]-n[1])<Bi}function _n(t,n){t*=Hi;var e=Math.cos(n*=Hi);kn(e*Math.cos(t),e*Math.sin(t),Math.sin(n))}function kn(t,n,e){++Ca,La+=(t-La)/Ca,Aa+=(n-Aa)/Ca,Na+=(e-Na)/Ca}function Cn(){function t(t,o){t*=Hi;var i=Math.cos(o*=Hi),a=i*Math.cos(t),u=i*Math.sin(t),l=Math.sin(o),c=Math.atan2(Math.sqrt((c=e*l-r*u)*c+(c=r*a-n*l)*c+(c=n*u-e*a)*c),n*a+e*u+r*l);Ea+=c,Oa+=c*(n+(n=a)),Ta+=c*(e+(e=u)),Da+=c*(r+(r=l)),kn(n,e,r)}var n,e,r;Ra.point=function(o,i){o*=Hi;var a=Math.cos(i*=Hi);n=a*Math.cos(o),e=a*Math.sin(o),r=Math.sin(i),Ra.point=t,kn(n,e,r)}}function En(){Ra.point=_n}function Ln(){function t(t,n){t*=Hi;var e=Math.cos(n*=Hi),a=e*Math.cos(t),u=e*Math.sin(t),l=Math.sin(n),c=o*l-i*u,s=i*a-r*l,f=r*u-o*a,h=Math.sqrt(c*c+s*s+f*f),d=r*a+o*u+i*l,p=h&&-at(d)/h,g=Math.atan2(h,d);Fa+=p*c,za+=p*s,Pa+=p*f,Ea+=g,Oa+=g*(r+(r=a)),Ta+=g*(o+(o=u)),Da+=g*(i+(i=l)),kn(r,o,i)}var n,e,r,o,i;Ra.point=function(a,u){n=a,e=u,Ra.point=t,a*=Hi;var l=Math.cos(u*=Hi);r=l*Math.cos(a),o=l*Math.sin(a),i=Math.sin(u),kn(r,o,i)},Ra.lineEnd=function(){t(n,e),Ra.lineEnd=En,Ra.point=_n}}function An(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function Nn(){return!0}function On(t,n,e,r,o){var i=[],a=[];if(t.forEach((function(t){if(!(0>=(n=t.length-1))){var n,e=t[0],r=t[n];if(Sn(e,r)){o.lineStart();for(var u=0;u<n;++u)o.point((e=t[u])[0],e[1]);return void o.lineEnd()}var l=new Dn(e,t,null,!0),c=new Dn(e,null,l,!1);l.o=c,i.push(l),a.push(c),l=new Dn(r,t,null,!1),c=new Dn(r,null,l,!0),l.o=c,i.push(l),a.push(c)}})),a.sort(n),Tn(i),Tn(a),i.length){for(var u=0,l=e,c=a.length;u<c;++u)a[u].e=l=!l;for(var s,f,h=i[0];;){for(var d=h,p=!0;d.v;)if((d=d.n)===h)return;s=d.z,o.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(u=0,c=s.length;u<c;++u)o.point((f=s[u])[0],f[1]);else r(d.x,d.n.x,1,o);d=d.n}else{if(p)for(u=(s=d.p.z).length-1;0<=u;--u)o.point((f=s[u])[0],f[1]);else r(d.x,d.p.x,-1,o);d=d.p}s=(d=d.o).z,p=!p}while(!d.v);o.lineEnd()}}}function Tn(t){if(n=t.length){for(var n,e,r=0,o=t[0];++r<n;)o.n=e=t[r],e.p=o,o=e;o.n=e=t[0],e.p=o}}function Dn(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Fn(t,n,e,r){return function(o,i){function a(n,e){var r=o(n,e);t(n=r[0],e=r[1])&&i.point(n,e)}function u(t,n){var e=o(t,n);v.point(e[0],e[1])}function l(){m.point=u,v.lineStart()}function c(){m.point=a,v.lineEnd()}function s(t,n){g.push([t,n]);var e=o(t,n);b.point(e[0],e[1])}function f(){b.lineStart(),g=[]}function h(){s(g[0][0],g[0][1]),b.lineEnd();var t,n=b.clean(),e=x.buffer(),r=e.length;if(g.pop(),p.push(g),g=null,r){if(1&n){var o,a=-1;if(0<(r=(t=e[0]).length-1)){for(M||(i.polygonStart(),M=!0),i.lineStart();++a<r;)i.point((o=t[a])[0],o[1]);i.lineEnd()}return}1<r&&2&n&&e.push(e.pop().concat(e.shift())),d.push(e.filter(zn))}}var d,p,g,v=n(i),y=o.invert(r[0],r[1]),m={point:a,lineStart:l,lineEnd:c,polygonStart:function(){m.point=s,m.lineStart=f,m.lineEnd=h,d=[],p=[]},polygonEnd:function(){m.point=a,m.lineStart=l,m.lineEnd=c,d=vi.merge(d);var t=In(y,p);d.length?(!M&&(i.polygonStart(),M=!0),On(d,Rn,t,e,i)):t&&(!M&&(i.polygonStart(),M=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),M&&(i.polygonEnd(),M=!1),d=p=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},x=Pn(),b=n(x),M=!1;return m}}function zn(t){return 1<t.length}function Pn(){var t,n=[];return{lineStart:function(){n.push(t=[])},point:function(n,e){t.push([n,e])},lineEnd:E,buffer:function(){var e=n;return n=[],t=null,e},rejoin:function(){1<n.length&&n.push(n.pop().concat(n.shift()))}}}function Rn(t,n){return(0>(t=t.x)[0]?t[1]-Wi-Bi:Wi-t[1])-(0>(n=n.x)[0]?n[1]-Wi-Bi:Wi-n[1])}function In(t,n){var e=t[0],r=t[1],o=[Math.sin(e),-Math.cos(e),0],i=0,a=0;_a.reset();for(var u=0,l=n.length;u<l;++u){var c=n[u],s=c.length;if(s)for(var f=c[0],h=f[0],d=f[1]/2+Vi/4,p=Math.sin(d),g=Math.cos(d),v=1;;){v===s&&(v=0);var y=(t=c[v])[0],m=t[1]/2+Vi/4,x=Math.sin(m),b=Math.cos(m),M=y-h,w=0<=M?1:-1,S=w*M,_=S>Vi,k=p*x;if(_a.add(Math.atan2(k*w*Math.sin(S),g*b+k*Math.cos(S))),i+=_?M+w*Ui:M,_^h>=e^y>=e){var C=mn(vn(f),vn(t));Mn(C);var E=mn(o,C);Mn(E);var L=(_^0<=M?-1:1)*ut(E[2]);(r>L||r===L&&(C[0]||C[1]))&&(a+=_^0<=M?1:-1)}if(!v++)break;h=y,p=x,g=b,f=t}}return(i<-Bi||i<Bi&&_a<-Bi)^1&a}function qn(t){function n(t,n){return Math.cos(t)*Math.cos(n)>o}function e(t,n,e){var r=[1,0,0],i=mn(vn(t),vn(n)),a=yn(i,i),u=i[0],l=a-u*u;if(!l)return!e&&t;var c=mn(r,i),s=bn(r,o*a/l);xn(s,bn(i,-o*u/l));var f=c,h=yn(s,f),d=yn(f,f),p=h*h-d*(yn(s,s)-1);if(!(0>p)){var g=Math.sqrt(p),v=bn(f,(-h-g)/d);if(xn(v,s),v=wn(v),!e)return v;var y,m=t[0],x=n[0],b=t[1],M=n[1];x<m&&(y=m,m=x,x=y);var w=x-m,S=Ci(w-Vi)<Bi;if(!S&&M<b&&(y=b,b=M,M=y),S||w<Bi?S?0<b+M^v[1]<(Ci(v[0]-m)<Bi?b:M):b<=v[1]&&v[1]<=M:w>Vi^(m<=v[0]&&v[0]<=x)){var _=bn(f,(-h+g)/d);return xn(_,s),[v,wn(_)]}}}function r(n,e){var r=i?t:Vi-t,o=0;return n<-r?o|=1:n>r&&(o|=2),e<-r?o|=4:e>r&&(o|=8),o}var o=Math.cos(t),i=0<o,a=Ci(o)>Bi;return Fn(n,(function(t){var o,u,l,c,s;return{lineStart:function(){c=l=!1,s=1},point:function(f,h){var d,p=[f,h],g=n(f,h),v=i?g?0:r(f,h):g?r(f+(0>f?Vi:-Vi),h):0;if(!o&&(c=l=g)&&t.lineStart(),g!==l&&(d=e(o,p),(Sn(o,d)||Sn(p,d))&&(p[0]+=Bi,p[1]+=Bi,g=n(p[0],p[1]))),g!==l)s=0,g?(t.lineStart(),d=e(p,o),t.point(d[0],d[1])):(d=e(o,p),t.point(d[0],d[1]),t.lineEnd()),o=d;else if(a&&o&&i^g){var y;!(v&u)&&(y=e(p,o,!0))&&(s=0,i?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!g||o&&Sn(o,p)||t.point(p[0],p[1]),o=p,l=g,u=v},lineEnd:function(){l&&t.lineEnd(),o=null},clean:function(){return s|(c&&l)<<1}}}),fe(t,6*Hi),i?[0,-t]:[-Vi,t-Vi])}function Bn(t,n,e,r){return function(o){var i,a=o.a,u=o.b,l=a.x,c=a.y,s=0,f=1,h=u.x-l,d=u.y-c;if(i=t-l,h||!(0<i)){if(i/=h,0>h){if(i<s)return;i<f&&(f=i)}else if(0<h){if(i>f)return;i>s&&(s=i)}if(i=e-l,h||!(0>i)){if(i/=h,0>h){if(i>f)return;i>s&&(s=i)}else if(0<h){if(i<s)return;i<f&&(f=i)}if(i=n-c,d||!(0<i)){if(i/=d,0>d){if(i<s)return;i<f&&(f=i)}else if(0<d){if(i>f)return;i>s&&(s=i)}if(i=r-c,d||!(0>i)){if(i/=d,0>d){if(i>f)return;i>s&&(s=i)}else if(0<d){if(i<s)return;i<f&&(f=i)}return 0<s&&(o.a={x:l+s*h,y:c+s*d}),1>f&&(o.b={x:l+f*h,y:c+f*d}),o}}}}}}function jn(t,n,e,r){function o(r,o){return Ci(r[0]-t)<Bi?0<o?0:3:Ci(r[0]-e)<Bi?0<o?2:1:Ci(r[1]-n)<Bi?0<o?1:0:0<o?3:2}function i(t,n){return a(t.x,n.x)}function a(t,n){var e=o(t,1),r=o(n,1);return e===r?0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]:e-r}return function(u){function l(i,u,l,c){var s=0,f=0;if(null==i||(s=o(i,l))!==(f=o(u,l))||0>a(i,u)^0<l)do{c.point(0===s||3===s?t:e,1<s?r:n)}while((s=(s+l+4)%4)!==f);else c.point(u[0],u[1])}function c(o,i){return t<=o&&o<=e&&n<=i&&i<=r}function s(t,n){c(t,n)&&u.point(t,n)}function f(t,n){var e=c(t=Math.max(-1e9,Math.min(1e9,t)),n=Math.max(-1e9,Math.min(1e9,n)));if(d&&p.push([t,n]),M)g=t,v=n,y=e,M=!1,e&&(u.lineStart(),u.point(t,n));else if(e&&b)u.point(t,n);else{var r={a:{x:m,y:x},b:{x:t,y:n}};k(r)?(!b&&(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),!e&&u.lineEnd(),w=!1):e&&(u.lineStart(),u.point(t,n),w=!1)}m=t,x=n,b=e}var h,d,p,g,v,y,m,x,b,M,w,S=u,_=Pn(),k=Bn(t,n,e,r),C={point:s,lineStart:function(){C.point=f,d&&d.push(p=[]),M=!0,b=!1,m=x=NaN},lineEnd:function(){h&&(f(g,v),y&&b&&_.rejoin(),h.push(_.buffer())),C.point=s,b&&u.lineEnd()},polygonStart:function(){u=_,h=[],d=[],w=!0},polygonEnd:function(){u=S,h=vi.merge(h);var n=function(t){for(var n=0,e=d.length,r=t[1],o=0;o<e;++o)for(var i,a=1,u=d[o],l=u.length,c=u[0];a<l;++a)i=u[a],c[1]<=r?i[1]>r&&0<it(c,i,t)&&++n:i[1]<=r&&0>it(c,i,t)&&--n,c=i;return 0!==n}([t,r]),e=w&&n,o=h.length;(e||o)&&(u.polygonStart(),e&&(u.lineStart(),l(null,null,1,u),u.lineEnd()),o&&On(h,i,n,l,u),u.polygonEnd()),h=d=p=null}};return C}}function Vn(t){var n=0,e=Vi/3,r=re(t),o=r(n,e);return o.parallels=function(t){return arguments.length?r(n=t[0]*Vi/180,e=t[1]*Vi/180):[n/Vi*180,e/Vi*180]},o}function Un(t,n){function e(t,n){var e=Math.sqrt(i-2*o*Math.sin(n))/o;return[e*Math.sin(t*=o),a-e*Math.cos(t)]}var r=Math.sin(t),o=(r+Math.sin(n))/2,i=1+r*(2*o-r),a=Math.sqrt(i)/o;return e.invert=function(t,n){var e=a-n;return[Math.atan2(t,e)/o,ut((i-(t*t+e*e)*o*o)/(2*o))]},e}function Wn(){function t(t,n){Ba+=o*t-r*n,r=t,o=n}var n,e,r,o;Ha.point=function(i,a){Ha.point=t,n=r=i,e=o=a},Ha.lineEnd=function(){t(n,e)}}function Hn(){function t(t,n){a.push("M",t,",",n,i)}function n(t,n){a.push("M",t,",",n),u.point=e}function e(t,n){a.push("L",t,",",n)}function r(){u.point=t}function o(){a.push("Z")}var i=Yn(4.5),a=[],u={point:t,lineStart:function(){u.point=n},lineEnd:r,polygonStart:function(){u.lineEnd=o},polygonEnd:function(){u.lineEnd=r,u.point=t},pointRadius:function(t){return i=Yn(t),u},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return u}function Yn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Zn(t,n){La+=t,Aa+=n,++Na}function Gn(){function t(t,r){var o=t-n,i=r-e,a=Math.sqrt(o*o+i*i);Oa+=a*(n+t)/2,Ta+=a*(e+r)/2,Da+=a,Zn(n=t,e=r)}var n,e;Za.point=function(r,o){Za.point=t,Zn(n=r,e=o)}}function Jn(){Za.point=Zn}function $n(){function t(t,n){var e=t-r,i=n-o,a=Math.sqrt(e*e+i*i);Oa+=a*(r+t)/2,Ta+=a*(o+n)/2,Da+=a,Fa+=(a=o*t-r*n)*(r+t),za+=a*(o+n),Pa+=3*a,Zn(r=t,o=n)}var n,e,r,o;Za.point=function(i,a){Za.point=t,Zn(n=r=i,e=o=a)},Za.lineEnd=function(){t(n,e)}}function Xn(t){function n(n,e){t.moveTo(n+a,e),t.arc(n,e,a,0,Ui)}function e(n,e){t.moveTo(n,e),u.point=r}function r(n,e){t.lineTo(n,e)}function o(){u.point=n}function i(){t.closePath()}var a=4.5,u={point:n,lineStart:function(){u.point=e},lineEnd:o,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=o,u.point=n},pointRadius:function(t){return a=t,u},result:E};return u}function Kn(t){function n(t){return(u?r:e)(t)}function e(n){return ne(n,(function(e,r){e=t(e,r),n.point(e[0],e[1])}))}function r(n){function e(e,r){e=t(e,r),n.point(e[0],e[1])}function r(){m=NaN,S.point=i,n.lineStart()}function i(e,r){var i=vn([e,r]),a=t(e,r);o(m,x,y,b,M,w,m=a[0],x=a[1],y=e,b=i[0],M=i[1],w=i[2],u,n),n.point(m,x)}function a(){S.point=e,n.lineEnd()}function l(){r(),S.point=c,S.lineEnd=s}function c(t,n){i(f=t,n),h=m,d=x,p=b,g=M,v=w,S.point=i}function s(){o(m,x,y,b,M,w,h,d,f,p,g,v,u,n),S.lineEnd=a,a()}var f,h,d,p,g,v,y,m,x,b,M,w,S={point:e,lineStart:r,lineEnd:a,polygonStart:function(){n.polygonStart(),S.lineStart=l},polygonEnd:function(){n.polygonEnd(),S.lineStart=r}};return S}function o(n,e,r,u,l,c,s,f,h,d,p,g,v,y){var m=s-n,x=f-e,b=m*m+x*x;if(b>4*i&&v--){var M=u+d,w=l+p,S=c+g,_=Math.sqrt(M*M+w*w+S*S),k=Math.asin(S/=_),C=Ci(Ci(S)-1)<Bi||Ci(r-h)<Bi?(r+h)/2:Math.atan2(w,M),E=t(C,k),L=E[0],A=E[1],N=L-n,O=A-e,T=x*N-m*O;(T*T/b>i||.3<Ci((m*N+x*O)/b-.5)||u*d+l*p+c*g<a)&&(o(n,e,r,u,l,c,L,A,C,M/=_,w/=_,S,v,y),y.point(L,A),o(L,A,C,M,w,S,s,f,h,d,p,g,v,y))}}var i=.5,a=Math.cos(30*Hi),u=16;return n.precision=function(t){return arguments.length?(u=0<(i=t*t)&&16,n):Math.sqrt(i)},n}function Qn(t){var n=Kn((function(n,e){return t([n*Yi,e*Yi])}));return function(t){return oe(n(t))}}function te(t){this.stream=t}function ne(t,n){return{point:n,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function ee(t){return re((function(){return t}))()}function re(t){function n(t){return[(t=u(t[0]*Hi,t[1]*Hi))[0]*h+l,c-t[1]*h]}function e(t){return(t=u.invert((t[0]-l)/h,(c-t[1])/h))&&[t[0]*Yi,t[1]*Yi]}function r(){u=An(a=ue(y,m,x),i);var t=i(g,v);return l=d-t[0]*h,c=p+t[1]*h,o()}function o(){return s&&(s.valid=!1,s=null),n}var i,a,u,l,c,s,f=Kn((function(t,n){return[(t=i(t,n))[0]*h+l,c-t[1]*h]})),h=150,d=480,p=250,g=0,v=0,y=0,m=0,x=0,b=Ia,M=_,w=null,S=null;return n.stream=function(t){return s&&(s.valid=!1),(s=oe(b(a,f(M(t))))).valid=!0,s},n.clipAngle=function(t){return arguments.length?(b=null==t?(w=t,Ia):qn((w=+t)*Hi),o()):w},n.clipExtent=function(t){return arguments.length?(S=t,M=t?jn(t[0][0],t[0][1],t[1][0],t[1][1]):_,o()):S},n.scale=function(t){return arguments.length?(h=+t,r()):h},n.translate=function(t){return arguments.length?(d=+t[0],p=+t[1],r()):[d,p]},n.center=function(t){return arguments.length?(g=t[0]%360*Hi,v=t[1]%360*Hi,r()):[g*Yi,v*Yi]},n.rotate=function(t){return arguments.length?(y=t[0]%360*Hi,m=t[1]%360*Hi,x=2<t.length?t[2]%360*Hi:0,r()):[y*Yi,m*Yi,x*Yi]},vi.rebind(n,f,"precision"),function(){return i=t.apply(this,arguments),n.invert=i.invert&&e,r()}}function oe(t){return ne(t,(function(n,e){t.point(n*Hi,e*Hi)}))}function ie(t,n){return[t,n]}function ae(t,n){return[t>Vi?t-Ui:t<-Vi?t+Ui:t,n]}function ue(t,n,e){return t?n||e?An(ce(t),se(n,e)):ce(t):n||e?se(n,e):ae}function le(t){return function(n,e){return[(n+=t)>Vi?n-Ui:n<-Vi?n+Ui:n,e]}}function ce(t){var n=le(t);return n.invert=le(-t),n}function se(t,n){function e(t,n){var e=Math.cos(n),u=Math.cos(t)*e,l=Math.sin(t)*e,c=Math.sin(n),s=c*r+u*o;return[Math.atan2(l*i-s*a,u*r-c*o),ut(s*i+l*a)]}var r=Math.cos(t),o=Math.sin(t),i=Math.cos(n),a=Math.sin(n);return e.invert=function(t,n){var e=Math.cos(n),u=Math.cos(t)*e,l=Math.sin(t)*e,c=Math.sin(n),s=c*i-l*a;return[Math.atan2(l*i+c*a,u*r+s*o),ut(s*r-u*o)]},e}function fe(t,n){var e=Math.cos(t),r=Math.sin(t);return function(o,i,a,u){var l=a*n;null==o?(o=t+a*Ui,i=t-.5*l):(o=he(e,o),i=he(e,i),(0<a?o<i:o>i)&&(o+=a*Ui));for(var c,s=o;0<a?s>i:s<i;s-=l)u.point((c=wn([e,-r*Math.cos(s),-r*Math.sin(s)]))[0],c[1])}}function he(t,n){var e=vn(n);e[0]-=t,Mn(e);var r=at(-e[1]);return((0>-e[2]?-r:r)+2*Math.PI-Bi)%(2*Math.PI)}function de(t,n,e){var r=vi.range(t,n-Bi,e).concat(n);return function(t){return r.map((function(n){return[t,n]}))}}function pe(t,n,e){var r=vi.range(t,n-Bi,e).concat(n);return function(t){return r.map((function(n){return[n,t]}))}}function ge(t){return t.source}function ve(t){return t.target}function ye(t,n){function e(n,e){var r=Math.cos(n),o=Math.cos(e),i=t(r*o);return[i*o*Math.sin(n),i*Math.sin(e)]}return e.invert=function(t,e){var r=Math.sqrt(t*t+e*e),o=n(r),i=Math.sin(o),a=Math.cos(o);return[Math.atan2(t*i,r*a),Math.asin(r&&e*i/r)]},e}function me(t,n){function e(t,n){0<a?n<-Wi+Bi&&(n=-Wi+Bi):n>Wi-Bi&&(n=Wi-Bi);var e=a/Math.pow(o(n),i);return[e*Math.sin(i*t),a-e*Math.cos(i*t)]}var r=Math.cos(t),o=function(t){return Math.tan(Vi/4+t/2)},i=t===n?Math.sin(t):Math.log(r/Math.cos(n))/Math.log(o(n)/o(t)),a=r*Math.pow(o(t),i)/i;return i?(e.invert=function(t,n){var e=a-n,r=ot(i)*Math.sqrt(t*t+e*e);return[Math.atan2(t,e)/i,2*Math.atan(Math.pow(a/r,1/i))-Wi]},e):be}function xe(t,n){function e(t,n){var e=i-n;return[e*Math.sin(o*t),i-e*Math.cos(o*t)]}var r=Math.cos(t),o=t===n?Math.sin(t):(r-Math.cos(n))/(n-t),i=r/o+t;return Ci(o)<Bi?ie:(e.invert=function(t,n){var e=i-n;return[Math.atan2(t,e)/o,i-ot(o)*Math.sqrt(t*t+e*e)]},e)}function be(t,n){return[t,Math.log(Math.tan(Vi/4+n/2))]}function Me(t){var n,e=ee(t),r=e.scale,o=e.translate,i=e.clipExtent;return e.scale=function(){var t=r.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.translate=function(){var t=o.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.clipExtent=function(t){var a=i.apply(e,arguments);if(a!==e)n&&(a=null);else if(n=null==t){var u=Vi*r(),l=o();i([[l[0]-u,l[1]-u],[l[0]+u,l[1]+u]])}return a},e.clipExtent(null)}function we(t,n){return[Math.log(Math.tan(Vi/4+n/2)),-t]}function Se(t){return t[0]}function _e(t){return t[1]}function ke(t){for(var n=t.length,e=[0,1],r=2,o=2;o<n;o++){for(;1<r&&0>=it(t[e[r-2]],t[e[r-1]],t[o]);)--r;e[r++]=o}return e.slice(0,r)}function Ce(t,n){return t[0]-n[0]||t[1]-n[1]}function Ee(t,n,e){return(e[0]-n[0])*(t[1]-n[1])<(e[1]-n[1])*(t[0]-n[0])}function Le(t,n,e,r){var o=t[0],i=e[0],a=n[0]-o,u=r[0]-i,l=t[1],c=e[1],s=n[1]-l,f=r[1]-c,h=(u*(l-c)-f*(o-i))/(f*a-u*s);return[o+h*a,l+h*s]}function Ae(t){var n=t[0],e=t[t.length-1];return!(n[0]-e[0]||n[1]-e[1])}function Ne(){Je(this),this.edge=this.site=this.circle=null}function Oe(t){var n=uu.pop()||new Ne;return n.site=t,n}function Te(t){je(t),ou.remove(t),uu.push(t),Je(t)}function De(t){var n=t.circle,e=n.x,r=n.cy,o={x:e,y:r},i=t.P,a=t.N,u=[t];Te(t);for(var l=i;l.circle&&Ci(e-l.circle.x)<Bi&&Ci(r-l.circle.cy)<Bi;)i=l.P,u.unshift(l),Te(l),l=i;u.unshift(l),je(l);for(var c=a;c.circle&&Ci(e-c.circle.x)<Bi&&Ci(r-c.circle.cy)<Bi;)a=c.N,u.push(c),Te(c),c=a;u.push(c),je(c);var s,f=u.length;for(s=1;s<f;++s)c=u[s],l=u[s-1],Ye(c.edge,l.site,c.site,o);l=u[0],(c=u[f-1]).edge=We(l.site,c.site,null,o),Be(l),Be(c)}function Fe(t){for(var n,e,r,o,i=t.x,a=t.y,u=ou._;u;)if((r=ze(u,a)-i)>Bi)u=u.L;else{if(!((o=i-Pe(u,a))>Bi)){r>-Bi?(n=u.P,e=u):o>-Bi?(n=u,e=u.N):n=e=u;break}if(!u.R){n=u;break}u=u.R}var l=Oe(t);if(ou.insert(n,l),n||e){if(n===e)return je(n),e=Oe(n.site),ou.insert(l,e),l.edge=e.edge=We(n.site,l.site),Be(n),void Be(e);if(!e)return void(l.edge=We(n.site,l.site));je(n),je(e);var c=n.site,s=c.x,f=c.y,h=t.x-s,d=t.y-f,p=e.site,g=p.x-s,v=p.y-f,y=2*(h*v-d*g),m=h*h+d*d,x=g*g+v*v,b={x:(v*m-d*x)/y+s,y:(h*x-g*m)/y+f};Ye(e.edge,c,p,b),l.edge=We(c,t,null,b),e.edge=We(t,p,null,b),Be(n),Be(e)}}function ze(t,n){var e=t.site,r=e.x,o=e.y,i=o-n;if(!i)return r;var a=t.P;if(!a)return-1/0;var u=(e=a.site).x,l=e.y,c=l-n;if(!c)return u;var s=u-r,f=1/i-1/c,h=s/c;return f?(-h+Math.sqrt(h*h-2*f*(s*s/(-2*c)-l+c/2+o-i/2)))/f+r:(r+u)/2}function Pe(t,n){var e=t.N;if(e)return ze(e,n);var r=t.site;return r.y===n?r.x:1/0}function Re(t){this.site=t,this.edges=[]}function Ie(t,n){return n.angle-t.angle}function qe(){Je(this),this.x=this.y=this.arc=this.site=this.cy=null}function Be(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,o=t.site,i=e.site;if(r!==i){var a=o.x,u=o.y,l=r.x-a,c=r.y-u,s=i.x-a,f=2*(l*(v=i.y-u)-c*s);if(!(f>=-ji)){var h=l*l+c*c,d=s*s+v*v,p=(v*h-c*d)/f,g=(l*d-s*h)/f,v=g+u,y=lu.pop()||new qe;y.arc=t,y.site=o,y.x=p+a,y.y=v+Math.sqrt(p*p+g*g),y.cy=v,t.circle=y;for(var m=null,x=au._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(!x.L){m=x.P;break}x=x.L}else{if(!x.R){m=x;break}x=x.R}au.insert(m,y),m||(iu=y)}}}}function je(t){var n=t.circle;n&&(!n.P&&(iu=n.N),au.remove(n),lu.push(n),Je(n),t.circle=null)}function Ve(t,n){var e=t.b;if(e)return!0;var r,o,i=t.a,a=n[0][0],u=n[1][0],l=n[0][1],c=n[1][1],s=t.l,f=t.r,h=s.x,d=s.y,p=f.x,g=f.y,v=(h+p)/2;if(g===d){if(v<a||v>=u)return;if(h>p){if(i){if(i.y>=c)return}else i={x:v,y:l};e={x:v,y:c}}else{if(i){if(i.y<l)return}else i={x:v,y:c};e={x:v,y:l}}}else if(o=(d+g)/2-(r=(h-p)/(g-d))*v,-1>r||1<r)if(h>p){if(i){if(i.y>=c)return}else i={x:(l-o)/r,y:l};e={x:(c-o)/r,y:c}}else{if(i){if(i.y<l)return}else i={x:(c-o)/r,y:c};e={x:(l-o)/r,y:l}}else if(d<g){if(i){if(i.x>=u)return}else i={x:a,y:r*a+o};e={x:u,y:r*u+o}}else{if(i){if(i.x<a)return}else i={x:u,y:r*u+o};e={x:a,y:r*a+o}}return t.a=i,t.b=e,!0}function Ue(t,n){this.l=t,this.r=n,this.a=this.b=null}function We(t,n,e,r){var o=new Ue(t,n);return eu.push(o),e&&Ye(o,t,n,e),r&&Ye(o,n,t,r),ru[t.i].edges.push(new Ze(o,t,n)),ru[n.i].edges.push(new Ze(o,n,t)),o}function He(t,n,e){var r=new Ue(t,null);return r.a=n,r.b=e,eu.push(r),r}function Ye(t,n,e,r){t.a||t.b?t.l===e?t.b=r:t.a=r:(t.a=r,t.l=n,t.r=e)}function Ze(t,n,e){var r=t.a,o=t.b;this.edge=t,this.site=n,this.angle=e?Math.atan2(e.y-n.y,e.x-n.x):t.l===n?Math.atan2(o.x-r.x,r.y-o.y):Math.atan2(r.x-o.x,o.y-r.y)}function Ge(){this._=null}function Je(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function $e(t,n){var e=n,r=n.R,o=e.U;o?o.L===e?o.L=r:o.R=r:t._=r,r.U=o,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function Xe(t,n){var e=n,r=n.L,o=e.U;o?o.L===e?o.L=r:o.R=r:t._=r,r.U=o,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function Ke(t){for(;t.L;)t=t.L;return t}function Qe(t,n){var e,r,o,i=t.sort(tr).pop();for(eu=[],ru=Array(t.length),ou=new Ge,au=new Ge;;)if(o=iu,i&&(!o||i.y<o.y||i.y===o.y&&i.x<o.x))(i.x!==e||i.y!==r)&&(ru[i.i]=new Re(i),Fe(i),e=i.x,r=i.y),i=t.pop();else{if(!o)break;De(o.arc)}n&&(function(t){for(var n,e=eu,r=Bn(t[0][0],t[0][1],t[1][0],t[1][1]),o=e.length;o--;)(!Ve(n=e[o],t)||!r(n)||Ci(n.a.x-n.b.x)<Bi&&Ci(n.a.y-n.b.y)<Bi)&&(n.a=n.b=null,e.splice(o,1))}(n),function(t){for(var n,e,r,o,i,a,u,l,c,s,f=t[0][0],h=t[1][0],d=t[0][1],p=t[1][1],g=ru,v=g.length;v--;)if((i=g[v])&&i.prepare())for(l=(u=i.edges).length,a=0;a<l;)r=(s=u[a].end()).x,o=s.y,n=(c=u[++a%l].start()).x,e=c.y,(Ci(r-n)>Bi||Ci(o-e)>Bi)&&(u.splice(a,0,new Ze(He(i.site,s,Ci(r-f)<Bi&&p-o>Bi?{x:f,y:Ci(n-f)<Bi?e:p}:Ci(o-p)<Bi&&h-r>Bi?{x:Ci(e-p)<Bi?n:h,y:p}:Ci(r-h)<Bi&&o-d>Bi?{x:h,y:Ci(n-h)<Bi?e:d}:Ci(o-d)<Bi&&r-f>Bi?{x:Ci(e-d)<Bi?n:f,y:d}:null),i.site,null)),++l)}(n));var a={cells:ru,edges:eu};return ou=au=eu=ru=null,a}function tr(t,n){return n.y-t.y||n.x-t.x}function nr(t,n,e){return(t.x-e.x)*(n.y-t.y)-(t.x-n.x)*(e.y-t.y)}function er(t){return t.x}function rr(t){return t.y}function or(t,n,e,r,o,i){if(!t(n,e,r,o,i)){var a=.5*(e+o),u=.5*(r+i),l=n.nodes;l[0]&&or(t,l[0],e,r,a,u),l[1]&&or(t,l[1],a,r,o,u),l[2]&&or(t,l[2],e,u,a,i),l[3]&&or(t,l[3],a,u,o,i)}}function ir(t,n,e,r,o,i,a){var u,l=1/0;return function t(c,s,f,h,d){if(!(s>i||f>a||h<r||d<o)){if(p=c.point){var p,g=n-c.x,v=e-c.y,y=g*g+v*v;if(y<l){var m=Math.sqrt(l=y);r=n-m,o=e-m,i=n+m,a=e+m,u=p}}for(var x=c.nodes,b=.5*(s+h),M=.5*(f+d),w=(e>=M)<<1|n>=b;void 0>w;++w)if(c=x[3&w])switch(3&w){case 0:t(c,s,f,b,M);break;case 1:t(c,b,f,h,M);break;case 2:t(c,s,M,b,d);break;case 3:t(c,b,M,h,d)}}}(t,r,o,i,a),u}function ar(t,n){t=vi.rgb(t),n=vi.rgb(n);var e=t.r,r=t.g,o=t.b,i=n.r-e,a=n.g-r,u=n.b-o;return function(t){return"#"+_t(Math.round(e+i*t))+_t(Math.round(r+a*t))+_t(Math.round(o+u*t))}}function ur(t,n){var e,r={},o={};for(e in t)e in n?r[e]=sr(t[e],n[e]):o[e]=t[e];for(e in n)e in t||(o[e]=n[e]);return function(t){for(e in r)o[e]=r[e](t);return o}}function lr(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function cr(t,n){var e,r,o,i=su.lastIndex=fu.lastIndex=0,a=-1,u=[],l=[];for(t+="",n+="";(e=su.exec(t))&&(r=fu.exec(n));)(o=r.index)>i&&(o=n.slice(i,o),u[a]?u[a]+=o:u[++a]=o),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,l.push({i:a,x:lr(e,r)})),i=fu.lastIndex;return i<n.length&&(o=n.slice(i),u[a]?u[a]+=o:u[++a]=o),2>u.length?l[0]?(n=l[0].x,function(t){return n(t)+""}):function(){return n}:(n=l.length,function(t){for(var e,r=0;r<n;++r)u[(e=l[r]).i]=e.x(t);return u.join("")})}function sr(t,n){for(var e,r=vi.interpolators.length;0<=--r&&!(e=vi.interpolators[r](t,n)););return e}function fr(t,n){var e,r=[],o=[],i=t.length,a=n.length,u=Math.min(t.length,n.length);for(e=0;e<u;++e)r.push(sr(t[e],n[e]));for(;e<i;++e)o[e]=t[e];for(;e<a;++e)o[e]=n[e];return function(t){for(e=0;e<u;++e)o[e]=r[e](t);return o}}function hr(t){return function(n){return 0>=n?0:1<=n?1:t(n)}}function dr(t){return function(n){return 1-t(1-n)}}function pr(t){return function(n){return.5*(.5>n?t(2*n):2-t(2-2*n))}}function gr(t){return t*t}function vr(t){return t*t*t}function yr(t){if(0>=t)return 0;if(1<=t)return 1;var n=t*t,e=n*t;return 4*(.5>t?e:3*(t-n)+e-.75)}function mr(t){return 1-Math.cos(t*Wi)}function xr(t){return Math.pow(2,10*(t-1))}function br(t){return 1-Math.sqrt(1-t*t)}function Mr(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function wr(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function Sr(t){var n=[t.a,t.b],e=[t.c,t.d],r=kr(n),o=_r(n,e),i=kr(function(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}(e,n,-o))||0;n[0]*e[1]<e[0]*n[1]&&(n[0]*=-1,n[1]*=-1,r*=-1,o*=-1),this.rotate=(r?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*Yi,this.translate=[t.e,t.f],this.scale=[r,i],this.skew=i?Math.atan2(o,i)*Yi:0}function _r(t,n){return t[0]*n[0]+t[1]*n[1]}function kr(t){var n=Math.sqrt(_r(t,t));return n&&(t[0]/=n,t[1]/=n),n}function Cr(t){return t.length?t.pop()+",":""}function Er(t,n){var e=[],r=[];return t=vi.transform(t),n=vi.transform(n),function(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var o=e.push("translate(",null,",",null,")");r.push({i:o-4,x:lr(t[0],n[0])},{i:o-2,x:lr(t[1],n[1])})}else(n[0]||n[1])&&e.push("translate("+n+")")}(t.translate,n.translate,e,r),function(t,n,e,r){t===n?n&&e.push(Cr(e)+"rotate("+n+")"):(180<t-n?n+=360:180<n-t&&(t+=360),r.push({i:e.push(Cr(e)+"rotate(",null,")")-2,x:lr(t,n)}))}(t.rotate,n.rotate,e,r),function(t,n,e,r){t===n?n&&e.push(Cr(e)+"skewX("+n+")"):r.push({i:e.push(Cr(e)+"skewX(",null,")")-2,x:lr(t,n)})}(t.skew,n.skew,e,r),function(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var o=e.push(Cr(e)+"scale(",null,",",null,")");r.push({i:o-4,x:lr(t[0],n[0])},{i:o-2,x:lr(t[1],n[1])})}else(1!==n[0]||1!==n[1])&&e.push(Cr(e)+"scale("+n+")")}(t.scale,n.scale,e,r),t=n=null,function(t){for(var n,o=-1,i=r.length;++o<i;)e[(n=r[o]).i]=n.x(t);return e.join("")}}function Lr(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function Ar(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function Nr(t){for(var n=t.source,e=t.target,r=function(t,n){if(t===n)return t;for(var e=Or(t),r=Or(n),o=e.pop(),i=r.pop(),a=null;o===i;)a=o,o=e.pop(),i=r.pop();return a}(n,e),o=[n];n!==r;)n=n.parent,o.push(n);for(var i=o.length;e!==r;)o.splice(i,0,e),e=e.parent;return o}function Or(t){for(var n=[],e=t.parent;null!=e;)n.push(t),t=e,e=e.parent;return n.push(t),n}function Tr(t){t.fixed|=2}function Dr(t){t.fixed&=-7}function Fr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function zr(t){t.fixed&=-5}function Pr(t,n){return vi.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=Vr,t}function Rr(t,n){for(var e=[t];null!=(t=e.pop());)if(n(t),(o=t.children)&&(r=o.length))for(var r,o;0<=--r;)e.push(o[r])}function Ir(t,n){for(var e=[t],r=[];null!=(t=e.pop());)if(r.push(t),(i=t.children)&&(o=i.length))for(var o,i,a=-1;++a<o;)e.push(i[a]);for(;null!=(t=r.pop());)n(t)}function qr(t){return t.children}function Br(t){return t.value}function jr(t,n){return n.value-t.value}function Vr(t){return vi.merge(t.map((function(t){return(t.children||[]).map((function(n){return{source:t,target:n}}))})))}function Ur(t){return t.x}function Wr(t){return t.y}function Hr(t,n,e){t.y0=n,t.y=e}function Yr(t){return vi.range(t.length)}function Zr(t){for(var n=-1,e=t[0].length,r=[];++n<e;)r[n]=0;return r}function Gr(t){for(var n,e=1,r=0,o=t[0][1],i=t.length;e<i;++e)(n=t[e][1])>o&&(r=e,o=n);return r}function Jr(t){return t.reduce($r,0)}function $r(t,n){return t+n[1]}function Xr(t,n){return Kr(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function Kr(t,n){for(var e=-1,r=+t[0],o=(t[1]-r)/n,i=[];++e<=n;)i[e]=o*e+r;return i}function Qr(t){return[vi.min(t),vi.max(t)]}function to(t,n){return t.value-n.value}function no(t,n){var e=t._pack_next;t._pack_next=n,n._pack_prev=t,n._pack_next=e,e._pack_prev=n}function eo(t,n){t._pack_next=n,n._pack_prev=t}function ro(t,n){var e=n.x-t.x,r=n.y-t.y,o=t.r+n.r;return.999*o*o>e*e+r*r}function oo(t){function n(t){s=Math.min(t.x-t.r,s),f=Math.max(t.x+t.r,f),h=Math.min(t.y-t.r,h),d=Math.max(t.y+t.r,d)}if((e=t.children)&&(c=e.length)){var e,r,o,i,a,u,l,c,s=1/0,f=-1/0,h=1/0,d=-1/0;if(e.forEach(io),(r=e[0]).x=-r.r,r.y=0,n(r),1<c&&((o=e[1]).x=o.r,o.y=0,n(o),2<c))for(uo(r,o,i=e[2]),n(i),no(r,i),r._pack_prev=i,no(i,o),o=r._pack_next,a=3;a<c;a++){uo(r,o,i=e[a]);var p=0,g=1,v=1;for(u=o._pack_next;u!==o;u=u._pack_next,g++)if(ro(u,i)){p=1;break}if(1==p)for(l=r._pack_prev;l!==u._pack_prev&&!ro(l,i);l=l._pack_prev,v++);p?(g<v||g==v&&o.r<r.r?eo(r,o=u):eo(r=l,o),a--):(no(r,i),o=i,n(i))}var y=(s+f)/2,m=(h+d)/2,x=0;for(a=0;a<c;a++)(i=e[a]).x-=y,i.y-=m,x=Math.max(x,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=x,e.forEach(ao)}}function io(t){t._pack_next=t._pack_prev=t}function ao(t){delete t._pack_next,delete t._pack_prev}function uo(t,n,e){var r=t.r+e.r,o=n.x-t.x,i=n.y-t.y;if(r&&(o||i)){var a=n.r+e.r,u=o*o+i*i,l=.5+((r*=r)-(a*=a))/(2*u),c=Math.sqrt(Math.max(0,2*a*(r+u)-(r-=u)*r-a*a))/(2*u);e.x=t.x+l*o+c*i,e.y=t.y+l*i-c*o}else e.x=t.x+r,e.y=t.y}function lo(t,n){return t.parent==n.parent?1:2}function co(t){var n=t.children;return n.length?n[0]:t.t}function so(t){var n,e=t.children;return(n=e.length)?e[n-1]:t.t}function fo(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function ho(t,n,e){return t.a.parent===n.parent?t.a:e}function po(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function go(t,n){var e=t.x+n[3],r=t.y+n[0],o=t.dx-n[1]-n[3],i=t.dy-n[0]-n[2];return 0>o&&(e+=o/2,o=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:o,dy:i}}function vo(t){var n=t[0],e=t[t.length-1];return n<e?[n,e]:[e,n]}function yo(t){return t.rangeExtent?t.rangeExtent():vo(t.range())}function mo(t,n,e,r){var o=e(t[0],t[1]),i=r(n[0],n[1]);return function(t){return i(o(t))}}function xo(t,n){var e,r=0,o=t.length-1,i=t[r],a=t[o];return a<i&&(e=r,r=o,o=e,e=i,i=a,a=e),t[r]=n.floor(i),t[o]=n.ceil(a),t}function bo(t){return t?{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}:wu}function Mo(t,n,e,r){var o=[],i=[],a=0,u=Math.min(t.length,n.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<=u;)o.push(e(t[a-1],t[a])),i.push(r(n[a-1],n[a]));return function(n){var e=vi.bisect(t,n,1,u)-1;return i[e](o[e](n))}}function wo(t,n){return vi.rebind(t,n,"range","rangeRound","interpolate","clamp")}function So(t,n){return xo(t,bo(_o(t,n)[2])),xo(t,bo(_o(t,n)[2])),t}function _o(t,n){null==n&&(n=10);var e=vo(t),r=e[1]-e[0],o=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),i=n/r*o;return.15>=i?o*=10:.35>=i?o*=5:.75>=i&&(o*=2),e[0]=Math.ceil(e[0]/o)*o,e[1]=Math.floor(e[1]/o)*o+.5*o,e[2]=o,e}function ko(t,n){return vi.range.apply(vi,_o(t,n))}function Co(t,n,e){var r=_o(t,n);if(e){var o=fa.exec(e);if(o.shift(),"s"===o[8]){var i=vi.formatPrefix(Math.max(Ci(r[0]),Ci(r[1])));return o[7]||(o[7]="."+Eo(i.scale(r[2]))),o[8]="f",e=vi.format(o.join("")),function(t){return e(i.scale(t))+i.symbol}}o[7]||(o[7]="."+function(t,n){var e=Eo(n[2]);return t in Su?Math.abs(e-Eo(Math.max(Ci(n[0]),Ci(n[1]))))+ +("e"!==t):e-2*("%"===t)}(o[8],r)),e=o.join("")}else e=",."+Eo(r[2])+"f";return vi.format(e)}function Eo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Lo(t){return function(n){return 0>n?-Math.pow(-n,t):Math.pow(n,t)}}function Ao(){return 0}function No(t){return t.innerRadius}function Oo(t){return t.outerRadius}function To(t){return t.startAngle}function Do(t){return t.endAngle}function Fo(t){return t&&t.padAngle}function zo(t,n,e,r){return 0<(t-e)*n-(n-r)*t?0:1}function Po(t,n,e,r,o){var i=t[0]-n[0],a=t[1]-n[1],u=(o?r:-r)/Math.sqrt(i*i+a*a),l=u*a,c=-u*i,s=t[0]+l,f=t[1]+c,h=n[0]+l,d=n[1]+c,p=(s+h)/2,g=(f+d)/2,v=h-s,y=d-f,m=v*v+y*y,x=e-r,b=s*d-h*f,M=(0>y?-1:1)*Math.sqrt(Math.max(0,x*x*m-b*b)),w=(b*y-v*M)/m,S=(-b*v-y*M)/m,_=(b*y+v*M)/m,k=(-b*v+y*M)/m,C=w-p,E=S-g,L=_-p,A=k-g;return C*C+E*E>L*L+A*A&&(w=_,S=k),[[w-l,S-c],[w*e/x,S*e/x]]}function Ro(t){function n(n){function a(){c.push("M",i(t(s),u))}for(var l,c=[],s=[],f=-1,h=n.length,d=Nt(e),p=Nt(r);++f<h;)o.call(this,l=n[f],f)?s.push([+d.call(this,l,f),+p.call(this,l,f)]):s.length&&(a(),s=[]);return s.length&&a(),c.length?c.join(""):null}var e=Se,r=_e,o=Nn,i=Io,a=i.key,u=.7;return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n.defined=function(t){return arguments.length?(o=t,n):o},n.interpolate=function(t){return arguments.length?(a="function"==typeof t?i=t:(i=Ou.get(t)||Io).key,n):a},n.tension=function(t){return arguments.length?(u=t,n):u},n}function Io(t){return 1<t.length?t.join("L"):t+"Z"}function qo(t){return t.join("L")+"Z"}function Bo(t){for(var n=0,e=t.length,r=t[0],o=[r[0],",",r[1]];++n<e;)o.push("V",(r=t[n])[1],"H",r[0]);return o.join("")}function jo(t){for(var n=0,e=t.length,r=t[0],o=[r[0],",",r[1]];++n<e;)o.push("H",(r=t[n])[0],"V",r[1]);return o.join("")}function Vo(t,n){if(1>n.length||t.length!=n.length&&t.length!=n.length+2)return Io(t);var e=t.length!=n.length,r="",o=t[0],i=t[1],a=n[0],u=a,l=1;if(e&&(r+="Q"+(i[0]-2*a[0]/3)+","+(i[1]-2*a[1]/3)+","+i[0]+","+i[1],o=t[1],l=2),1<n.length){u=n[1],i=t[l],l++,r+="C"+(o[0]+a[0])+","+(o[1]+a[1])+","+(i[0]-u[0])+","+(i[1]-u[1])+","+i[0]+","+i[1];for(var c=2;c<n.length;c++,l++)i=t[l],u=n[c],r+="S"+(i[0]-u[0])+","+(i[1]-u[1])+","+i[0]+","+i[1]}if(e){var s=t[l];r+="Q"+(i[0]+2*u[0]/3)+","+(i[1]+2*u[1]/3)+","+s[0]+","+s[1]}return r}function Uo(t,n){for(var e,r=[],o=(1-n)/2,i=t[0],a=t[1],u=1,l=t.length;++u<l;)e=i,i=a,a=t[u],r.push([o*(a[0]-e[0]),o*(a[1]-e[1])]);return r}function Wo(t){if(3>t.length)return Io(t);var n=1,e=t.length,r=t[0],o=r[0],i=r[1],a=[o,o,o,(r=t[1])[0]],u=[i,i,i,r[1]],l=[o,",",i,"L",Ho(Fu,a),",",Ho(Fu,u)];for(t.push(t[e-1]);++n<=e;)r=t[n],a.shift(),a.push(r[0]),u.shift(),u.push(r[1]),Yo(l,a,u);return t.pop(),l.push("L",r),l.join("")}function Ho(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function Yo(t,n,e){t.push("C",Ho(Tu,n),",",Ho(Tu,e),",",Ho(Du,n),",",Ho(Du,e),",",Ho(Fu,n),",",Ho(Fu,e))}function Zo(t,n){return(n[1]-t[1])/(n[0]-t[0])}function Go(t){for(var n,e,r,o,i=[],a=function(t){for(var n=0,e=t.length-1,r=[],o=t[0],i=t[1],a=r[0]=Zo(o,i);++n<e;)r[n]=(a+(a=Zo(o=i,i=t[n+1])))/2;return r[n]=a,r}(t),u=-1,l=t.length-1;++u<l;)n=Zo(t[u],t[u+1]),Ci(n)<Bi?a[u]=a[u+1]=0:9<(o=(e=a[u]/n)*e+(r=a[u+1]/n)*r)&&(o=3*n/Math.sqrt(o),a[u]=o*e,a[u+1]=o*r);for(u=-1;++u<=l;)o=(t[Math.min(l,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+a[u]*a[u])),i.push([o||0,a[u]*o||0]);return i}function Jo(t){for(var n,e,r,o=-1,i=t.length;++o<i;)e=(n=t[o])[0],r=n[1]-Wi,n[0]=e*Math.cos(r),n[1]=e*Math.sin(r);return t}function $o(t){function n(n){function l(){g.push("M",u(t(y),f),s,c(t(v.reverse()),f),"Z")}for(var h,d,p,g=[],v=[],y=[],m=-1,x=n.length,b=Nt(e),M=Nt(o),w=e===r?function(){return d}:Nt(r),S=o===i?function(){return p}:Nt(i);++m<x;)a.call(this,h=n[m],m)?(v.push([d=+b.call(this,h,m),p=+M.call(this,h,m)]),y.push([+w.call(this,h,m),+S.call(this,h,m)])):v.length&&(l(),v=[],y=[]);return v.length&&l(),g.length?g.join(""):null}var e=Se,r=Se,o=0,i=_e,a=Nn,u=Io,l=u.key,c=u,s="L",f=.7;return n.x=function(t){return arguments.length?(e=r=t,n):r},n.x0=function(t){return arguments.length?(e=t,n):e},n.x1=function(t){return arguments.length?(r=t,n):r},n.y=function(t){return arguments.length?(o=i=t,n):i},n.y0=function(t){return arguments.length?(o=t,n):o},n.y1=function(t){return arguments.length?(i=t,n):i},n.defined=function(t){return arguments.length?(a=t,n):a},n.interpolate=function(t){return arguments.length?(l="function"==typeof t?u=t:(u=Ou.get(t)||Io).key,c=u.reverse||u,s=u.closed?"M":"L",n):l},n.tension=function(t){return arguments.length?(f=t,n):f},n}function Xo(t){return t.radius}function Ko(t){return[t.x,t.y]}function Qo(t){return function(){var n=t.apply(this,arguments),e=n[0],r=n[1]-Wi;return[e*Math.cos(r),e*Math.sin(r)]}}function ti(){return 64}function ni(){return"circle"}function ei(t){var n=Math.sqrt(t/Vi);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}function ri(t){return function(){var n,e,r;(n=this[t])&&(r=n[e=n.active])&&(r.timer.c=null,r.timer.t=NaN,--n.count?delete n[e]:delete this[t],n.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function oi(t,n,e){return Ai(t,ju),t.namespace=n,t.id=e,t}function ii(t,n,e,r){var o=t.id,i=t.namespace;return J(t,"function"==typeof e?function(t,a,u){t[i][o].tween.set(n,r(e.call(t,t.__data__,a,u)))}:(e=r(e),function(t){t[i][o].tween.set(n,e)}))}function ai(t){return null==t&&(t=""),function(){this.textContent=t}}function ui(t){return null==t?"__transition__":"__transition_"+t+"__"}function li(t,n,e,r,o){function i(e){var o=h.active,i=h[o];for(var p in i&&(i.timer.c=null,i.timer.t=NaN,--h.count,delete h[o],i.event&&i.event.interrupt.call(t,t.__data__,i.index)),h)if(+p<r){var g=h[p];g.timer.c=null,g.timer.t=NaN,--h.count,delete h[p]}l.c=a,Dt((function(){return l.c&&a(e||1)&&(l.c=null,l.t=NaN),1}),0,u),h.active=r,d.event&&d.event.start.call(t,t.__data__,n),f=[],d.tween.forEach((function(e,r){(r=r.call(t,t.__data__,n))&&f.push(r)})),s=d.ease,c=d.duration}function a(o){for(var i=o/c,a=s(i),u=f.length;0<u;)f[--u].call(t,a);if(1<=i)return d.event&&d.event.end.call(t,t.__data__,n),--h.count?delete h[r]:delete t[e],1}var u,l,c,s,f,h=t[e]||(t[e]={active:0,count:0}),d=h[r];d||(u=o.time,l=Dt((function(t){var n=d.delay;return l.t=n+u,n<=t?i(t-n):void(l.c=i)}),0,u),d=h[r]={tween:new g,time:u,timer:l,delay:o.delay,duration:o.duration,ease:o.ease,index:n},o=null,++h.count)}function ci(t,n,e){t.attr("transform",(function(t){var r=n(t);return"translate("+(isFinite(r)?r:e(t))+",0)"}))}function si(t,n,e){t.attr("transform",(function(t){var r=n(t);return"translate(0,"+(isFinite(r)?r:e(t))+")"}))}function fi(t){return t.toISOString()}function hi(t,n,e){function r(n){return t(n)}function o(t,e){var r=(t[1]-t[0])/e,o=vi.bisect($u,r);return o==$u.length?[n.year,_o(t.map((function(t){return t/31536e6})),e)[2]]:o?n[r/$u[o-1]<$u[o]/r?o-1:o]:[Qu,_o(t,e)[2]]}return r.invert=function(n){return di(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain(n),r):t.domain().map(di)},r.nice=function(t,n){function e(e){return!isNaN(e)&&!t.range(e,di(+e+1),n).length}var i=r.domain(),a=vo(i),u=null==t?o(a,10):"number"==typeof t&&o(a,t);return u&&(t=u[0],n=u[1]),r.domain(xo(i,1<n?{floor:function(n){for(;e(n=t.floor(n));)n=di(n-1);return n},ceil:function(n){for(;e(n=t.ceil(n));)n=di(+n+1);return n}}:t))},r.ticks=function(t,n){var e=vo(r.domain()),i=null==t?o(e,10):"number"==typeof t?o(e,t):!t.range&&[{range:t},n];return i&&(t=i[0],n=i[1]),t.range(e[0],di(+e[1]+1),1>n?1:n)},r.tickFormat=function(){return e},r.copy=function(){return hi(t.copy(),n,e)},wo(r,t)}function di(t){return new Date(t)}function pi(t){return JSON.parse(t.responseText)}function gi(t){var n=xi.createRange();return n.selectNode(xi.body),n.createContextualFragment(t.responseText)}var vi={version:"3.5.17"},yi=[].slice,mi=function(t){return yi.call(t)},xi=this.document;if(xi)try{mi(xi.documentElement.childNodes)[0].nodeType}catch(u){mi=function(t){for(var n=t.length,e=Array(n);n--;)e[n]=t[n];return e}}if(Date.now||(Date.now=function(){return+new Date}),xi)try{xi.createElement("DIV").style.setProperty("opacity",0,"")}catch(a){var bi=this.Element.prototype,Mi=bi.setAttribute,wi=bi.setAttributeNS,Si=this.CSSStyleDeclaration.prototype,_i=Si.setProperty;bi.setAttribute=function(t,n){Mi.call(this,t,n+"")},bi.setAttributeNS=function(t,n,e){wi.call(this,t,n,e+"")},Si.setProperty=function(t,n,e){_i.call(this,t,n+"",e)}}vi.ascending=l,vi.descending=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},vi.min=function(t,n){var e,r,o=-1,i=t.length;if(1===arguments.length){for(;++o<i;)if(null!=(r=t[o])&&r>=r){e=r;break}for(;++o<i;)null!=(r=t[o])&&e>r&&(e=r)}else{for(;++o<i;)if(null!=(r=n.call(t,t[o],o))&&r>=r){e=r;break}for(;++o<i;)null!=(r=n.call(t,t[o],o))&&e>r&&(e=r)}return e},vi.max=function(t,n){var e,r,o=-1,i=t.length;if(1===arguments.length){for(;++o<i;)if(null!=(r=t[o])&&r>=r){e=r;break}for(;++o<i;)null!=(r=t[o])&&r>e&&(e=r)}else{for(;++o<i;)if(null!=(r=n.call(t,t[o],o))&&r>=r){e=r;break}for(;++o<i;)null!=(r=n.call(t,t[o],o))&&r>e&&(e=r)}return e},vi.extent=function(t,n){var e,r,o,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){e=o=r;break}for(;++i<a;)null!=(r=t[i])&&(e>r&&(e=r),o<r&&(o=r))}else{for(;++i<a;)if(null!=(r=n.call(t,t[i],i))&&r>=r){e=o=r;break}for(;++i<a;)null!=(r=n.call(t,t[i],i))&&(e>r&&(e=r),o<r&&(o=r))}return[e,o]},vi.sum=function(t,n){var e,r=0,o=t.length,i=-1;if(1===arguments.length)for(;++i<o;)s(e=+t[i])&&(r+=e);else for(;++i<o;)s(e=+n.call(t,t[i],i))&&(r+=e);return r},vi.mean=function(t,n){var e,r=0,o=t.length,i=-1,a=o;if(1===arguments.length)for(;++i<o;)s(e=c(t[i]))?r+=e:--a;else for(;++i<o;)s(e=c(n.call(t,t[i],i)))?r+=e:--a;return a?r/a:void 0},vi.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),o=+t[r-1],i=e-r;return i?o+i*(t[r]-o):o},vi.median=function(t,n){var e,r=[],o=t.length,i=-1;if(1===arguments.length)for(;++i<o;)s(e=c(t[i]))&&r.push(e);else for(;++i<o;)s(e=c(n.call(t,t[i],i)))&&r.push(e);return r.length?vi.quantile(r.sort(l),.5):void 0},vi.variance=function(t,n){var e,r,o=t.length,i=0,a=0,u=-1,l=0;if(1===arguments.length)for(;++u<o;)s(e=c(t[u]))&&(a+=(r=e-i)*(e-(i+=r/++l)));else for(;++u<o;)s(e=c(n.call(t,t[u],u)))&&(a+=(r=e-i)*(e-(i+=r/++l)));return 1<l?a/(l-1):void 0},vi.deviation=function(){var t=vi.variance.apply(this,arguments);return t?Math.sqrt(t):t};var ki=f(l);vi.bisectLeft=ki.left,vi.bisect=vi.bisectRight=ki.right,vi.bisector=function(t){return f(1===t.length?function(n,e){return l(t(n),e)}:t)},vi.shuffle=function(t,n,e){3>(i=arguments.length)&&(e=t.length,2>i&&(n=0));for(var r,o,i=e-n;i;)o=0|Math.random()*i--,r=t[i+n],t[i+n]=t[o+n],t[o+n]=r;return t},vi.permute=function(t,n){for(var e=n.length,r=Array(e);e--;)r[e]=t[n[e]];return r},vi.pairs=function(t){for(var n=0,e=t.length-1,r=t[0],o=Array(0>e?0:e);n<e;)o[n]=[r,r=t[++n]];return o},vi.transpose=function(t){if(!(o=t.length))return[];for(var n=-1,e=vi.min(t,h),r=Array(e);++n<e;)for(var o,i=-1,a=r[n]=Array(o);++i<o;)a[i]=t[i][n];return r},vi.zip=function(){return vi.transpose(arguments)},vi.keys=function(t){var n=[];for(var e in t)n.push(e);return n},vi.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},vi.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},vi.merge=function(t){for(var n,e,r,o=t.length,i=-1,a=0;++i<o;)a+=t[i].length;for(e=Array(a);0<=--o;)for(n=(r=t[o]).length;0<=--n;)e[--a]=r[n];return e};var Ci=Math.abs;vi.range=function(t,n,e){if(3>arguments.length&&(e=1,2>arguments.length&&(n=t,t=0)),(n-t)/e==1/0)throw new Error("infinite range");var r,o=[],i=d(Ci(e)),a=-1;if(t*=i,n*=i,0>(e*=i))for(;(r=t+e*++a)>n;)o.push(r/i);else for(;(r=t+e*++a)<n;)o.push(r/i);return o},vi.map=function(t,n){var e=new g;if(t instanceof g)t.forEach((function(t,n){e.set(t,n)}));else if(Array.isArray(t)){var r,o=-1,i=t.length;if(1===arguments.length)for(;++o<i;)e.set(o,t[o]);else for(;++o<i;)e.set(n.call(t,r=t[o],o),r)}else for(var a in t)e.set(a,t[a]);return e},p(g,{has:m,get:function(t){return this._[v(t)]},set:function(t,n){return this._[v(t)]=n},remove:x,keys:b,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:y(n),value:this._[n]});return t},size:M,empty:w,forEach:function(t){for(var n in this._)t.call(this,y(n),this._[n])}}),vi.nest=function(){function t(i,a,u){if(u>=o.length)return e?e.call(r,a):n?a.sort(n):a;for(var l,c,s,f,h=-1,d=a.length,p=o[u++],v=new g;++h<d;)(f=v.get(l=p(c=a[h])))?f.push(c):v.set(l,[c]);return i?(c=i(),s=function(n,e){c.set(n,t(i,e,u))}):(c={},s=function(n,e){c[n]=t(i,e,u)}),v.forEach(s),c}var n,e,r={},o=[],i=[];return r.map=function(n,e){return t(e,n,0)},r.entries=function(n){return function t(n,e){if(e>=o.length)return n;var r=[],a=i[e++];return n.forEach((function(n,o){r.push({key:n,values:t(o,e)})})),a?r.sort((function(t,n){return a(t.key,n.key)})):r}(t(vi.map,n,0),0)},r.key=function(t){return o.push(t),r},r.sortKeys=function(t){return i[o.length-1]=t,r},r.sortValues=function(t){return n=t,r},r.rollup=function(t){return e=t,r},r},vi.set=function(t){var n=new S;if(t)for(var e=0,r=t.length;e<r;++e)n.add(t[e]);return n},p(S,{has:m,add:function(t){return this._[v(t+="")]=!0,t},remove:x,values:b,size:M,empty:w,forEach:function(t){for(var n in this._)t.call(this,y(n))}}),vi.behavior={},vi.rebind=function(t,n){for(var e,r=1,o=arguments.length;++r<o;)t[e=arguments[r]]=k(t,n,n[e]);return t};var Ei=["webkit","ms","moz","Moz","o","O"];vi.dispatch=function(){for(var t=new L,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=A(t);return t},L.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(0<=e&&(r=t.slice(e+1),t=t.slice(0,e)),t)return 2>arguments.length?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},vi.event=null,vi.requote=function(t){return t.replace(Li,"\\$&")};var Li=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ai={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]},Ni=function(t,n){return n.querySelector(t)},Oi=function(t,n){return n.querySelectorAll(t)},Ti=function(t,n){var e=t.matches||t[C(t,"matchesSelector")];return(Ti=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(Ni=function(t,n){return Sizzle(t,n)[0]||null},Oi=Sizzle,Ti=Sizzle.matchesSelector),vi.selection=function(){return vi.select(xi.documentElement)};var Di=vi.selection.prototype=[];Di.select=function(t){var n,e,r,o,i=[];t=F(t);for(var a=-1,u=this.length;++a<u;){i.push(n=[]),n.parentNode=(r=this[a]).parentNode;for(var l=-1,c=r.length;++l<c;)(o=r[l])?(n.push(e=t.call(o,o.__data__,l,a)),e&&"__data__"in o&&(e.__data__=o.__data__)):n.push(null)}return D(i)},Di.selectAll=function(t){var n,e,r=[];t=z(t);for(var o=-1,i=this.length;++o<i;)for(var a=this[o],u=-1,l=a.length;++u<l;)(e=a[u])&&(r.push(n=mi(t.call(e,e.__data__,u,o))),n.parentNode=e);return D(r)};var Fi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};vi.ns={prefix:Fi,qualify:function(t){var n=t.indexOf(":"),e=t;return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Fi.hasOwnProperty(e)?{space:Fi[e],local:t}:t}},Di.attr=function(t,n){if(2>arguments.length){if("string"==typeof t){var e=this.node();return(t=vi.ns.qualify(t)).local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(P(n,t[n]));return this}return this.each(P(t,n))},Di.classed=function(t,n){if(2>arguments.length){if("string"==typeof t){var e=this.node(),r=(t=q(t)).length,o=-1;if(n=e.classList){for(;++o<r;)if(!n.contains(t[o]))return!1}else for(n=e.getAttribute("class");++o<r;)if(!I(t[o]).test(n))return!1;return!0}for(n in t)this.each(B(n,t[n]));return this}return this.each(B(t,n))},Di.style=function(t,n,e){var r=arguments.length;if(3>r){if("string"!=typeof t){for(e in 2>r&&(n=""),t)this.each(V(e,t[e],n));return this}if(2>r){var o=this.node();return u(o).getComputedStyle(o,null).getPropertyValue(t)}e=""}return this.each(V(t,n,e))},Di.property=function(t,n){if(2>arguments.length){if("string"==typeof t)return this.node()[t];for(n in t)this.each(U(n,t[n]));return this}return this.each(U(t,n))},Di.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Di.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Di.append=function(t){return t=W(t),this.select((function(){return this.appendChild(t.apply(this,arguments))}))},Di.insert=function(t,n){return t=W(t),n=F(n),this.select((function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)}))},Di.remove=function(){return this.each(H)},Di.data=function(t,n){function e(t,e){var r,o,i,a=t.length,s=e.length,f=Math.min(a,s),h=Array(s),d=Array(s),p=Array(a);if(n){var v,y=new g,m=Array(a);for(r=-1;++r<a;)(o=t[r])&&(y.has(v=n.call(o,o.__data__,r))?p[r]=o:y.set(v,o),m[r]=v);for(r=-1;++r<s;)(o=y.get(v=n.call(e,i=e[r],r)))?!0!==o&&(h[r]=o,o.__data__=i):d[r]=Y(i),y.set(v,!0);for(r=-1;++r<a;)r in m&&!0!==y.get(m[r])&&(p[r]=t[r])}else{for(r=-1;++r<f;)o=t[r],i=e[r],o?(o.__data__=i,h[r]=o):d[r]=Y(i);for(;r<s;++r)d[r]=Y(e[r]);for(;r<a;++r)p[r]=t[r]}d.update=h,d.parentNode=h.parentNode=p.parentNode=t.parentNode,u.push(d),l.push(h),c.push(p)}var r,o,i=-1,a=this.length;if(!arguments.length){for(t=Array(a=(r=this[0]).length);++i<a;)(o=r[i])&&(t[i]=o.__data__);return t}var u=$([]),l=D([]),c=D([]);if("function"==typeof t)for(;++i<a;)e(r=this[i],t.call(r,r.parentNode.__data__,i));else for(;++i<a;)e(r=this[i],t);return l.enter=function(){return u},l.exit=function(){return c},l},Di.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Di.filter=function(t){var n,e,r,o=[];"function"!=typeof t&&(t=Z(t));for(var i=0,a=this.length;i<a;i++){o.push(n=[]),n.parentNode=(e=this[i]).parentNode;for(var u=0,l=e.length;u<l;u++)(r=e[u])&&t.call(r,r.__data__,u,i)&&n.push(r)}return D(o)},Di.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],o=r.length-1,i=r[o];0<=--o;)(e=r[o])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},Di.sort=function(t){t=G.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},Di.each=function(t){return J(this,(function(n,e,r){t.call(n,n.__data__,e,r)}))},Di.call=function(t){var n=mi(arguments);return t.apply(n[0]=this,n),this},Di.empty=function(){return!this.node()},Di.node=function(){for(var t=0,n=this.length;t<n;t++)for(var e,r=this[t],o=0,i=r.length;o<i;o++)if(e=r[o])return e;return null},Di.size=function(){var t=0;return J(this,(function(){++t})),t};var zi=[];vi.selection.enter=$,vi.selection.enter.prototype=zi,zi.append=Di.append,zi.empty=Di.empty,zi.node=Di.node,zi.call=Di.call,zi.size=Di.size,zi.select=function(t){for(var n,e,r,o,i,a=[],u=-1,l=this.length;++u<l;){r=(o=this[u]).update,a.push(n=[]),n.parentNode=o.parentNode;for(var c=-1,s=o.length;++c<s;)(i=o[c])?(n.push(r[c]=e=t.call(o.parentNode,i.__data__,c,u)),e.__data__=i.__data__):n.push(null)}return D(a)},zi.insert=function(t,n){return 2>arguments.length&&(n=X(this)),Di.insert.call(this,t,n)},vi.select=function(t){var n;return"string"==typeof t?(n=[Ni(t,xi)]).parentNode=xi.documentElement:(n=[t]).parentNode=a(t),D([n])},vi.selectAll=function(t){var n;return"string"==typeof t?(n=mi(Oi(t,xi))).parentNode=xi.documentElement:(n=mi(t)).parentNode=null,D([n])},Di.on=function(t,n,e){var r=arguments.length;if(3>r){if("string"!=typeof t){for(e in 2>r&&(n=!1),t)this.each(K(e,t[e],n));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(K(t,n,e))};var Pi=vi.map({mouseenter:"mouseover",mouseleave:"mouseout"});xi&&Pi.forEach((function(t){"on"+t in xi&&Pi.remove(t)}));var Ri,Ii=0;vi.mouse=function(t){return et(t,O())};var qi=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;vi.touch=function(t,n,e){if(3>arguments.length&&(e=n,n=O().changedTouches),n)for(var r,o=0,i=n.length;o<i;++o)if((r=n[o]).identifier===e)return et(t,r)},vi.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",i)}function n(t,n,o,i,a){return function(){function u(){var t,e,r=n(h,g);r&&(t=r[0]-x[0],e=r[1]-x[1],p|=t|e,x=r,d({type:"drag",x:r[0]+c[0],y:r[1]+c[1],dx:t,dy:e}))}function l(){n(h,g)&&(y.on(i+v,null).on(a+v,null),m(p),d({type:"dragend"}))}var c,s=this,f=vi.event.target.correspondingElement||vi.event.target,h=s.parentNode,d=e.of(s,arguments),p=0,g=t(),v=".drag"+(null==g?"":"-"+g),y=vi.select(o(f)).on(i+v,u).on(a+v,l),m=nt(f),x=n(h,g);r?c=[(c=r.apply(s,arguments)).x-x[0],c.y-x[1]]:c=[0,0],d({type:"dragstart"})}}var e=T(t,"drag","dragstart","dragend"),r=null,o=n(E,vi.mouse,u,"mousemove","mouseup"),i=n(rt,vi.touch,_,"touchmove","touchend");return t.origin=function(n){return arguments.length?(r=n,t):r},vi.rebind(t,e,"on")},vi.touches=function(t,n){return 2>arguments.length&&(n=O().touches),n?mi(n).map((function(n){var e=et(t,n);return e.identifier=n.identifier,e})):[]};var Bi=1e-6,ji=Bi*Bi,Vi=Math.PI,Ui=2*Vi,Wi=Vi/2,Hi=Vi/180,Yi=180/Vi,Zi=Math.SQRT2;vi.interpolateZoom=function(t,n){var e,r,o=t[0],i=t[1],a=t[2],u=n[0],l=n[1],c=n[2],s=u-o,f=l-i,h=s*s+f*f;if(h<ji)r=Math.log(c/a)/Zi,e=function(t){return[o+t*s,i+t*f,a*Math.exp(Zi*t*r)]};else{var d=Math.sqrt(h),p=(c*c-a*a+4*h)/(2*a*2*d),g=(c*c-a*a-4*h)/(2*c*2*d),v=Math.log(Math.sqrt(p*p+1)-p),y=Math.log(Math.sqrt(g*g+1)-g);r=(y-v)/Zi,e=function(t){var n=t*r,e=lt(v),u=a/(2*d)*(e*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Zi*n+v)-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[o+u*s,i+u*f,a*e/lt(Zi*n+v)]}}return e.duration=1e3*r,e},vi.behavior.zoom=function(){function t(t){t.on("mousedown.zoom",s).on(Ji+".zoom",h).on("dblclick.zoom",d).on("touchstart.zoom",f)}function n(t){return[(t[0]-S.x)/S.k,(t[1]-S.y)/S.k]}function e(t){S.k=Math.max(k[0],Math.min(k[1],t))}function r(t,n){n=function(t){return[t[0]*S.k+S.x,t[1]*S.k+S.y]}(n),S.x+=t[0]-n[0],S.y+=t[1]-n[1]}function o(n,o,i,a){n.__chart__={x:S.x,y:S.y,k:S.k},e(Math.pow(2,a)),r(g=o,i),n=vi.select(n),0<C&&(n=n.transition().duration(C)),n.call(t.event)}function i(){b&&b.domain(x.range().map((function(t){return(t-S.x)/S.k})).map(x.invert)),w&&w.domain(M.range().map((function(t){return(t-S.y)/S.k})).map(M.invert))}function a(t){E++||t({type:"zoomstart"})}function l(t){i(),t({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function c(t){--E||(t({type:"zoomend"}),g=null)}function s(){function t(){s.on("mousemove.zoom",null).on("mouseup.zoom",null),h(i),c(o)}var e=this,o=L.of(e,arguments),i=0,s=vi.select(u(e)).on("mousemove.zoom",(function(){i=1,r(vi.mouse(e),f),l(o)})).on("mouseup.zoom",t),f=n(vi.mouse(e)),h=nt(e);Bu.call(e),a(o)}function f(){function t(){var t=vi.touches(p);return d=S.k,t.forEach((function(t){t.identifier in v&&(v[t.identifier]=n(t))})),t}function i(){var n=vi.event.target;vi.select(n).on(b,u).on(M,h),w.push(n);for(var e=vi.event.changedTouches,r=0,i=e.length;r<i;++r)v[e[r].identifier]=null;var a=t(),l=Date.now();if(1===a.length){if(500>l-m){var c=a[0];o(p,c,v[c.identifier],Math.floor(Math.log(S.k)/Math.LN2)+1),N()}m=l}else if(1<a.length){c=a[0];var s=a[1],f=c[0]-s[0],d=c[1]-s[1];y=f*f+d*d}}function u(){var t,n,o,i,a=vi.touches(p);Bu.call(p);for(var u=0,c=a.length;u<c;++u,i=null)if(o=a[u],i=v[o.identifier]){if(n)break;t=o,n=i}if(i){var s=(s=o[0]-t[0])*s+(s=o[1]-t[1])*s,f=y&&Math.sqrt(s/y);t=[(t[0]+o[0])/2,(t[1]+o[1])/2],n=[(n[0]+i[0])/2,(n[1]+i[1])/2],e(f*d)}m=null,r(t,n),l(g)}function h(){if(vi.event.touches.length){for(var n=vi.event.changedTouches,e=0,r=n.length;e<r;++e)delete v[n[e].identifier];for(var o in v)return void t()}vi.selectAll(w).on(x,null),_.on("mousedown.zoom",s).on("touchstart.zoom",f),k(),c(g)}var d,p=this,g=L.of(p,arguments),v={},y=0,x=".zoom-"+vi.event.changedTouches[0].identifier,b="touchmove"+x,M="touchend"+x,w=[],_=vi.select(p),k=nt(p);i(),a(g),_.on("mousedown.zoom",null).on("touchstart.zoom",i)}function h(){var t=L.of(this,arguments);y?clearTimeout(y):(Bu.call(this),p=n(g=v||vi.mouse(this)),a(t)),y=setTimeout((function(){y=null,c(t)}),50),N(),e(Math.pow(2,.002*Gi())*S.k),r(g,p),l(t)}function d(){var t=vi.mouse(this),e=Math.log(S.k)/Math.LN2;o(this,t,n(t),vi.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var p,g,v,y,m,x,b,M,w,S={x:0,y:0,k:1},_=[960,500],k=$i,C=250,E=0,L=T(t,"zoomstart","zoom","zoomend");return Ji||(Ji="onwheel"in xi?(Gi=function(){return-vi.event.deltaY*(vi.event.deltaMode?120:1)},"wheel"):"onmousewheel"in xi?(Gi=function(){return vi.event.wheelDelta},"mousewheel"):(Gi=function(){return-vi.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each((function(){var t=L.of(this,arguments),n=S;Iu?vi.select(this).transition().each("start.zoom",(function(){S=this.__chart__||{x:0,y:0,k:1},a(t)})).tween("zoom:zoom",(function(){var e=_[0],r=_[1],o=g?g[0]:e/2,i=g?g[1]:r/2,a=vi.interpolateZoom([(o-S.x)/S.k,(i-S.y)/S.k,e/S.k],[(o-n.x)/n.k,(i-n.y)/n.k,e/n.k]);return function(n){var r=a(n),u=e/r[2];this.__chart__=S={x:o-r[0]*u,y:i-r[1]*u,k:u},l(t)}})).each("interrupt.zoom",(function(){c(t)})).each("end.zoom",(function(){c(t)})):(this.__chart__=S,a(t),l(t),c(t))}))},t.translate=function(n){return arguments.length?(S={x:+n[0],y:+n[1],k:S.k},i(),t):[S.x,S.y]},t.scale=function(n){return arguments.length?(S={x:S.x,y:S.y,k:null},e(+n),i(),t):S.k},t.scaleExtent=function(n){return arguments.length?(k=null==n?$i:[+n[0],+n[1]],t):k},t.center=function(n){return arguments.length?(v=n&&[+n[0],+n[1]],t):v},t.size=function(n){return arguments.length?(_=n&&[+n[0],+n[1]],t):_},t.duration=function(n){return arguments.length?(C=+n,t):C},t.x=function(n){return arguments.length?(b=n,x=n.copy(),S={x:0,y:0,k:1},t):b},t.y=function(n){return arguments.length?(w=n,M=n.copy(),S={x:0,y:0,k:1},t):w},vi.rebind(t,L,"on")};var Gi,Ji,$i=[0,1/0];vi.color=st,st.prototype.toString=function(){return this.rgb()+""},vi.hsl=ft;var Xi=ft.prototype=new st;Xi.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ft(this.h,this.s,this.l/t)},Xi.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ft(this.h,this.s,t*this.l)},Xi.rgb=function(){return ht(this.h,this.s,this.l)},vi.hcl=dt;var Ki=dt.prototype=new st;Ki.brighter=function(t){return new dt(this.h,this.c,Math.min(100,this.l+Qi*(arguments.length?t:1)))},Ki.darker=function(t){return new dt(this.h,this.c,Math.max(0,this.l-Qi*(arguments.length?t:1)))},Ki.rgb=function(){return pt(this.h,this.c,this.l).rgb()},vi.lab=gt;var Qi=18,ta=.95047,na=1.08883,ea=gt.prototype=new st;ea.brighter=function(t){return new gt(Math.min(100,this.l+18*(arguments.length?t:1)),this.a,this.b)},ea.darker=function(t){return new gt(Math.max(0,this.l-18*(arguments.length?t:1)),this.a,this.b)},ea.rgb=function(){return vt(this.l,this.a,this.b)},vi.rgb=Mt;var ra=Mt.prototype=new st;ra.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,e=this.g,r=this.b;return n||e||r?(n&&30>n&&(n=30),e&&30>e&&(e=30),r&&30>r&&(r=30),new Mt(Math.min(255,n/t),Math.min(255,e/t),Math.min(255,r/t))):new Mt(30,30,30)},ra.darker=function(t){return new Mt((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},ra.hsl=function(){return Ct(this.r,this.g,this.b)},ra.toString=function(){return"#"+_t(this.r)+_t(this.g)+_t(this.b)};var oa=vi.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});oa.forEach((function(t,n){oa.set(t,wt(n))})),vi.functor=Nt,vi.xhr=Ot(_),vi.dsv=function(t,n){function e(t,e,i){3>arguments.length&&(i=e,e=null);var a=Tt(t,n,null==e?r:o(e),i);return a.row=function(t){return arguments.length?a.response(null==(e=t)?r:o(t)):e},a}function r(t){return e.parse(t.responseText)}function o(t){return function(n){return e.parse(n.responseText,t)}}function i(n){return n.map(a).join(t)}function a(t){return u.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var u=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return e.parse=function(t,n){var r;return e.parseRows(t,(function(t,e){if(r)return r(t,e-1);var o=new Function("d","return {"+t.map((function(t,n){return JSON.stringify(t)+": d["+n+"]"})).join(",")+"}");r=n?function(t,e){return n(o(t),e)}:o}))},e.parseRows=function(t,n){function e(){if(s>=c)return a;if(o)return o=!1,i;var n=s;if(34===t.charCodeAt(n)){for(var e=n;e++<c;)if(34===t.charCodeAt(e)){if(34!==t.charCodeAt(e+1))break;++e}return s=e+2,13===(r=t.charCodeAt(e+1))?(o=!0,10===t.charCodeAt(e+2)&&++s):10===r&&(o=!0),t.slice(n+1,e).replace(/""/g,'"')}for(;s<c;){var r,u=1;if(10===(r=t.charCodeAt(s++)))o=!0;else if(13===r)o=!0,10===t.charCodeAt(s)&&(++s,++u);else if(r!==l)continue;return t.slice(n,s-u)}return t.slice(n)}for(var r,o,i={},a={},u=[],c=t.length,s=0,f=0;(r=e())!==a;){for(var h=[];r!==i&&r!==a;)h.push(r),r=e();n&&null==(h=n(h,f++))||u.push(h)}return u},e.format=function(n){if(Array.isArray(n[0]))return e.formatRows(n);var r=new S,o=[];return n.forEach((function(t){for(var n in t)r.has(n)||o.push(r.add(n))})),[o.map(a).join(t)].concat(n.map((function(n){return o.map((function(t){return a(n[t])})).join(t)}))).join("\n")},e.formatRows=function(t){return t.map(i).join("\n")},e},vi.csv=vi.dsv(",","text/csv"),vi.tsv=vi.dsv("\t","text/tab-separated-values");var ia,aa,ua,la,ca=this[C(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};vi.timer=function(){Dt.apply(this,arguments)},vi.timer.flush=function(){zt(),Pt()},vi.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)};var sa=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map((function(t,n){var e=Math.pow(10,3*Ci(8-n));return{scale:8<n?function(t){return t/e}:function(t){return t*e},symbol:t}}));vi.formatPrefix=function(t,n){var e=0;return(t=+t)&&(0>t&&(t*=-1),n&&(t=vi.round(t,Rt(t,n))),e=1+Math.floor(1e-12+Math.log(t)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),sa[8+e/3]};var fa=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ha=vi.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=vi.round(t,Rt(t,n))).toFixed(Math.max(0,Math.min(20,Rt(t*(1+1e-15),n))))}}),da=vi.time={},pa=Date;Bt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ga.setUTCDate.apply(this._,arguments)},setDay:function(){ga.setUTCDay.apply(this._,arguments)},setFullYear:function(){ga.setUTCFullYear.apply(this._,arguments)},setHours:function(){ga.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ga.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ga.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ga.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ga.setUTCSeconds.apply(this._,arguments)},setTime:function(){ga.setTime.apply(this._,arguments)}};var ga=Date.prototype;da.year=jt((function(t){return(t=da.day(t)).setMonth(0,1),t}),(function(t,n){t.setFullYear(t.getFullYear()+n)}),(function(t){return t.getFullYear()})),da.years=da.year.range,da.years.utc=da.year.utc.range,da.day=jt((function(t){var n=new pa(2e3,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n}),(function(t,n){t.setDate(t.getDate()+n)}),(function(t){return t.getDate()-1})),da.days=da.day.range,da.days.utc=da.day.utc.range,da.dayOfYear=function(t){var n=da.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach((function(t,n){n=7-n;var e=da[t]=jt((function(t){return(t=da.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t}),(function(t,n){t.setDate(t.getDate()+7*Math.floor(n))}),(function(t){var e=da.year(t).getDay();return Math.floor((da.dayOfYear(t)+(e+n)%7)/7)-(e!==n)}));da[t+"s"]=e.range,da[t+"s"].utc=e.utc.range,da[t+"OfYear"]=function(t){var e=da.year(t).getDay();return Math.floor((da.dayOfYear(t)+(e+n)%7)/7)}})),da.week=da.sunday,da.weeks=da.sunday.range,da.weeks.utc=da.sunday.utc.range,da.weekOfYear=da.sundayOfYear;var va={"-":"",_:" ",0:"0"},ya=/^\s*\d+/,ma=/^%/;vi.locale=function(t){return{numberFormat:It(t),timeFormat:Ut(t)}};var xa=vi.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});vi.format=xa.numberFormat,vi.geo={},sn.prototype={s:0,t:0,add:function(t){fn(t,this.t,ba),fn(ba.s,this.s,this),this.s?this.t+=ba.t:this.s=ba.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ba=new sn;vi.geo.stream=function(t,n){t&&Ma.hasOwnProperty(t.type)?Ma[t.type](t,n):hn(t,n)};var Ma={Feature:function(t,n){hn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,o=e.length;++r<o;)hn(e[r].geometry,n)}},wa={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,o=e.length;++r<o;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){dn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,o=e.length;++r<o;)dn(e[r],n,0)},Polygon:function(t,n){pn(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,o=e.length;++r<o;)pn(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,o=e.length;++r<o;)hn(e[r],n)}};vi.geo.area=function(t){return Sa=0,vi.geo.stream(t,ka),Sa};var Sa,_a=new sn,ka={sphere:function(){Sa+=4*Vi},point:E,lineStart:E,lineEnd:E,polygonStart:function(){_a.reset(),ka.lineStart=gn},polygonEnd:function(){var t=2*_a;Sa+=0>t?4*Vi+t:t,ka.lineStart=ka.lineEnd=ka.point=E}};vi.geo.bounds=function(){function t(t,n){x.push(b=[s=t,h=t]),n<f&&(f=n),n>d&&(d=n)}function n(n,e){var r=vn([n*Hi,e*Hi]);if(y){var o=mn(y,r),i=mn([o[1],-o[0],0],o);Mn(i),i=wn(i);var a=n-p,l=0<a?1:-1,c=i[0]*Yi*l,g=180<Ci(a);if(g^(l*p<c&&c<l*n))(v=i[1]*Yi)>d&&(d=v);else if(g^(l*p<(c=(c+360)%360-180)&&c<l*n)){var v;(v=-i[1]*Yi)<f&&(f=v)}else e<f&&(f=e),e>d&&(d=e);g?n<p?u(s,n)>u(s,h)&&(h=n):u(n,h)>u(s,h)&&(s=n):h>=s?(n<s&&(s=n),n>h&&(h=n)):n>p?u(s,n)>u(s,h)&&(h=n):u(n,h)>u(s,h)&&(s=n)}else t(n,e);y=r,p=n}function e(){M.point=n}function r(){b[0]=s,b[1]=h,M.point=t,y=null}function o(t,e){if(y){var r=t-p;m+=180<Ci(r)?r+(0<r?360:-360):r}else g=t,v=e;ka.point(t,e),n(t,e)}function i(){ka.lineStart()}function a(){o(g,v),ka.lineEnd(),Ci(m)>Bi&&(s=-(h=180)),b[0]=s,b[1]=h,y=null}function u(t,n){return 0>(n-=t)?n+360:n}function l(t,n){return t[0]-n[0]}function c(t,n){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}var s,f,h,d,p,g,v,y,m,x,b,M={point:t,lineStart:e,lineEnd:r,polygonStart:function(){M.point=o,M.lineStart=i,M.lineEnd=a,m=0,ka.polygonStart()},polygonEnd:function(){ka.polygonEnd(),M.point=t,M.lineStart=e,M.lineEnd=r,0>_a?(s=-(h=180),f=-(d=90)):m>Bi?d=90:m<-Bi&&(f=-90),b[0]=s,b[1]=h}};return function(t){if(d=h=-(s=f=1/0),x=[],vi.geo.stream(t,M),r=x.length){x.sort(l);for(var n=1,e=[p=x[0]];n<r;++n)c((i=x[n])[0],p)||c(i[1],p)?(u(p[0],i[1])>u(p[0],p[1])&&(p[1]=i[1]),u(i[0],p[1])>u(p[0],p[1])&&(p[0]=i[0])):e.push(p=i);for(var r,o,i,a=-1/0,p=(n=0,e[r=e.length-1]);n<=r;p=i,++n)i=e[n],(o=u(p[1],i[0]))>a&&(a=o,s=i[0],h=p[1])}return x=b=null,s===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[s,f],[h,d]]}}(),vi.geo.centroid=function(t){Ca=Ea=La=Aa=Na=Oa=Ta=Da=Fa=za=Pa=0,vi.geo.stream(t,Ra);var n=Fa,e=za,r=Pa,o=n*n+e*e+r*r;return o<ji&&(n=Oa,e=Ta,r=Da,Ea<Bi&&(n=La,e=Aa,r=Na),(o=n*n+e*e+r*r)<ji)?[NaN,NaN]:[Math.atan2(e,n)*Yi,ut(r/Math.sqrt(o))*Yi]};var Ca,Ea,La,Aa,Na,Oa,Ta,Da,Fa,za,Pa,Ra={sphere:E,point:_n,lineStart:Cn,lineEnd:En,polygonStart:function(){Ra.lineStart=Ln},polygonEnd:function(){Ra.lineStart=Cn}},Ia=Fn(Nn,(function(t){var n,e=NaN,r=NaN,o=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(i,a){var u=0<i?Vi:-Vi,l=Ci(i-e);Ci(l-Vi)<Bi?(t.point(e,r=0<(r+a)/2?Wi:-Wi),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(i,r),n=0):o!==u&&l>=Vi&&(Ci(e-o)<Bi&&(e-=o*Bi),Ci(i-u)<Bi&&(i-=u*Bi),r=function(t,n,e,r){var o,i,a=Math.sin(t-e);return Ci(a)>Bi?Math.atan((Math.sin(n)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(o=Math.cos(n))*Math.sin(t))/(o*i*a)):(n+r)/2}(e,r,i,a),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=i,r=a),o=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}),(function(t,n,e,r){var o;if(null==t)o=e*Wi,r.point(-Vi,o),r.point(0,o),r.point(Vi,o),r.point(Vi,0),r.point(Vi,-o),r.point(0,-o),r.point(-Vi,-o),r.point(-Vi,0),r.point(-Vi,o);else if(Ci(t[0]-n[0])>Bi){var i=t[0]<n[0]?Vi:-Vi;o=e*i/2,r.point(-i,o),r.point(0,o),r.point(i,o)}else r.point(n[0],n[1])}),[-Vi,-Vi/2]);vi.geo.clipExtent=function(){var t,n,e,r,o,i,a={stream:function(t){return o&&(o.valid=!1),(o=i(t)).valid=!0,o},extent:function(u){return arguments.length?(i=jn(t=+u[0][0],n=+u[0][1],e=+u[1][0],r=+u[1][1]),o&&(o.valid=!1,o=null),a):[[t,n],[e,r]]}};return a.extent([[0,0],[960,500]])},(vi.geo.conicEqualArea=function(){return Vn(Un)}).raw=Un,vi.geo.albers=function(){return vi.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},vi.geo.albersUsa=function(){function t(t){var i=t[0],a=t[1];return n=null,e(i,a),n||(r(i,a),n)||o(i,a),n}var n,e,r,o,i=vi.geo.albers(),a=vi.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=vi.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){n=[t,e]}};return t.invert=function(t){var n=i.scale(),e=i.translate(),r=(t[0]-e[0])/n,o=(t[1]-e[1])/n;return(.12<=o&&.234>o&&-.425<=r&&-.214>r?a:.166<=o&&.234>o&&-.214<=r&&-.115>r?u:i).invert(t)},t.stream=function(t){var n=i.stream(t),e=a.stream(t),r=u.stream(t);return{point:function(t,o){n.point(t,o),e.point(t,o),r.point(t,o)},sphere:function(){n.sphere(),e.sphere(),r.sphere()},lineStart:function(){n.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},t.precision=function(n){return arguments.length?(i.precision(n),a.precision(n),u.precision(n),t):i.precision()},t.scale=function(n){return arguments.length?(i.scale(n),a.scale(.35*n),u.scale(n),t.translate(i.translate())):i.scale()},t.translate=function(n){if(!arguments.length)return i.translate();var c=i.scale(),s=+n[0],f=+n[1];return e=i.translate(n).clipExtent([[s-.455*c,f-.238*c],[s+.455*c,f+.238*c]]).stream(l).point,r=a.translate([s-.307*c,f+.201*c]).clipExtent([[s-.425*c+Bi,f+.12*c+Bi],[s-.214*c-Bi,f+.234*c-Bi]]).stream(l).point,o=u.translate([s-.205*c,f+.212*c]).clipExtent([[s-.214*c+Bi,f+.166*c+Bi],[s-.115*c-Bi,f+.234*c-Bi]]).stream(l).point,t},t.scale(1070)};var qa,Ba,ja,Va,Ua,Wa,Ha={point:E,lineStart:E,lineEnd:E,polygonStart:function(){Ba=0,Ha.lineStart=Wn},polygonEnd:function(){Ha.lineStart=Ha.lineEnd=Ha.point=E,qa+=Ci(Ba/2)}},Ya={point:function(t,n){t<ja&&(ja=t),t>Ua&&(Ua=t),n<Va&&(Va=n),n>Wa&&(Wa=n)},lineStart:E,lineEnd:E,polygonStart:E,polygonEnd:E},Za={point:Zn,lineStart:Gn,lineEnd:Jn,polygonStart:function(){Za.lineStart=$n},polygonEnd:function(){Za.point=Zn,Za.lineStart=Gn,Za.lineEnd=Jn}};vi.geo.path=function(){function t(t){return t&&("function"==typeof u&&i.pointRadius(+u.apply(this,arguments)),(!a||!a.valid)&&(a=o(i)),vi.geo.stream(t,a)),i.result()}function n(){return a=null,t}var e,r,o,i,a,u=4.5;return t.area=function(t){return qa=0,vi.geo.stream(t,o(Ha)),qa},t.centroid=function(t){return La=Aa=Na=Oa=Ta=Da=Fa=za=Pa=0,vi.geo.stream(t,o(Za)),Pa?[Fa/Pa,za/Pa]:Da?[Oa/Da,Ta/Da]:Na?[La/Na,Aa/Na]:[NaN,NaN]},t.bounds=function(t){return Ua=Wa=-(ja=Va=1/0),vi.geo.stream(t,o(Ya)),[[ja,Va],[Ua,Wa]]},t.projection=function(t){return arguments.length?(o=(e=t)?t.stream||Qn(t):_,n()):e},t.context=function(t){return arguments.length?(i=null==(r=t)?new Hn:new Xn(t),"function"!=typeof u&&i.pointRadius(u),n()):r},t.pointRadius=function(n){return arguments.length?(u="function"==typeof n?n:(i.pointRadius(+n),+n),t):u},t.projection(vi.geo.albersUsa()).context(null)},vi.geo.transform=function(t){return{stream:function(n){var e=new te(n);for(var r in t)e[r]=t[r];return e}}},te.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},vi.geo.projection=ee,vi.geo.projectionMutator=re,(vi.geo.equirectangular=function(){return ee(ie)}).raw=ie.invert=ie,vi.geo.rotation=function(t){function n(n){return(n=t(n[0]*Hi,n[1]*Hi))[0]*=Yi,n[1]*=Yi,n}return t=ue(t[0]%360*Hi,t[1]*Hi,2<t.length?t[2]*Hi:0),n.invert=function(n){return(n=t.invert(n[0]*Hi,n[1]*Hi))[0]*=Yi,n[1]*=Yi,n},n},ae.invert=ie,vi.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,n=ue(-t[0]*Hi,-t[1]*Hi,0).invert,o=[];return e(null,null,1,{point:function(t,e){o.push(t=n(t,e)),t[0]*=Yi,t[1]*=Yi}}),{type:"Polygon",coordinates:[o]}}var n,e,r=[0,0],o=6;return t.origin=function(n){return arguments.length?(r=n,t):r},t.angle=function(r){return arguments.length?(e=fe((n=+r)*Hi,o*Hi),t):n},t.precision=function(r){return arguments.length?(e=fe(n*Hi,(o=+r)*Hi),t):o},t.angle(90)},vi.geo.distance=function(t,n){var e,r=(n[0]-t[0])*Hi,o=t[1]*Hi,i=n[1]*Hi,a=Math.sin(r),u=Math.cos(r),l=Math.sin(o),c=Math.cos(o),s=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((e=f*a)*e+(e=c*s-l*f*u)*e),l*s+c*f*u)},vi.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return vi.range(Math.ceil(i/v)*v,o,v).map(h).concat(vi.range(Math.ceil(c/y)*y,l,y).map(d)).concat(vi.range(Math.ceil(r/p)*p,e,p).filter((function(t){return Ci(t%v)>Bi})).map(s)).concat(vi.range(Math.ceil(u/g)*g,a,g).filter((function(t){return Ci(t%y)>Bi})).map(f))}var e,r,o,i,a,u,l,c,s,f,h,d,p=10,g=p,v=90,y=360,m=2.5;return t.lines=function(){return n().map((function(t){return{type:"LineString",coordinates:t}}))},t.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(d(l).slice(1),h(o).reverse().slice(1),d(c).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.majorExtent(n).minorExtent(n):t.minorExtent()},t.majorExtent=function(n){return arguments.length?(i=+n[0][0],o=+n[1][0],c=+n[0][1],l=+n[1][1],i>o&&(n=i,i=o,o=n),c>l&&(n=c,c=l,l=n),t.precision(m)):[[i,c],[o,l]]},t.minorExtent=function(n){return arguments.length?(r=+n[0][0],e=+n[1][0],u=+n[0][1],a=+n[1][1],r>e&&(n=r,r=e,e=n),u>a&&(n=u,u=a,a=n),t.precision(m)):[[r,u],[e,a]]},t.step=function(n){return arguments.length?t.majorStep(n).minorStep(n):t.minorStep()},t.majorStep=function(n){return arguments.length?(v=+n[0],y=+n[1],t):[v,y]},t.minorStep=function(n){return arguments.length?(p=+n[0],g=+n[1],t):[p,g]},t.precision=function(n){return arguments.length?(m=+n,s=de(u,a,90),f=pe(r,e,m),h=de(c,l,90),d=pe(i,o,m),t):m},t.majorExtent([[-180,-90+Bi],[180,90-Bi]]).minorExtent([[-180,-80-Bi],[180,80+Bi]])},vi.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[n||r.apply(this,arguments),e||o.apply(this,arguments)]}}var n,e,r=ge,o=ve;return t.distance=function(){return vi.geo.distance(n||r.apply(this,arguments),e||o.apply(this,arguments))},t.source=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.target=function(n){return arguments.length?(o=n,e="function"==typeof n?null:n,t):o},t.precision=function(){return arguments.length?t:0},t},vi.geo.interpolate=function(t,n){return function(t,n,e,r){var o=Math.cos(n),i=Math.sin(n),a=Math.cos(r),u=Math.sin(r),l=o*Math.cos(t),c=o*Math.sin(t),s=a*Math.cos(e),f=a*Math.sin(e),h=2*Math.asin(Math.sqrt(ct(r-n)+o*a*ct(e-t))),d=1/Math.sin(h),p=h?function(t){var n=Math.sin(t*=h)*d,e=Math.sin(h-t)*d,r=e*l+n*s,o=e*c+n*f;return[Math.atan2(o,r)*Yi,Math.atan2(e*i+n*u,Math.sqrt(r*r+o*o))*Yi]}:function(){return[t*Yi,n*Yi]};return p.distance=h,p}(t[0]*Hi,t[1]*Hi,n[0]*Hi,n[1]*Hi)},vi.geo.length=function(t){return Ga=0,vi.geo.stream(t,Ja),Ga};var Ga,Ja={sphere:E,point:E,lineStart:function(){function t(t,o){var i=Math.sin(o*=Hi),a=Math.cos(o),u=Ci((t*=Hi)-n),l=Math.cos(u);Ga+=Math.atan2(Math.sqrt((u=a*Math.sin(u))*u+(u=r*i-e*a*l)*u),e*i+r*a*l),n=t,e=i,r=a}var n,e,r;Ja.point=function(o,i){n=o*Hi,e=Math.sin(i*=Hi),r=Math.cos(i),Ja.point=t},Ja.lineEnd=function(){Ja.point=Ja.lineEnd=E}},lineEnd:E,polygonStart:E,polygonEnd:E},$a=ye((function(t){return Math.sqrt(2/(1+t))}),(function(t){return 2*Math.asin(t/2)}));(vi.geo.azimuthalEqualArea=function(){return ee($a)}).raw=$a;var Xa=ye((function(t){var n=Math.acos(t);return n&&n/Math.sin(n)}),_);(vi.geo.azimuthalEquidistant=function(){return ee(Xa)}).raw=Xa,(vi.geo.conicConformal=function(){return Vn(me)}).raw=me,(vi.geo.conicEquidistant=function(){return Vn(xe)}).raw=xe;var Ka=ye((function(t){return 1/t}),Math.atan);(vi.geo.gnomonic=function(){return ee(Ka)}).raw=Ka,be.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-Wi]},(vi.geo.mercator=function(){return Me(be)}).raw=be;var Qa=ye((function(){return 1}),Math.asin);(vi.geo.orthographic=function(){return ee(Qa)}).raw=Qa;var tu=ye((function(t){return 1/(1+t)}),(function(t){return 2*Math.atan(t)}));(vi.geo.stereographic=function(){return ee(tu)}).raw=tu,we.invert=function(t,n){return[-n,2*Math.atan(Math.exp(t))-Wi]},(vi.geo.transverseMercator=function(){var t=Me(we),n=t.center,e=t.rotate;return t.center=function(t){return t?n([-t[1],t[0]]):[(t=n())[1],-t[0]]},t.rotate=function(t){return t?e([t[0],t[1],2<t.length?t[2]+90:90]):[(t=e())[0],t[1],t[2]-90]},e([0,0,90])}).raw=we,vi.geom={},vi.geom.hull=function(t){function n(t){if(3>t.length)return[];var n,o=Nt(e),i=Nt(r),a=t.length,u=[],l=[];for(n=0;n<a;n++)u.push([+o.call(this,t[n],n),+i.call(this,t[n],n),n]);for(u.sort(Ce),n=0;n<a;n++)l.push([u[n][0],-u[n][1]]);var c=ke(u),s=ke(l),f=s[0]===c[0],h=s[s.length-1]===c[c.length-1],d=[];for(n=c.length-1;0<=n;--n)d.push(t[u[c[n]][2]]);for(n=+f;n<s.length-h;++n)d.push(t[u[s[n]][2]]);return d}var e=Se,r=_e;return arguments.length?n(t):(n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n)},vi.geom.polygon=function(t){return Ai(t,nu),t};var nu=vi.geom.polygon.prototype=[];nu.area=function(){for(var t,n=-1,e=this.length,r=this[e-1],o=0;++n<e;)t=r,r=this[n],o+=t[1]*r[0]-t[0]*r[1];return.5*o},nu.centroid=function(t){var n,e,r=-1,o=this.length,i=0,a=0,u=this[o-1];for(arguments.length||(t=-1/(6*this.area()));++r<o;)n=u,u=this[r],e=n[0]*u[1]-u[0]*n[1],i+=(n[0]+u[0])*e,a+=(n[1]+u[1])*e;return[i*t,a*t]},nu.clip=function(t){for(var n,e,r,o,i,a,u=Ae(t),l=-1,c=this.length-Ae(this),s=this[c-1];++l<c;){for(n=t.slice(),t.length=0,o=this[l],i=n[(r=n.length-u)-1],e=-1;++e<r;)Ee(a=n[e],s,o)?(!Ee(i,s,o)&&t.push(Le(i,a,s,o)),t.push(a)):Ee(i,s,o)&&t.push(Le(i,a,s,o)),i=a;u&&t.push(t[0]),s=o}return t};var eu,ru,ou,iu,au,uu=[],lu=[];Re.prototype.prepare=function(){for(var t,n=this.edges,e=n.length;e--;)(t=n[e].edge).b&&t.a||n.splice(e,1);return n.sort(Ie),n.length},Ze.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ge.prototype={insert:function(t,n){var e,r,o;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=Ke(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)e===(r=e.U).L?(o=r.R)&&o.C?(e.C=o.C=!1,r.C=!0,t=r):(t===e.R&&($e(this,e),e=(t=e).U),e.C=!1,r.C=!0,Xe(this,r)):(o=r.L)&&o.C?(e.C=o.C=!1,r.C=!0,t=r):(t===e.L&&(Xe(this,e),e=(t=e).U),e.C=!1,r.C=!0,$e(this,r)),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,o=t.U,i=t.L,a=t.R;if(e=i?a?Ke(a):i:a,o?o.L===t?o.L=e:o.R=e:this._=e,i&&a?(r=e.C,e.C=t.C,e.L=i,i.U=e,e===a?(e.U=o,o=e,t=e.R):(o=e.U,e.U=t.U,t=e.R,o.L=t,e.R=a,a.U=e)):(r=t.C,t=e),t&&(t.U=o),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===o.L){if((n=o.R).C&&(n.C=!1,o.C=!0,$e(this,o),n=o.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,Xe(this,n),n=o.R),n.C=o.C,o.C=n.R.C=!1,$e(this,o),t=this._;break}}else if((n=o.L).C&&(n.C=!1,o.C=!0,Xe(this,o),n=o.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,$e(this,n),n=o.L),n.C=o.C,o.C=n.L.C=!1,Xe(this,o),t=this._;break}n.C=!0,t=o,o=o.U}while(!t.C);t&&(t.C=!1)}}},vi.geom.voronoi=function(t){function n(t){var n=Array(t.length),r=u[0][0],o=u[0][1],i=u[1][0],a=u[1][1];return Qe(e(t),u).cells.forEach((function(e,u){var l=e.edges,c=e.site;(n[u]=l.length?l.map((function(t){var n=t.start();return[n.x,n.y]})):c.x>=r&&c.x<=i&&c.y>=o&&c.y<=a?[[r,a],[i,a],[i,o],[r,o]]:[]).point=t[u]})),n}function e(t){return t.map((function(t,n){return{x:Math.round(i(t,n)/Bi)*Bi,y:Math.round(a(t,n)/Bi)*Bi,i:n}}))}var r=Se,o=_e,i=r,a=o,u=cu;return t?n(t):(n.links=function(t){return Qe(e(t)).edges.filter((function(t){return t.l&&t.r})).map((function(n){return{source:t[n.l.i],target:t[n.r.i]}}))},n.triangles=function(t){var n=[];return Qe(e(t)).cells.forEach((function(e,r){for(var o,i=e.site,a=e.edges.sort(Ie),u=-1,l=a.length,c=a[l-1].edge,s=c.l===i?c.r:c.l;++u<l;)c,o=s,s=(c=a[u].edge).l===i?c.r:c.l,r<o.i&&r<s.i&&0>nr(i,o,s)&&n.push([t[r],t[o.i],t[s.i]])})),n},n.x=function(t){return arguments.length?(i=Nt(r=t),n):r},n.y=function(t){return arguments.length?(a=Nt(o=t),n):o},n.clipExtent=function(t){return arguments.length?(u=null==t?cu:t,n):u===cu?null:u},n.size=function(t){return arguments.length?n.clipExtent(t&&[[0,0],t]):u===cu?null:u&&u[1]},n)};var cu=[[-1e6,-1e6],[1e6,1e6]];vi.geom.delaunay=function(t){return vi.geom.voronoi().triangles(t)},vi.geom.quadtree=function(t,n,e,r,o){function i(t){function i(t,n,e,r,o,i,a,u){if(!isNaN(e)&&!isNaN(r))if(t.leaf){var l=t.x,s=t.y;if(null==l)t.x=e,t.y=r,t.point=n;else if(.01>Ci(l-e)+Ci(s-r))c(t,n,e,r,o,i,a,u);else{var f=t.point;t.x=t.y=t.point=null,c(t,f,l,s,o,i,a,u),c(t,n,e,r,o,i,a,u)}}else c(t,n,e,r,o,i,a,u)}function c(t,n,e,r,o,a,u,l){var c=.5*(o+u),s=.5*(a+l),f=e>=c,h=r>=s,d=h<<1|f;t.leaf=!1,f?o=c:u=c,h?a=s:l=s,i(t=t.nodes[d]||(t.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null}),n,e,r,o,a,u,l)}var s,f,h,d,p,g,v,y,m,x=Nt(u),b=Nt(l);if(null!=n)g=n,v=e,y=r,m=o;else if(y=m=-(g=v=1/0),f=[],h=[],p=t.length,a)for(d=0;d<p;++d)(s=t[d]).x<g&&(g=s.x),s.y<v&&(v=s.y),s.x>y&&(y=s.x),s.y>m&&(m=s.y),f.push(s.x),h.push(s.y);else for(d=0;d<p;++d){var M=+x(s=t[d],d),w=+b(s,d);M<g&&(g=M),w<v&&(v=w),M>y&&(y=M),w>m&&(m=w),f.push(M),h.push(w)}var S=y-g,_=m-v;S>_?m=v+S:y=g+_;var k={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){i(k,t,+x(t,++d),+b(t,d),g,v,y,m)},visit:function(t){or(t,k,g,v,y,m)},find:function(t){return ir(k,t[0],t[1],g,v,y,m)}};if(d=-1,null==n){for(;++d<p;)i(k,t[d],f[d],h[d],g,v,y,m);--d}else t.forEach(k.add);return f=h=t=s=null,k}var a,u=Se,l=_e;return(a=arguments.length)?(u=er,l=rr,3===a&&(o=e,r=n,e=n=0),i(t)):(i.x=function(t){return arguments.length?(u=t,i):u},i.y=function(t){return arguments.length?(l=t,i):l},i.extent=function(t){return arguments.length?(null==t?n=e=r=o=null:(n=+t[0][0],e=+t[0][1],r=+t[1][0],o=+t[1][1]),i):null==n?null:[[n,e],[r,o]]},i.size=function(t){return arguments.length?(null==t?n=e=r=o=null:(n=e=0,r=+t[0],o=+t[1]),i):null==n?null:[r-n,o-e]},i)},vi.interpolateRgb=ar,vi.interpolateObject=ur,vi.interpolateNumber=lr,vi.interpolateString=cr;var su=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fu=new RegExp(su.source,"g");vi.interpolate=sr,vi.interpolators=[function(t,n){var e=i(n);return("string"===e?oa.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?ar:cr:n instanceof st?ar:Array.isArray(n)?fr:"object"===e&&isNaN(n)?ur:lr)(t,n)}],vi.interpolateArray=fr;var hu=function(){return _},du=vi.map({linear:hu,poly:function(t){return function(n){return Math.pow(n,t)}},quad:function(){return gr},cubic:function(){return vr},sin:function(){return mr},exp:function(){return xr},circle:function(){return br},elastic:function(t,n){var e;return 2>arguments.length&&(n=.45),arguments.length?e=n/Ui*Math.asin(1/t):(t=1,e=n/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-e)*Ui/n)}},back:function(t){return t||(t=1.70158),function(n){return n*n*((t+1)*n-t)}},bounce:function(){return Mr}}),pu=vi.map({in:_,out:dr,"in-out":pr,"out-in":function(t){return pr(dr(t))}});vi.ease=function(t){var n=t.indexOf("-"),e=0<=n?t.slice(0,n):t,r=0<=n?t.slice(n+1):"in";return e=du.get(e)||hu,hr((r=pu.get(r)||_)(e.apply(null,yi.call(arguments,1))))},vi.interpolateHcl=function(t,n){t=vi.hcl(t),n=vi.hcl(n);var e=t.h,r=t.c,o=t.l,i=n.h-e,a=n.c-r,u=n.l-o;return isNaN(a)&&(a=0,r=isNaN(r)?n.c:r),isNaN(i)?(i=0,e=isNaN(e)?n.h:e):180<i?i-=360:-180>i&&(i+=360),function(t){return pt(e+i*t,r+a*t,o+u*t)+""}},vi.interpolateHsl=function(t,n){t=vi.hsl(t),n=vi.hsl(n);var e=t.h,r=t.s,o=t.l,i=n.h-e,a=n.s-r,u=n.l-o;return isNaN(a)&&(a=0,r=isNaN(r)?n.s:r),isNaN(i)?(i=0,e=isNaN(e)?n.h:e):180<i?i-=360:-180>i&&(i+=360),function(t){return ht(e+i*t,r+a*t,o+u*t)+""}},vi.interpolateLab=function(t,n){t=vi.lab(t),n=vi.lab(n);var e=t.l,r=t.a,o=t.b,i=n.l-e,a=n.a-r,u=n.b-o;return function(t){return vt(e+i*t,r+a*t,o+u*t)+""}},vi.interpolateRound=wr,vi.transform=function(t){var n=xi.createElementNS(vi.ns.prefix.svg,"g");return(vi.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new Sr(e?e.matrix:gu)})(t)},Sr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var gu={a:1,b:0,c:0,d:1,e:0,f:0};vi.interpolateTransform=Er,vi.layout={},vi.layout.bundle=function(){return function(t){for(var n=[],e=-1,r=t.length;++e<r;)n.push(Nr(t[e]));return n}},vi.layout.chord=function(){function t(){var t,c,f,h,d,p={},g=[],v=vi.range(i),y=[];for(e=[],r=[],t=0,h=-1;++h<i;){for(c=0,d=-1;++d<i;)c+=o[h][d];g.push(c),y.push(vi.range(i)),t+=c}for(a&&v.sort((function(t,n){return a(g[t],g[n])})),u&&y.forEach((function(t,n){t.sort((function(t,e){return u(o[n][t],o[n][e])}))})),t=(Ui-s*i)/t,c=0,h=-1;++h<i;){for(f=c,d=-1;++d<i;){var m=v[h],x=y[m][d],b=o[m][x],M=c,w=c+=b*t;p[m+"-"+x]={index:m,subindex:x,startAngle:M,endAngle:w,value:b}}r[m]={index:m,startAngle:f,endAngle:c,value:g[m]},c+=s}for(h=-1;++h<i;)for(d=h-1;++d<i;){var S=p[h+"-"+d],_=p[d+"-"+h];(S.value||_.value)&&e.push(S.value<_.value?{source:_,target:S}:{source:S,target:_})}l&&n()}function n(){e.sort((function(t,n){return l((t.source.value+t.target.value)/2,(n.source.value+n.target.value)/2)}))}var e,r,o,i,a,u,l,c={},s=0;return c.matrix=function(t){return arguments.length?(i=(o=t)&&o.length,e=r=null,c):o},c.padding=function(t){return arguments.length?(s=t,e=r=null,c):s},c.sortGroups=function(t){return arguments.length?(a=t,e=r=null,c):a},c.sortSubgroups=function(t){return arguments.length?(u=t,e=null,c):u},c.sortChords=function(t){return arguments.length?(l=t,e&&n(),c):l},c.chords=function(){return e||t(),e},c.groups=function(){return r||t(),r},c},vi.layout.force=function(){function t(t){return function(n,e,r,o){if(n.point!==t){var i=n.cx-t.x,a=n.cy-t.y,u=o-e,l=i*i+a*a;if(u*u/y<l){if(l<g){var c=n.charge/l;t.px-=i*c,t.py-=a*c}return!0}if(n.point&&l&&l<g){c=n.pointCharge/l;t.px-=i*c,t.py-=a*c}}return!n.charge}}function n(t){t.px=vi.event.x,t.py=vi.event.y,l.resume()}var e,r,o,i,a,u,l={},c=vi.dispatch("start","tick","end"),s=[1,1],f=.9,h=vu,d=yu,p=-30,g=mu,v=.1,y=.64,m=[],x=[];return l.tick=function(){if(.005>(o*=.99))return e=null,c.end({type:"end",alpha:o=0}),!0;var n,r,l,h,d,g,y,b,M,w=m.length,S=x.length;for(r=0;r<S;++r)h=(l=x[r]).source,(g=(b=(d=l.target).x-h.x)*b+(M=d.y-h.y)*M)&&(b*=g=o*a[r]*((g=Math.sqrt(g))-i[r])/g,M*=g,d.x-=b*(y=h.weight+d.weight?h.weight/(h.weight+d.weight):.5),d.y-=M*y,h.x+=b*(y=1-y),h.y+=M*y);if((y=o*v)&&(b=s[0]/2,M=s[1]/2,r=-1,y))for(;++r<w;)(l=m[r]).x+=(b-l.x)*y,l.y+=(M-l.y)*y;if(p)for(function t(n,e,r){var o=0,i=0;if(n.charge=0,!n.leaf)for(var a,u=n.nodes,l=u.length,c=-1;++c<l;)null==(a=u[c])||(t(a,e,r),n.charge+=a.charge,o+=a.charge*a.cx,i+=a.charge*a.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var s=e*r[n.point.index];n.charge+=n.pointCharge=s,o+=s*n.point.x,i+=s*n.point.y}n.cx=o/n.charge,n.cy=i/n.charge}(n=vi.geom.quadtree(m),o,u),r=-1;++r<w;)(l=m[r]).fixed||n.visit(t(l));for(r=-1;++r<w;)(l=m[r]).fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*f,l.y-=(l.py-(l.py=l.y))*f);c.tick({type:"tick",alpha:o})},l.nodes=function(t){return arguments.length?(m=t,l):m},l.links=function(t){return arguments.length?(x=t,l):x},l.size=function(t){return arguments.length?(s=t,l):s},l.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,l):h},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,l):d},l.friction=function(t){return arguments.length?(f=+t,l):f},l.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,l):p},l.chargeDistance=function(t){return arguments.length?(g=t*t,l):Math.sqrt(g)},l.gravity=function(t){return arguments.length?(v=+t,l):v},l.theta=function(t){return arguments.length?(y=t*t,l):Math.sqrt(y)},l.alpha=function(t){return arguments.length?(t=+t,o?0<t?o=t:(e.c=null,e.t=NaN,e=null,c.end({type:"end",alpha:o=0})):0<t&&(c.start({type:"start",alpha:o=t}),e=Dt(l.tick)),l):o},l.start=function(){function t(t,r){if(!e){for(e=Array(o),l=0;l<o;++l)e[l]=[];for(l=0;l<c;++l){var i=x[l];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var a,u=e[n],l=-1,s=u.length;++l<s;)if(!isNaN(a=u[l][t]))return a;return Math.random()*r}var n,e,r,o=m.length,c=x.length,f=s[0],g=s[1];for(n=0;n<o;++n)(r=m[n]).index=n,r.weight=0;for(n=0;n<c;++n)"number"==typeof(r=x[n]).source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(n=0;n<o;++n)r=m[n],isNaN(r.x)&&(r.x=t("x",f)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof h)for(n=0;n<c;++n)i[n]=+h.call(this,x[n],n);else for(n=0;n<c;++n)i[n]=h;if(a=[],"function"==typeof d)for(n=0;n<c;++n)a[n]=+d.call(this,x[n],n);else for(n=0;n<c;++n)a[n]=d;if(u=[],"function"==typeof p)for(n=0;n<o;++n)u[n]=+p.call(this,m[n],n);else for(n=0;n<o;++n)u[n]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return r||(r=vi.behavior.drag().origin(_).on("dragstart.force",Tr).on("drag.force",n).on("dragend.force",Dr)),arguments.length?void this.on("mouseover.force",Fr).on("mouseout.force",zr).call(r):r},vi.rebind(l,c,"on")};var vu=20,yu=1,mu=1/0;vi.layout.hierarchy=function(){function t(o){var i,a=[o],u=[];for(o.depth=0;null!=(i=a.pop());)if(u.push(i),(c=e.call(t,i,i.depth))&&(l=c.length)){for(var l,c,s;0<=--l;)a.push(s=c[l]),s.parent=i,s.depth=i.depth+1;r&&(i.value=0),i.children=c}else r&&(i.value=+r.call(t,i,i.depth)||0),delete i.children;return Ir(o,(function(t){var e,o;n&&(e=t.children)&&e.sort(n),r&&(o=t.parent)&&(o.value+=t.value)})),u}var n=jr,e=qr,r=Br;return t.sort=function(e){return arguments.length?(n=e,t):n},t.children=function(n){return arguments.length?(e=n,t):e},t.value=function(n){return arguments.length?(r=n,t):r},t.revalue=function(n){return r&&(Rr(n,(function(t){t.children&&(t.value=0)})),Ir(n,(function(n){var e;n.children||(n.value=+r.call(t,n,n.depth)||0),(e=n.parent)&&(e.value+=n.value)}))),n},t},vi.layout.partition=function(){function t(t,r){var o=n.call(this,t,r);return function t(n,e,r,o){var i=n.children;if(n.x=e,n.y=n.depth*o,n.dx=r,n.dy=o,i&&(a=i.length)){var a,u,l,c=-1;for(r=n.value?r/n.value:0;++c<a;)t(u=i[c],e,l=u.value*r,o),e+=l}}(o[0],0,e[0],e[1]/function t(n){var e=n.children,r=0;if(e&&(o=e.length))for(var o,i=-1;++i<o;)r=Math.max(r,t(e[i]));return 1+r}(o[0])),o}var n=vi.layout.hierarchy(),e=[1,1];return t.size=function(n){return arguments.length?(e=n,t):e},Pr(t,n)},vi.layout.pie=function(){function t(a){var u,l=a.length,c=a.map((function(e,r){return+n.call(t,e,r)})),s=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof o?o.apply(this,arguments):o)-s,h=Math.min(Math.abs(f)/l,+("function"==typeof i?i.apply(this,arguments):i)),d=h*(0>f?-1:1),p=vi.sum(c),g=p?(f-l*d)/p:0,v=vi.range(l),y=[];return null!=e&&v.sort(e===xu?function(t,n){return c[n]-c[t]}:function(t,n){return e(a[t],a[n])}),v.forEach((function(t){y[t]={data:a[t],value:u=c[t],startAngle:s,endAngle:s+=u*g+d,padAngle:h}})),y}var n=Number,e=xu,r=0,o=Ui,i=0;return t.value=function(e){return arguments.length?(n=e,t):n},t.sort=function(n){return arguments.length?(e=n,t):e},t.startAngle=function(n){return arguments.length?(r=n,t):r},t.endAngle=function(n){return arguments.length?(o=n,t):o},t.padAngle=function(n){return arguments.length?(i=n,t):i},t};var xu={};vi.layout.stack=function(){function t(u,l){if(!(h=u.length))return u;var c=u.map((function(e,r){return n.call(t,e,r)})),s=c.map((function(n){return n.map((function(n,e){return[i.call(t,n,e),a.call(t,n,e)]}))})),f=e.call(t,s,l);c=vi.permute(c,f),s=vi.permute(s,f);var h,d,p,g,v=r.call(t,s,l),y=c[0].length;for(p=0;p<y;++p)for(o.call(t,c[0][p],g=v[p],s[0][p][1]),d=1;d<h;++d)o.call(t,c[d][p],g+=s[d-1][p][1],s[d][p][1]);return u}var n=_,e=Yr,r=Zr,o=Hr,i=Ur,a=Wr;return t.values=function(e){return arguments.length?(n=e,t):n},t.order=function(n){return arguments.length?(e="function"==typeof n?n:bu.get(n)||Yr,t):e},t.offset=function(n){return arguments.length?(r="function"==typeof n?n:Mu.get(n)||Zr,t):r},t.x=function(n){return arguments.length?(i=n,t):i},t.y=function(n){return arguments.length?(a=n,t):a},t.out=function(n){return arguments.length?(o=n,t):o},t};var bu=vi.map({"inside-out":function(t){var n,e,r=t.length,o=t.map(Gr),i=t.map(Jr),a=vi.range(r).sort((function(t,n){return o[t]-o[n]})),u=0,l=0,c=[],s=[];for(n=0;n<r;++n)e=a[n],u<l?(u+=i[e],c.push(e)):(l+=i[e],s.push(e));return s.reverse().concat(c)},reverse:function(t){return vi.range(t.length).reverse()},default:Yr}),Mu=vi.map({silhouette:function(t){var n,e,r,o=t.length,i=t[0].length,a=[],u=0,l=[];for(e=0;e<i;++e){for(n=0,r=0;n<o;n++)r+=t[n][e][1];r>u&&(u=r),a.push(r)}for(e=0;e<i;++e)l[e]=(u-a[e])/2;return l},wiggle:function(t){var n,e,r,o,i,a,u,l,c,s=t.length,f=t[0],h=f.length,d=[];for(d[0]=l=c=0,e=1;e<h;++e){for(n=0,o=0;n<s;++n)o+=t[n][e][1];for(n=0,i=0,u=f[e][0]-f[e-1][0];n<s;++n){for(r=0,a=(t[n][e][1]-t[n][e-1][1])/(2*u);r<n;++r)a+=(t[r][e][1]-t[r][e-1][1])/u;i+=a*t[n][e][1]}d[e]=l-=o?i/o*u:0,l<c&&(c=l)}for(e=0;e<h;++e)d[e]-=c;return d},expand:function(t){var n,e,r,o=t.length,i=t[0].length,a=[];for(e=0;e<i;++e){for(n=0,r=0;n<o;n++)r+=t[n][e][1];if(r)for(n=0;n<o;n++)t[n][e][1]/=r;else for(n=0;n<o;n++)t[n][e][1]=1/o}for(e=0;e<i;++e)a[e]=0;return a},zero:Zr});vi.layout.histogram=function(){function t(t,i){for(var a,u,l=[],c=t.map(e,this),s=r.call(this,c,i),f=o.call(this,s,c,i),h=(i=-1,c.length),d=f.length-1,p=n?1:1/h;++i<d;)(a=l[i]=[]).dx=f[i+1]-(a.x=f[i]),a.y=0;if(0<d)for(i=-1;++i<h;)(u=c[i])>=s[0]&&u<=s[1]&&((a=l[vi.bisect(f,u,1,d)-1]).y+=p,a.push(t[i]));return l}var n=!0,e=Number,r=Qr,o=Xr;return t.value=function(n){return arguments.length?(e=n,t):e},t.range=function(n){return arguments.length?(r=Nt(n),t):r},t.bins=function(n){return arguments.length?(o="number"==typeof n?function(t){return Kr(t,n)}:Nt(n),t):o},t.frequency=function(e){return arguments.length?(n=!!e,t):n},t},vi.layout.pack=function(){function t(t,i){var a=e.call(this,t,i),u=a[0],l=o[0],c=o[1],s=null==n?Math.sqrt:"function"==typeof n?n:function(){return n};if(u.x=u.y=0,Ir(u,(function(t){t.r=+s(t.value)})),Ir(u,oo),r){var f=r*(n?1:Math.max(2*u.r/l,2*u.r/c))/2;Ir(u,(function(t){t.r+=f})),Ir(u,oo),Ir(u,(function(t){t.r-=f}))}return function t(n,e,r,o){var i=n.children;if(n.x=e+=o*n.x,n.y=r+=o*n.y,n.r*=o,i)for(var a=-1,u=i.length;++a<u;)t(i[a],e,r,o)}(u,l/2,c/2,n?1:1/Math.max(2*u.r/l,2*u.r/c)),a}var n,e=vi.layout.hierarchy().sort(to),r=0,o=[1,1];return t.size=function(n){return arguments.length?(o=n,t):o},t.radius=function(e){return arguments.length?(n=null==e||"function"==typeof e?e:+e,t):n},t.padding=function(n){return arguments.length?(r=+n,t):r},Pr(t,e)},vi.layout.tree=function(){function t(t,l){var c=o.call(this,t,l),s=c[0],f=function(t){for(var n,e={A:null,children:[t]},r=[e];null!=(n=r.pop());)for(var o,i=n.children,a=0,u=i.length;a<u;++a)r.push((i[a]=o={_:i[a],parent:n,children:(o=i[a].children)&&o.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=o);return e.children[0]}(s);if(Ir(f,n),f.parent.m=-f.z,Rr(f,e),u)Rr(s,r);else{var h=s,d=s,p=s;Rr(s,(function(t){t.x<h.x&&(h=t),t.x>d.x&&(d=t),t.depth>p.depth&&(p=t)}));var g=i(h,d)/2-h.x,v=a[0]/(d.x+i(d,h)/2+g),y=a[1]/(p.depth||1);Rr(s,(function(t){t.x=(t.x+g)*v,t.y=t.depth*y}))}return c}function n(t){var n=t.children,e=t.parent.children,r=t.i?e[t.i-1]:null;if(n.length){!function(t){for(var n,e=0,r=0,o=t.children,i=o.length;0<=--i;)(n=o[i]).z+=e,n.m+=e,e+=n.s+(r+=n.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+i(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+i(t._,r._));t.parent.A=function(t,n,e){if(n){for(var r,o=t,a=t,u=n,l=o.parent.children[0],c=o.m,s=a.m,f=u.m,h=l.m;u=so(u),o=co(o),u&&o;)l=co(l),(a=so(a)).a=t,0<(r=u.z+f-o.z-c+i(u._,o._))&&(fo(ho(u,t,e),t,r),c+=r,s+=r),f+=u.m,c+=o.m,h+=l.m,s+=a.m;u&&!so(a)&&(a.t=u,a.m+=f-s),o&&!co(l)&&(l.t=o,l.m+=c-h,e=t)}return e}(t,r,t.parent.A||e[0])}function e(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t){t.x*=a[0],t.y=t.depth*a[1]}var o=vi.layout.hierarchy().sort(null).value(null),i=lo,a=[1,1],u=null;return t.separation=function(n){return arguments.length?(i=n,t):i},t.size=function(n){return arguments.length?(u=null==(a=n)?r:null,t):u?null:a},t.nodeSize=function(n){return arguments.length?(u=null==(a=n)?null:r,t):u?a:null},Pr(t,o)},vi.layout.cluster=function(){function t(t,i){var a,u=n.call(this,t,i),l=u[0],c=0;Ir(l,(function(t){var n=t.children;n&&n.length?(t.x=function(t){return t.reduce((function(t,n){return t+n.x}),0)/t.length}(n),t.y=function(t){return 1+vi.max(t,(function(t){return t.y}))}(n)):(t.x=a?c+=e(t,a):0,t.y=0,a=t)}));var s=function t(n){var e=n.children;return e&&e.length?t(e[0]):n}(l),f=function t(n){var e,r=n.children;return r&&(e=r.length)?t(r[e-1]):n}(l),h=s.x-e(s,f)/2,d=f.x+e(f,s)/2;return Ir(l,o?function(t){t.x=(t.x-l.x)*r[0],t.y=(l.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(d-h)*r[0],t.y=(1-(l.y?t.y/l.y:1))*r[1]}),u}var n=vi.layout.hierarchy().sort(null).value(null),e=lo,r=[1,1],o=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(n){return arguments.length?(o=null==(r=n),t):o?null:r},t.nodeSize=function(n){return arguments.length?(o=null!=(r=n),t):o?r:null},Pr(t,n)},vi.layout.treemap=function(){function t(t,n){for(var e,r,o=-1,i=t.length;++o<i;)r=(e=t[o]).value*(0>n?0:n),e.area=isNaN(r)||0>=r?0:r}function n(e){var i=e.children;if(i&&i.length){var a,u,l,c=h(e),s=[],f=i.slice(),d=1/0,g="slice"===p?c.dx:"dice"===p?c.dy:"slice-dice"===p?1&e.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(t(f,c.dx*c.dy/e.value),s.area=0;0<(l=f.length);)s.push(a=f[l-1]),s.area+=a.area,"squarify"!==p||(u=r(s,g))<=d?(f.pop(),d=u):(s.area-=s.pop().area,o(s,g,c,!1),g=Math.min(c.dx,c.dy),s.length=s.area=0,d=1/0);s.length&&(o(s,g,c,!0),s.length=s.area=0),i.forEach(n)}}function e(n){var r=n.children;if(r&&r.length){var i,a=h(n),u=r.slice(),l=[];for(t(u,a.dx*a.dy/n.value),l.area=0;i=u.pop();)l.push(i),l.area+=i.area,null!=i.z&&(o(l,i.z?a.dx:a.dy,a,!u.length),l.length=l.area=0);r.forEach(e)}}function r(t,n){for(var e,r=t.area,o=0,i=1/0,a=-1,u=t.length;++a<u;)(e=t[a].area)&&(e<i&&(i=e),e>o&&(o=e));return n*=n,(r*=r)?Math.max(n*o*g/r,r/(n*i*g)):1/0}function o(t,n,e,r){var o,i=-1,a=t.length,u=e.x,l=e.y,s=n?c(t.area/n):0;if(n==e.dx){for((r||s>e.dy)&&(s=e.dy);++i<a;)(o=t[i]).x=u,o.y=l,o.dy=s,u+=o.dx=Math.min(e.x+e.dx-u,s?c(o.area/s):0);o.z=!0,o.dx+=e.x+e.dx-u,e.y+=s,e.dy-=s}else{for((r||s>e.dx)&&(s=e.dx);++i<a;)(o=t[i]).x=u,o.y=l,o.dx=s,l+=o.dy=Math.min(e.y+e.dy-l,s?c(o.area/s):0);o.z=!1,o.dy+=e.y+e.dy-l,e.x+=s,e.dx-=s}}function a(r){var o=u||l(r),i=o[0];return i.x=i.y=0,i.value?(i.dx=s[0],i.dy=s[1]):i.dx=i.dy=0,u&&l.revalue(i),t([i],i.dx*i.dy/i.value),(u?e:n)(i),d&&(u=o),o}var u,l=vi.layout.hierarchy(),c=Math.round,s=[1,1],f=null,h=po,d=!1,p="squarify",g=.5*(1+Math.sqrt(5));return a.size=function(t){return arguments.length?(s=t,a):s},a.padding=function(t){function n(n){var e=t.call(a,n,n.depth);return null==e?po(n):go(n,"number"==typeof e?[e,e,e,e]:e)}function e(n){return go(n,t)}return arguments.length?(h=null==(f=t)?po:"function"===(r=i(t))?n:"number"===r?(t=[t,t,t,t],e):e,a):f;var r},a.round=function(t){return arguments.length?(c=t?Math.round:Number,a):c!=Number},a.sticky=function(t){return arguments.length?(d=t,u=null,a):d},a.ratio=function(t){return arguments.length?(g=t,a):g},a.mode=function(t){return arguments.length?(p=t+"",a):p},Pr(a,l)},vi.random={normal:function(t,n){var e=arguments.length;return 2>e&&(n=1),1>e&&(t=0),function(){var e,r,o;do{o=(e=2*Math.random()-1)*e+(r=2*Math.random()-1)*r}while(!o||1<o);return t+n*e*Math.sqrt(-2*Math.log(o)/o)}},logNormal:function(){var t=vi.random.normal.apply(vi,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=vi.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(t){return function(){for(var n=0,e=0;e<t;e++)n+=Math.random();return n}}},vi.scale={};var wu={floor:_,ceil:_};vi.scale.linear=function(){return function t(n,e,r,o){function i(){var t=2<Math.min(n.length,e.length)?Mo:mo,i=o?Ar:Lr;return u=t(n,e,i,r),l=t(e,n,i,sr),a}function a(t){return u(t)}var u,l;return a.invert=function(t){return l(t)},a.domain=function(t){return arguments.length?(n=t.map(Number),i()):n},a.range=function(t){return arguments.length?(e=t,i()):e},a.rangeRound=function(t){return a.range(t).interpolate(wr)},a.clamp=function(t){return arguments.length?(o=t,i()):o},a.interpolate=function(t){return arguments.length?(r=t,i()):r},a.ticks=function(t){return ko(n,t)},a.tickFormat=function(t,e){return Co(n,t,e)},a.nice=function(t){return So(n,t),i()},a.copy=function(){return t(n,e,r,o)},i()}([0,1],[0,1],sr,!1)};var Su={s:1,g:1,p:1,r:1,e:1};vi.scale.log=function(){return function t(n,e,r,o){function i(t){return(r?Math.log(0>t?0:t):-Math.log(0<t?0:-t))/Math.log(e)}function a(t){return r?Math.pow(e,t):-Math.pow(e,-t)}function u(t){return n(i(t))}return u.invert=function(t){return a(n.invert(t))},u.domain=function(t){return arguments.length?(r=0<=t[0],n.domain((o=t.map(Number)).map(i)),u):o},u.base=function(t){return arguments.length?(e=+t,n.domain(o.map(i)),u):e},u.nice=function(){var t=xo(o.map(i),r?Math:ku);return n.domain(t),o=t.map(a),u},u.ticks=function(){var t=vo(o),n=[],u=t[0],l=t[1],c=Math.floor(i(u)),s=Math.ceil(i(l)),f=e%1?2:e;if(isFinite(s-c)){if(r){for(;c<s;c++)for(var h=1;h<f;h++)n.push(a(c)*h);n.push(a(c))}else for(n.push(a(c));c++<s;)for(h=f-1;0<h;h--)n.push(a(c)*h);for(c=0;n[c]<u;c++);for(s=n.length;n[s-1]>l;s--);n=n.slice(c,s)}return n},u.tickFormat=function(t,n){if(!arguments.length)return _u;2>arguments.length?n=_u:"function"!=typeof n&&(n=vi.format(n));var r=Math.max(1,e*t/u.ticks().length);return function(t){var o=t/a(Math.round(i(t)));return o*e<e-.5&&(o*=e),o<=r?n(t):""}},u.copy=function(){return t(n.copy(),e,r,o)},wo(u,n)}(vi.scale.linear().domain([0,1]),10,!0,[1,10])};var _u=vi.format(".0e"),ku={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};vi.scale.pow=function(){return function t(n,e,r){function o(t){return n(i(t))}var i=Lo(e),a=Lo(1/e);return o.invert=function(t){return a(n.invert(t))},o.domain=function(t){return arguments.length?(n.domain((r=t.map(Number)).map(i)),o):r},o.ticks=function(t){return ko(r,t)},o.tickFormat=function(t,n){return Co(r,t,n)},o.nice=function(t){return o.domain(So(r,t))},o.exponent=function(t){return arguments.length?(i=Lo(e=t),a=Lo(1/e),n.domain(r.map(i)),o):e},o.copy=function(){return t(n.copy(),e,r)},wo(o,n)}(vi.scale.linear(),1,[0,1])},vi.scale.sqrt=function(){return vi.scale.pow().exponent(.5)},vi.scale.ordinal=function(){return function t(n,e){function r(t){return a[((i.get(t)||("range"===e.t?i.set(t,n.push(t)):NaN))-1)%a.length]}function o(t,e){return vi.range(n.length).map((function(n){return t+e*n}))}var i,a,u;return r.domain=function(t){if(!arguments.length)return n;n=[],i=new g;for(var o,a=-1,u=t.length;++a<u;)i.has(o=t[a])||i.set(o,n.push(o));return r[e.t].apply(r,e.a)},r.range=function(t){return arguments.length?(a=t,u=0,e={t:"range",a:arguments},r):a},r.rangePoints=function(t,i){2>arguments.length&&(i=0);var l=t[0],c=t[1],s=2>n.length?(l=(l+c)/2,0):(c-l)/(n.length-1+i);return a=o(l+s*i/2,s),u=0,e={t:"rangePoints",a:arguments},r},r.rangeRoundPoints=function(t,i){2>arguments.length&&(i=0);var l=t[0],c=t[1],s=2>n.length?(l=c=Math.round((l+c)/2),0):0|(c-l)/(n.length-1+i);return a=o(l+Math.round(s*i/2+(c-l-(n.length-1+i)*s)/2),s),u=0,e={t:"rangeRoundPoints",a:arguments},r},r.rangeBands=function(t,i,l){2>arguments.length&&(i=0),3>arguments.length&&(l=i);var c=t[1]<t[0],s=t[c-0],f=t[1-c],h=(f-s)/(n.length-i+2*l);return a=o(s+h*l,h),c&&a.reverse(),u=h*(1-i),e={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(t,i,l){2>arguments.length&&(i=0),3>arguments.length&&(l=i);var c=t[1]<t[0],s=t[c-0],f=t[1-c],h=Math.floor((f-s)/(n.length-i+2*l));return a=o(s+Math.round((f-s-(n.length-i)*h)/2),h),c&&a.reverse(),u=Math.round(h*(1-i)),e={t:"rangeRoundBands",a:arguments},r},r.rangeBand=function(){return u},r.rangeExtent=function(){return vo(e.a[0])},r.copy=function(){return t(n,e)},r.domain(n)}([],{t:"range",a:[[]]})},vi.scale.category10=function(){return vi.scale.ordinal().range(Cu)},vi.scale.category20=function(){return vi.scale.ordinal().range(Eu)},vi.scale.category20b=function(){return vi.scale.ordinal().range(Lu)},vi.scale.category20c=function(){return vi.scale.ordinal().range(Au)};var Cu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(St),Eu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(St),Lu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(St),Au=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(St);vi.scale.quantile=function(){return function t(n,e){function r(){var t=0,r=e.length;for(i=[];++t<r;)i[t-1]=vi.quantile(n,t/r);return o}function o(t){if(!isNaN(t=+t))return e[vi.bisect(i,t)]}var i;return o.domain=function(t){return arguments.length?(n=t.map(c).filter(s).sort(l),r()):n},o.range=function(t){return arguments.length?(e=t,r()):e},o.quantiles=function(){return i},o.invertExtent=function(t){return 0>(t=e.indexOf(t))?[NaN,NaN]:[0<t?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},o.copy=function(){return t(n,e)},r()}([],[])},vi.scale.quantize=function(){return function t(n,e,r){function o(t){return r[Math.max(0,Math.min(u,Math.floor(a*(t-n))))]}function i(){return a=r.length/(e-n),u=r.length-1,o}var a,u;return o.domain=function(t){return arguments.length?(n=+t[0],e=+t[t.length-1],i()):[n,e]},o.range=function(t){return arguments.length?(r=t,i()):r},o.invertExtent=function(t){return[t=0>(t=r.indexOf(t))?NaN:t/a+n,t+1/a]},o.copy=function(){return t(n,e,r)},i()}(0,1,[0,1])},vi.scale.threshold=function(){return function t(n,e){function r(t){if(t<=t)return e[vi.bisect(n,t)]}return r.domain=function(t){return arguments.length?(n=t,r):n},r.range=function(t){return arguments.length?(e=t,r):e},r.invertExtent=function(t){return t=e.indexOf(t),[n[t-1],n[t]]},r.copy=function(){return t(n,e)},r}([.5],[0,1])},vi.scale.identity=function(){return function t(n){function e(t){return+t}return e.invert=e,e.domain=e.range=function(t){return arguments.length?(n=t.map(e),e):n},e.ticks=function(t){return ko(n,t)},e.tickFormat=function(t,e){return Co(n,t,e)},e.copy=function(){return t(n)},e}([0,1])},vi.svg={},vi.svg.arc=function(){function t(){var t=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+r.apply(this,arguments)),s=a.apply(this,arguments)-Wi,f=u.apply(this,arguments)-Wi,h=Math.abs(f-s),d=s>f?0:1;if(c<t&&(p=c,c=t,t=p),h>=Ui-Bi)return n(c,d)+(t?n(t,1-d):"")+"Z";var p,g,v,y,m,x,b,M,w,S,_,k,C=0,E=0,L=[];if((y=(+l.apply(this,arguments)||0)/2)&&(v=i===Nu?Math.sqrt(t*t+c*c):+i.apply(this,arguments),!d&&(E*=-1),c&&(E=ut(v/c*Math.sin(y))),t&&(C=ut(v/t*Math.sin(y)))),c){m=c*Math.cos(s+E),x=c*Math.sin(s+E),b=c*Math.cos(f-E),M=c*Math.sin(f-E);var A=Math.abs(f-s-2*E)<=Vi?0:1;if(E&&zo(m,x,b,M)===d^A){var N=(s+f)/2;m=c*Math.cos(N),x=c*Math.sin(N),b=M=null}}else m=x=0;if(t){w=t*Math.cos(f-C),S=t*Math.sin(f-C),_=t*Math.cos(s+C),k=t*Math.sin(s+C);var O=Math.abs(s-f+2*C)<=Vi?0:1;if(C&&zo(w,S,_,k)===1-d^O){var T=(s+f)/2;w=t*Math.cos(T),S=t*Math.sin(T),_=k=null}}else w=S=0;if(h>Bi&&.001<(p=Math.min(Math.abs(c-t)/2,+o.apply(this,arguments)))){g=t<c^d?0:1;var D=p,F=p;if(h<Vi){var z=null==_?[w,S]:null==b?[m,x]:Le([m,x],[_,k],[b,M],[w,S]),P=m-z[0],R=x-z[1],I=b-z[0],q=M-z[1],B=1/Math.sin(Math.acos((P*I+R*q)/(Math.sqrt(P*P+R*R)*Math.sqrt(I*I+q*q)))/2),j=Math.sqrt(z[0]*z[0]+z[1]*z[1]);F=Math.min(p,(t-j)/(B-1)),D=Math.min(p,(c-j)/(B+1))}if(null!=b){var V=Po(null==_?[w,S]:[_,k],[m,x],c,D,d),U=Po([b,M],[w,S],c,D,d);p===D?L.push("M",V[0],"A",D,",",D," 0 0,",g," ",V[1],"A",c,",",c," 0 ",1-d^zo(V[1][0],V[1][1],U[1][0],U[1][1]),",",d," ",U[1],"A",D,",",D," 0 0,",g," ",U[0]):L.push("M",V[0],"A",D,",",D," 0 1,",g," ",U[0])}else L.push("M",m,",",x);if(null!=_){var W=Po([m,x],[_,k],t,-F,d),H=Po([w,S],null==b?[m,x]:[b,M],t,-F,d);p===F?L.push("L",H[0],"A",F,",",F," 0 0,",g," ",H[1],"A",t,",",t," 0 ",d^zo(H[1][0],H[1][1],W[1][0],W[1][1]),",",1-d," ",W[1],"A",F,",",F," 0 0,",g," ",W[0]):L.push("L",H[0],"A",F,",",F," 0 0,",g," ",W[0])}else L.push("L",w,",",S)}else L.push("M",m,",",x),null!=b&&L.push("A",c,",",c," 0 ",A,",",d," ",b,",",M),L.push("L",w,",",S),null!=_&&L.push("A",t,",",t," 0 ",O,",",1-d," ",_,",",k);return L.push("Z"),L.join("")}function n(t,n){return"M0,"+t+"A"+t+","+t+" 0 1,"+n+" 0,"+-t+"A"+t+","+t+" 0 1,"+n+" 0,"+t}var e=No,r=Oo,o=Ao,i=Nu,a=To,u=Do,l=Fo;return t.innerRadius=function(n){return arguments.length?(e=Nt(n),t):e},t.outerRadius=function(n){return arguments.length?(r=Nt(n),t):r},t.cornerRadius=function(n){return arguments.length?(o=Nt(n),t):o},t.padRadius=function(n){return arguments.length?(i=n==Nu?Nu:Nt(n),t):i},t.startAngle=function(n){return arguments.length?(a=Nt(n),t):a},t.endAngle=function(n){return arguments.length?(u=Nt(n),t):u},t.padAngle=function(n){return arguments.length?(l=Nt(n),t):l},t.centroid=function(){var t=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,n=(+a.apply(this,arguments)+ +u.apply(this,arguments))/2-Wi;return[Math.cos(n)*t,Math.sin(n)*t]},t};var Nu="auto";vi.svg.line=function(){return Ro(_)};var Ou=vi.map({linear:Io,"linear-closed":qo,step:function(t){for(var n=0,e=t.length,r=t[0],o=[r[0],",",r[1]];++n<e;)o.push("H",(r[0]+(r=t[n])[0])/2,"V",r[1]);return 1<e&&o.push("H",r[0]),o.join("")},"step-before":Bo,"step-after":jo,basis:Wo,"basis-open":function(t){if(4>t.length)return Io(t);for(var n,e=[],r=-1,o=t.length,i=[0],a=[0];3>++r;)n=t[r],i.push(n[0]),a.push(n[1]);for(e.push(Ho(Fu,i)+","+Ho(Fu,a)),--r;++r<o;)n=t[r],i.shift(),i.push(n[0]),a.shift(),a.push(n[1]),Yo(e,i,a);return e.join("")},"basis-closed":function(t){for(var n,e,r=-1,o=t.length,i=o+4,a=[],u=[];4>++r;)e=t[r%o],a.push(e[0]),u.push(e[1]);for(n=[Ho(Fu,a),",",Ho(Fu,u)],--r;++r<i;)e=t[r%o],a.shift(),a.push(e[0]),u.shift(),u.push(e[1]),Yo(n,a,u);return n.join("")},bundle:function(t,n){var e=t.length-1;if(e)for(var r,o,i=t[0][0],a=t[0][1],u=t[e][0]-i,l=t[e][1]-a,c=-1;++c<=e;)o=c/e,(r=t[c])[0]=n*r[0]+(1-n)*(i+o*u),r[1]=n*r[1]+(1-n)*(a+o*l);return Wo(t)},cardinal:function(t,n){return 3>t.length?Io(t):t[0]+Vo(t,Uo(t,n))},"cardinal-open":function(t,n){return 4>t.length?Io(t):t[1]+Vo(t.slice(1,-1),Uo(t,n))},"cardinal-closed":function(t,n){return 3>t.length?qo(t):t[0]+Vo((t.push(t[0]),t),Uo([t[t.length-2]].concat(t,[t[1]]),n))},monotone:function(t){return 3>t.length?Io(t):t[0]+Vo(t,Go(t))}});Ou.forEach((function(t,n){n.key=t,n.closed=/-closed$/.test(t)}));var Tu=[0,2/3,1/3,0],Du=[0,1/3,2/3,0],Fu=[0,1/6,2/3,1/6];vi.svg.line.radial=function(){var t=Ro(Jo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Bo.reverse=jo,jo.reverse=Bo,vi.svg.area=function(){return $o(_)},vi.svg.area.radial=function(){var t=$o(Jo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},vi.svg.chord=function(){function t(t,a){var u=n(this,o,t,a),l=n(this,i,t,a);return"M"+u.p0+e(u.r,u.p1,u.a1-u.a0)+(function(t,n){return t.a0==n.a0&&t.a1==n.a1}(u,l)?r(u.r,u.p1,u.r,u.p0):r(u.r,u.p1,l.r,l.p0)+e(l.r,l.p1,l.a1-l.a0)+r(l.r,l.p1,u.r,u.p0))+"Z"}function n(t,n,e,r){var o=n.call(t,e,r),i=a.call(t,o,r),c=u.call(t,o,r)-Wi,s=l.call(t,o,r)-Wi;return{r:i,a0:c,a1:s,p0:[i*Math.cos(c),i*Math.sin(c)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function e(t,n,e){return"A"+t+","+t+" 0 "+ +(e>Vi)+",1 "+n}function r(t,n,e,r){return"Q 0,0 "+r}var o=ge,i=ve,a=Xo,u=To,l=Do;return t.radius=function(n){return arguments.length?(a=Nt(n),t):a},t.source=function(n){return arguments.length?(o=Nt(n),t):o},t.target=function(n){return arguments.length?(i=Nt(n),t):i},t.startAngle=function(n){return arguments.length?(u=Nt(n),t):u},t.endAngle=function(n){return arguments.length?(l=Nt(n),t):l},t},vi.svg.diagonal=function(){function t(t,o){var i=n.call(this,t,o),a=e.call(this,t,o),u=(i.y+a.y)/2,l=[i,{x:i.x,y:u},{x:a.x,y:u},a];return"M"+(l=l.map(r))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var n=ge,e=ve,r=Ko;return t.source=function(e){return arguments.length?(n=Nt(e),t):n},t.target=function(n){return arguments.length?(e=Nt(n),t):e},t.projection=function(n){return arguments.length?(r=n,t):r},t},vi.svg.diagonal.radial=function(){var t=vi.svg.diagonal(),n=Ko,e=t.projection;return t.projection=function(t){return arguments.length?e(Qo(n=t)):n},t},vi.svg.symbol=function(){function t(t,r){return(zu.get(n.call(this,t,r))||ei)(e.call(this,t,r))}var n=ni,e=ti;return t.type=function(e){return arguments.length?(n=Nt(e),t):n},t.size=function(n){return arguments.length?(e=Nt(n),t):e},t};var zu=vi.map({circle:ei,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*Ru)),e=n*Ru;return"M0,"+-n+"L"+e+",0 0,"+n+" "+-e+",0Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/Pu),e=n*Pu/2;return"M0,"+e+"L"+n+","+-e+" "+-n+","+-e+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/Pu),e=n*Pu/2;return"M0,"+-e+"L"+n+","+e+" "+-n+","+e+"Z"}});vi.svg.symbolTypes=zu.keys();var Pu=Math.sqrt(3),Ru=Math.tan(30*Hi);Di.transition=function(t){for(var n,e,r=Iu||++Vu,o=ui(t),i=[],a=qu||{time:Date.now(),ease:yr,delay:0,duration:250},u=-1,l=this.length;++u<l;){i.push(n=[]);for(var c=this[u],s=-1,f=c.length;++s<f;)(e=c[s])&&li(e,s,o,r,a),n.push(e)}return oi(i,o,r)},Di.interrupt=function(t){return this.each(null==t?Bu:ri(ui(t)))};var Iu,qu,Bu=ri(ui()),ju=[],Vu=0;ju.call=Di.call,ju.empty=Di.empty,ju.node=Di.node,ju.size=Di.size,vi.transition=function(t,n){return t&&t.transition?Iu?t.transition(n):t:vi.selection().transition(t)},vi.transition.prototype=ju,ju.select=function(t){var n,e,r,o=this.id,i=this.namespace,a=[];t=F(t);for(var u=-1,l=this.length;++u<l;){a.push(n=[]);for(var c=this[u],s=-1,f=c.length;++s<f;)(r=c[s])&&(e=t.call(r,r.__data__,s,u))?("__data__"in r&&(e.__data__=r.__data__),li(e,s,i,o,r[i][o]),n.push(e)):n.push(null)}return oi(a,i,o)},ju.selectAll=function(t){var n,e,r,o,i,a=this.id,u=this.namespace,l=[];t=z(t);for(var c=-1,s=this.length;++c<s;)for(var f=this[c],h=-1,d=f.length;++h<d;)if(r=f[h]){i=r[u][a],e=t.call(r,r.__data__,h,c),l.push(n=[]);for(var p=-1,g=e.length;++p<g;)(o=e[p])&&li(o,p,u,a,i),n.push(o)}return oi(l,u,a)},ju.filter=function(t){var n,e,r=[];"function"!=typeof t&&(t=Z(t));for(var o=0,i=this.length;o<i;o++){r.push(n=[]);for(var a,u=0,l=(a=this[o]).length;u<l;u++)(e=a[u])&&t.call(e,e.__data__,u,o)&&n.push(e)}return oi(r,this.namespace,this.id)},ju.tween=function(t,n){var e=this.id,r=this.namespace;return 2>arguments.length?this.node()[r][e].tween.get(t):J(this,null==n?function(n){n[r][e].tween.remove(t)}:function(o){o[r][e].tween.set(t,n)})},ju.attr=function(t,n){function e(){this.removeAttribute(i)}function r(){this.removeAttributeNS(i.space,i.local)}if(2>arguments.length){for(n in t)this.attr(n,t[n]);return this}var o="transform"==t?Er:sr,i=vi.ns.qualify(t);return ii(this,"attr."+t,n,i.local?function(t){return null==t?r:(t+="",function(){var n,e=this.getAttributeNS(i.space,i.local);return e!==t&&(n=o(e,t),function(t){this.setAttributeNS(i.space,i.local,n(t))})})}:function(t){return null==t?e:(t+="",function(){var n,e=this.getAttribute(i);return e!==t&&(n=o(e,t),function(t){this.setAttribute(i,n(t))})})})},ju.attrTween=function(t,n){var e=vi.ns.qualify(t);return this.tween("attr."+t,e.local?function(t,r){var o=n.call(this,t,r,this.getAttributeNS(e.space,e.local));return o&&function(t){this.setAttributeNS(e.space,e.local,o(t))}}:function(t,r){var o=n.call(this,t,r,this.getAttribute(e));return o&&function(t){this.setAttribute(e,o(t))}})},ju.style=function(t,n,e){function r(){this.style.removeProperty(t)}var o=arguments.length;if(3>o){if("string"!=typeof t){for(e in 2>o&&(n=""),t)this.style(e,t[e],n);return this}e=""}return ii(this,"style."+t,n,(function(n){return null==n?r:(n+="",function(){var r,o=u(this).getComputedStyle(this,null).getPropertyValue(t);return o!==n&&(r=sr(o,n),function(n){this.style.setProperty(t,r(n),e)})})}))},ju.styleTween=function(t,n,e){return 3>arguments.length&&(e=""),this.tween("style."+t,(function(r,o){var i=n.call(this,r,o,u(this).getComputedStyle(this,null).getPropertyValue(t));return i&&function(n){this.style.setProperty(t,i(n),e)}}))},ju.text=function(t){return ii(this,"text",t,ai)},ju.remove=function(){var t=this.namespace;return this.each("end.transition",(function(){var n;2>this[t].count&&(n=this.parentNode)&&n.removeChild(this)}))},ju.ease=function(t){var n=this.id,e=this.namespace;return 1>arguments.length?this.node()[e][n].ease:("function"!=typeof t&&(t=vi.ease.apply(vi,arguments)),J(this,(function(r){r[e][n].ease=t})))},ju.delay=function(t){var n=this.id,e=this.namespace;return 1>arguments.length?this.node()[e][n].delay:J(this,"function"==typeof t?function(r,o,i){r[e][n].delay=+t.call(r,r.__data__,o,i)}:(t=+t,function(r){r[e][n].delay=t}))},ju.duration=function(t){var n=this.id,e=this.namespace;return 1>arguments.length?this.node()[e][n].duration:J(this,"function"==typeof t?function(r,o,i){r[e][n].duration=Math.max(1,t.call(r,r.__data__,o,i))}:(t=Math.max(1,t),function(r){r[e][n].duration=t}))},ju.each=function(t,n){var e=this.id,r=this.namespace;if(2>arguments.length){var o=qu,i=Iu;try{Iu=e,J(this,(function(n,o,i){qu=n[r][e],t.call(n,n.__data__,o,i)}))}finally{qu=o,Iu=i}}else J(this,(function(o){var i=o[r][e];(i.event||(i.event=vi.dispatch("start","end","interrupt"))).on(t,n)}));return this},ju.transition=function(){for(var t,n,e,r=this.id,o=++Vu,i=this.namespace,a=[],u=0,l=this.length;u<l;u++){a.push(t=[]);for(var c,s=0,f=(c=this[u]).length;s<f;s++)(n=c[s])&&li(n,s,i,o,{time:(e=n[i][r]).time,ease:e.ease,delay:e.delay+e.duration,duration:e.duration}),t.push(n)}return oi(a,i,o)},vi.svg.axis=function(){function t(t){t.each((function(){var t,c=vi.select(this),s=this.__chart__||e,f=this.__chart__=e.copy(),h=null==l?f.ticks?f.ticks.apply(f,u):f.domain():l,d=null==n?f.tickFormat?f.tickFormat.apply(f,u):_:n,p=c.selectAll(".tick").data(h,f),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Bi),v=vi.transition(p.exit()).style("opacity",Bi).remove(),y=vi.transition(p.order()).style("opacity",1),m=Math.max(o,0)+a,x=yo(f),b=c.selectAll(".domain").data([0]),M=(b.enter().append("path").attr("class","domain"),vi.transition(b));g.append("line"),g.append("text");var w,S,k,C,E=g.select("line"),L=y.select("line"),A=p.select("text").text(d),N=g.select("text"),O=y.select("text"),T="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=ci,w="x",k="y",S="x2",C="y2",A.attr("dy",0>T?"0em":".71em").style("text-anchor","middle"),M.attr("d","M"+x[0]+","+T*i+"V0H"+x[1]+"V"+T*i)):(t=si,w="y",k="x",S="y2",C="x2",A.attr("dy",".32em").style("text-anchor",0>T?"end":"start"),M.attr("d","M"+T*i+","+x[0]+"H0V"+x[1]+"H"+T*i)),E.attr(C,T*o),N.attr(k,T*m),L.attr(S,0).attr(C,T*o),O.attr(w,0).attr(k,T*m),f.rangeBand){var D=f,F=D.rangeBand()/2;s=f=function(t){return D(t)+F}}else s.rangeBand?s=f:v.call(t,f,s);g.call(t,s,f),y.call(t,f,f)}))}var n,e=vi.scale.linear(),r=Uu,o=6,i=6,a=3,u=[10],l=null;return t.scale=function(n){return arguments.length?(e=n,t):e},t.orient=function(n){return arguments.length?(r=n in Wu?n+"":Uu,t):r},t.ticks=function(){return arguments.length?(u=mi(arguments),t):u},t.tickValues=function(n){return arguments.length?(l=n,t):l},t.tickFormat=function(e){return arguments.length?(n=e,t):n},t.tickSize=function(n){var e=arguments.length;return e?(o=+n,i=+arguments[e-1],t):o},t.innerTickSize=function(n){return arguments.length?(o=+n,t):o},t.outerTickSize=function(n){return arguments.length?(i=+n,t):i},t.tickPadding=function(n){return arguments.length?(a=+n,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Uu="bottom",Wu={top:1,right:1,bottom:1,left:1};vi.svg.brush=function(){function t(i){i.each((function(){var i=vi.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=i.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=i.selectAll(".resize").data(g,_);u.exit().remove(),u.enter().append("g").attr("class",(function(t){return"resize "+t})).style("cursor",(function(t){return Hu[t]})).append("rect").attr("x",(function(t){return/[ew]$/.test(t)?-3:null})).attr("y",(function(t){return/^[ns]/.test(t)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",t.empty()?"none":null);var l,f=vi.transition(i),h=vi.transition(a);c&&(l=yo(c),h.attr("x",l[0]).attr("width",l[1]-l[0]),e(f)),s&&(l=yo(s),h.attr("y",l[0]).attr("height",l[1]-l[0]),r(f)),n(f)}))}function n(t){t.selectAll(".resize").attr("transform",(function(t){return"translate("+f[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"}))}function e(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function r(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function o(){function o(){32==vi.event.keyCode&&(!L&&(x=null,O[0]-=f[1],O[1]-=h[1],L=2),N())}function g(){32==vi.event.keyCode&&2==L&&(O[0]+=f[1],O[1]+=h[1],L=0,N())}function v(){var t=vi.mouse(M),o=!1;b&&(t[0]+=b[0],t[1]+=b[1]),L||(vi.event.altKey?(!x&&(x=[(f[0]+f[1])/2,(h[0]+h[1])/2]),O[0]=f[+(t[0]<x[0])],O[1]=h[+(t[1]<x[1])]):x=null),C&&y(t,c,0)&&(e(_),o=!0),E&&y(t,s,1)&&(r(_),o=!0),o&&(n(_),S({type:"brush",mode:L?"move":"resize"}))}function y(t,n,e){var r,o,u=yo(n),l=u[0],c=u[1],s=O[e],g=e?h:f,v=g[1]-g[0];if(L&&(l-=s,c-=v+s),r=(e?p:d)?Math.max(l,Math.min(c,t[e])):t[e],L?o=(r+=s)+v:(x&&(s=Math.max(l,Math.min(c,2*x[e]-r))),s<r?(o=r,r=s):o=s),g[0]!=r||g[1]!=o)return e?a=null:i=null,g[0]=r,g[1]=o,!0}function m(){v(),_.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),vi.select("body").style("cursor",null),T.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),S({type:"brushend"})}var x,b,M=this,w=vi.select(vi.event.target),S=l.of(M,arguments),_=vi.select(M),k=w.datum(),C=!/^(n|s)$/.test(k)&&c,E=!/^(e|w)$/.test(k)&&s,L=w.classed("extent"),A=nt(M),O=vi.mouse(M),T=vi.select(u(M)).on("keydown.brush",o).on("keyup.brush",g);if(vi.event.changedTouches?T.on("touchmove.brush",v).on("touchend.brush",m):T.on("mousemove.brush",v).on("mouseup.brush",m),_.interrupt().selectAll("*").interrupt(),L)O[0]=f[0]-O[0],O[1]=h[0]-O[1];else if(k){var D=+/w$/.test(k),F=+/^n/.test(k);b=[f[1-D]-O[0],h[1-F]-O[1]],O[0]=f[D],O[1]=h[F]}else vi.event.altKey&&(x=O.slice());_.style("pointer-events","none").selectAll(".resize").style("display",null),vi.select("body").style("cursor",w.style("cursor")),S({type:"brushstart"}),v()}var i,a,l=T(t,"brushstart","brush","brushend"),c=null,s=null,f=[0,0],h=[0,0],d=!0,p=!0,g=Yu[0];return t.event=function(t){t.each((function(){var t=l.of(this,arguments),n={x:f,y:h,i:i,j:a},e=this.__chart__||n;this.__chart__=n,Iu?vi.select(this).transition().each("start.brush",(function(){i=e.i,a=e.j,f=e.x,h=e.y,t({type:"brushstart"})})).tween("brush:brush",(function(){var e=fr(f,n.x),r=fr(h,n.y);return i=a=null,function(o){f=n.x=e(o),h=n.y=r(o),t({type:"brush",mode:"resize"})}})).each("end.brush",(function(){i=n.i,a=n.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})})):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))}))},t.x=function(n){return arguments.length?(g=Yu[!(c=n)<<1|!s],t):c},t.y=function(n){return arguments.length?(g=Yu[!c<<1|!(s=n)],t):s},t.clamp=function(n){return arguments.length?(c&&s?(d=!!n[0],p=!!n[1]):c?d=!!n:s&&(p=!!n),t):c&&s?[d,p]:c?d:s?p:null},t.extent=function(n){var e,r,o,u,l;return arguments.length?(c&&(e=n[0],r=n[1],s&&(e=e[0],r=r[0]),i=[e,r],c.invert&&(e=c(e),r=c(r)),r<e&&(l=e,e=r,r=l),(e!=f[0]||r!=f[1])&&(f=[e,r])),s&&(o=n[0],u=n[1],c&&(o=o[1],u=u[1]),a=[o,u],s.invert&&(o=s(o),u=s(u)),u<o&&(l=o,o=u,u=l),(o!=h[0]||u!=h[1])&&(h=[o,u])),t):(c&&(i?(e=i[0],r=i[1]):(e=f[0],r=f[1],c.invert&&(e=c.invert(e),r=c.invert(r)),r<e&&(l=e,e=r,r=l))),s&&(a?(o=a[0],u=a[1]):(o=h[0],u=h[1],s.invert&&(o=s.invert(o),u=s.invert(u)),u<o&&(l=o,o=u,u=l))),c&&s?[[e,o],[r,u]]:c?[e,r]:s&&[o,u])},t.clear=function(){return t.empty()||(f=[0,0],h=[0,0],i=a=null),t},t.empty=function(){return!!c&&f[0]==f[1]||!!s&&h[0]==h[1]},vi.rebind(t,l,"on")};var Hu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Yu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Zu=da.format=xa.timeFormat,Gu=Zu.utc,Ju=Gu("%Y-%m-%dT%H:%M:%S.%LZ");Zu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?fi:Ju,fi.parse=function(t){var n=new Date(t);return isNaN(n)?null:n},fi.toString=Ju.toString,da.second=jt((function(t){return new pa(1e3*Math.floor(t/1e3))}),(function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))}),(function(t){return t.getSeconds()})),da.seconds=da.second.range,da.seconds.utc=da.second.utc.range,da.minute=jt((function(t){return new pa(6e4*Math.floor(t/6e4))}),(function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))}),(function(t){return t.getMinutes()})),da.minutes=da.minute.range,da.minutes.utc=da.minute.utc.range,da.hour=jt((function(t){var n=t.getTimezoneOffset()/60;return new pa(36e5*(Math.floor(t/36e5-n)+n))}),(function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))}),(function(t){return t.getHours()})),da.hours=da.hour.range,da.hours.utc=da.hour.utc.range,da.month=jt((function(t){return(t=da.day(t)).setDate(1),t}),(function(t,n){t.setMonth(t.getMonth()+n)}),(function(t){return t.getMonth()})),da.months=da.month.range,da.months.utc=da.month.utc.range;var $u=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Xu=[[da.second,1],[da.second,5],[da.second,15],[da.second,30],[da.minute,1],[da.minute,5],[da.minute,15],[da.minute,30],[da.hour,1],[da.hour,3],[da.hour,6],[da.hour,12],[da.day,1],[da.day,2],[da.week,1],[da.month,1],[da.month,3],[da.year,1]],Ku=Zu.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Nn]]),Qu={range:function(t,n,e){return vi.range(Math.ceil(t/e)*e,+n,e).map(di)},floor:_,ceil:_};Xu.year=da.year,da.scale=function(){return hi(vi.scale.linear(),Xu,Ku)};var tl=Xu.map((function(t){return[t[0].utc,t[1]]})),nl=Gu.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Nn]]);tl.year=da.year.utc,da.scale.utc=function(){return hi(vi.scale.linear(),tl,nl)},vi.text=Ot((function(t){return t.responseText})),vi.json=function(t,n){return Tt(t,"application/json",pi,n)},vi.html=function(t,n){return Tt(t,"text/html",gi,n)},vi.xml=Ot((function(t){return t.responseXML})),this.d3=vi,void 0===(o="function"==typeof(r=vi)?r.call(n,e,n,t):r)||(t.exports=o)}()},13:function(t,n,e){var r=e(8).Symbol;t.exports=r},14:function(t,n,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=e(18),i=e(16);t.exports=function(t){return"symbol"==r(t)||i(t)&&"[object Symbol]"==o(t)}},16:function(t,n){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return null!=t&&"object"==e(t)}},18:function(t,n,e){var r=e(13),o=e(53),i=e(54),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},31:function(t,n){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":e(window))&&(r=window)}t.exports=r},313:function(t,n,e){e(314),e(315),t.exports=e(316)},314:function(t,n,e){},315:function(t,n,e){(function(n){function e(){var t=function(){var t,n=-1;return/(?:\b(MS)?IE\s+|\bTrident\/7\.0;.*\s+rv:|\bEdge\/)(\d+)/.test(navigator.userAgent)?n=parseInt("12"):/Trident.*rv[ :]*11\./.test(navigator.userAgent)?n=parseInt("11"):("Microsoft Internet Explorer"===navigator.appName?(t=navigator.userAgent,null!==/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(t)&&(n=parseFloat(RegExp.$1))):"Netscape"===navigator.appName&&(t=navigator.userAgent,null!==/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(t)&&(n=parseFloat(RegExp.$1))),n)}();(console.log("Browser Version ="+t),0<t&&11>=t&&(n.select("#browserCheck").classed("hidden",!1),n.select("#killWarning").classed("hidden",!0),n.select("#optionsArea").classed("hidden",!0),n.select("#logo").classed("hidden",!0)),12==t)?(n.select("#logo").classed("hidden",!1),n.select("#browserCheck").classed("hidden",!1),n.select("#killWarning").on("click",(function(){console.log("hide the warning please"),n.select("#browserCheck").classed("hidden",!0),n.select("#logo").style("padding","10px")}))):(n.select("#logo").classed("hidden",!1),n.select("#browserCheck").classed("hidden",!0))}t.exports=e,e()}).call(this,e(0))},316:function(t,n,e){(function(n){t.exports=function(){function t(t,n,e){if(d.reset(),i.options().navigationMenu().hideAllMenus(),void 0===t&&void 0===n||0===t.length)b.notValidJsonFile();else{var o;if(t){var c;try{o=JSON.parse(t),c=!0}catch(t){c=!1}if(!1===c)return void b.notValidJsonFile();if(!n){var s=o.header?o.header.title:void 0,f=u.textInLanguage(s);n=f||e}}var p=0;void 0!==o.class&&(p=o.class.length),0===p?b.emptyGraphContentError():(b.validJsonFile(),h.setCachedOntology(n,t),l.setJsonText(t),a.data(o),i.options().loadingModule().setPercentMode(),i.load(),m.updateOntologyInformation(o,T),l.setFilename(n),i.updateZoomSliderValueFromOutside(),r())}}function r(){var t=n.select("#graph"),e=t.select("svg"),r=window.innerHeight-40,o=window.innerWidth-.22*window.innerWidth;"0"===m.getSidebarVisibility()&&(r=window.innerHeight-40,o=window.innerWidth),i.adjustingGraphSize(!0),t.style("height",r+"px"),e.attr("width",o).attr("height",r),a.width(o).height(r),i.updateStyle(),function(){var t=window.innerHeight-40,e=t,r=t-30;if(150>e)return n.select("#zoomSliderParagraph").classed("hidden",!0),n.select("#zoomOutButton").classed("hidden",!0),n.select("#zoomInButton").classed("hidden",!0),void n.select("#centerGraphButton").classed("hidden",!0);n.select("#zoomSliderParagraph").classed("hidden",!1),n.select("#zoomOutButton").classed("hidden",!1),n.select("#zoomInButton").classed("hidden",!1),n.select("#centerGraphButton").classed("hidden",!1);var o=r-20,i=o-20;if(280>e)return n.select("#zoomSliderParagraph").classed("hidden",!0),n.select("#zoomOutButton").style("top",r+"px"),n.select("#zoomInButton").style("top",o+"px"),void n.select("#centerGraphButton").style("top",i+"px");var a=r-150;i=(o=a-20)-20,n.select("#zoomSliderParagraph").classed("hidden",!1),n.select("#zoomOutButton").style("top",r+"px"),n.select("#zoomInButton").style("top",o+"px"),n.select("#centerGraphButton").style("top",i+"px"),n.select("#zoomSliderParagraph").style("top",a+"px")}(),n.select("#loadingInfo-container").style("height",.5*(r-80)+"px"),b.checkForScreenSize();var u=n.select("#browserCheck");if(!1===u.classed("hidden")){var l=10+u.node().getBoundingClientRect().height;n.select("#logo").style("padding",l+"px 10px")}else n.select("#logo").style("padding","10px");var c=n.select("#menuElementContainer").node(),s=c.scrollWidth-c.clientWidth,f=n.select("#scrollLeftButton"),h=n.select("#scrollRightButton");0<s?(h.classed("hidden",!1),f.classed("hidden",!1),v.updateScrollButtonVisibility()):(h.classed("hidden",!0),f.classed("hidden",!0))}var o={},i=webvowl.graph(),a=i.graphOptions(),u=webvowl.util.languageTools(),l=e(317)(i),c=e(318)(i),s=e(319)(i),f=e(320)(i),h=e(321)(i),d=e(325)(i),p=e(326)(i),g=e(327)(i),v=e(328)(i),y=e(329)(i),m=e(330)(i),x=e(331)(i),b=e(332)(i),M=webvowl.modules.colorExternalsSwitch(i),w=webvowl.modules.compactNotationSwitch(i),S=webvowl.modules.datatypeFilter(),_=webvowl.modules.disjointFilter(),k=webvowl.modules.focuser(),C=webvowl.modules.emptyLiteralFilter(),E=webvowl.modules.nodeDegreeFilter(c),L=webvowl.modules.nodeScalingSwitch(i),A=webvowl.modules.objectPropertyFilter(),N=webvowl.modules.pickAndPin(),O=webvowl.modules.selectionDetailsDisplayer(m.updateSelectionInformation),T=webvowl.modules.statistics(),D=webvowl.modules.subclassFilter(),F=webvowl.modules.setOperatorFilter();return o.initialize=function(){window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)},a.graphContainerSelector("#graph"),a.selectionModules().push(k),a.selectionModules().push(O),a.selectionModules().push(N),a.filterModules().push(C),a.filterModules().push(T),a.filterModules().push(S),a.filterModules().push(A),a.filterModules().push(D),a.filterModules().push(_),a.filterModules().push(F),a.filterModules().push(L),a.filterModules().push(E),a.filterModules().push(w),a.filterModules().push(M),n.select(window).on("resize",r),l.setup(),s.setup(),c.setup(S,A,D,_,F,E),f.setup(N,L,w,M),d.setup(),m.setup(),b.setup();var e=function(){var t,n=-1;return/(?:\b(MS)?IE\s+|\bTrident\/7\.0;.*\s+rv:|\bEdge\/)(\d+)/.test(navigator.userAgent)?n=parseInt("12"):/Trident.*rv[ :]*11\./.test(navigator.userAgent)?n=parseInt("11"):("Microsoft Internet Explorer"===navigator.appName?(t=navigator.userAgent,null!==/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(t)&&(n=parseFloat(RegExp.$1))):"Netscape"===navigator.appName&&(t=navigator.userAgent,null!==/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(t)&&(n=parseFloat(RegExp.$1))),n)}();if(0<e&&11>=e)console.log("Agent version "+e),console.log("This agent is not supported"),n.select("#browserCheck").classed("hidden",!1),n.select("#killWarning").classed("hidden",!0),n.select("#optionsArea").classed("hidden",!0),n.select("#logo").classed("hidden",!0);else{n.select("#logo").classed("hidden",!1),12===e?(n.select("#browserCheck").classed("hidden",!1),n.select("#killWarning").classed("hidden",!1)):n.select("#browserCheck").classed("hidden",!0),p.setup([s,c,f,k,O,d]),g.setup(),v.setup(),y.setup(),a.literalFilter(C),a.loadingModule(b),a.filterMenu(c),a.modeMenu(f),a.gravityMenu(s),a.pausedMenu(d),a.pickAndPinModule(N),a.resetMenu(p),a.searchMenu(g),a.ontologyMenu(h),a.navigationMenu(v),a.sidebar(m),a.exportMenu(l),a.graphObject(i),a.zoomSlider(y),h.setup(t),x.setup(),i.start(),r();var o,u=i.options().width(),z=i.options().height();o=Math.min(u,z)/1e3,i.setDefaultZoom(o);var P=n.select("body");n.select(document).on("keydown",(function(){8===n.event.keyCode&&n.event.target===P.node()&&n.event.preventDefault()})),b.parseUrlAndLoadOntology()}},o}}).call(this,e(0))},317:function(t,n,e){(function(n){t.exports=function(t){function e(){n.select("#exportedUrl").node().focus(),n.select("#exportedUrl").node().select(),document.execCommand("copy"),t.options().navigationMenu().hideAllMenus()}function r(){t.options().navigationMenu().hideAllMenus();var e,r,i,u=n.select(t.options().graphContainerSelector()).select("svg");o(),n.selectAll(".hidden-in-export").style("display","none"),e=u.attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg").node().parentNode.innerHTML,r=function(t){var n,e,r,o=[],i=t.length;for(n=0;n<i;n++)e=t.charAt(n),128>(r=e.charCodeAt(0))?o.push(e):o.push("&#"+r+";");return o.join("")}(e="\x3c!-- Created with WebVOWL (version "+webvowl.version+"), http://vowl.visualdataweb.org --\x3e\n"+e),i="data:image/svg+xml;base64,"+btoa(r),l.attr("href",i).attr("download",c+".svg"),function(){n.selectAll(".text, .subtext, .text.instance-count, .external + text .instance-count, .cardinality, .text, .embedded, .class, .object, .disjoint, .objectproperty, .disjointwith, .equivalentproperty, .transitiveproperty, .functionalproperty, .inversefunctionalproperty, .symmetricproperty, .allvaluesfromproperty, .somevaluesfromproperty, .label .datatype, .datatypeproperty, .rdf, .rdfproperty, .literal, .node .datatype, .deprecated, .deprecatedproperty, .external, .externalproperty, path, .nofill, .symbol, .values-from.filled, marker path, .class, path, line, .fineline, .white, .subclass, .subclassproperty, .external + text, .class.hovered, .property.hovered, .cardinality.hovered, .cardinality.focused, circle.pin, .filled.hovered, .filled.focused, .focused, path.hovered, .indirect-highlighting, .feature:hover, .values-from, .class, path, line, .fineline, .dashed, .anonymous, .dotted, rect.focused, circle.focused, .nostroke, marker path").each((function(){var t=n.select(this),e=t.node().style;for(var r in e)if(e.hasOwnProperty(r)){if(a(t,r))continue;t.style(r,null)}t.datum&&void 0!==t.datum()&&t.datum().type&&"rdfs:subClassOf"===t.datum().type()&&t.style("fill",null)}));for(var t,e=n.select("#menuElementContainer").node().children,r=e.length,o=0;o<r;o++)t=e[o].id,n.select("#"+t).select("path").style("stroke-width","0"),n.select("#"+t).select("path").style("fill","#fff");n.select("#magnifyingGlass").style("stroke-width","0"),n.select("#magnifyingGlass").style("fill","#666")}(),n.selectAll(".hidden-in-export").style("display",null)}function o(){i(".text",[{name:"font-family",value:"Helvetica, Arial, sans-serif"},{name:"font-size",value:"12px"}]),i(".subtext",[{name:"font-size",value:"9px"}]),i(".text.instance-count",[{name:"fill",value:"#666"}]),i(".external + text .instance-count",[{name:"fill",value:"#aaa"}]),i(".cardinality",[{name:"font-size",value:"10px"}]),i(".text, .embedded",[{name:"pointer-events",value:"none"}]),i(".class, .object, .disjoint, .objectproperty, .disjointwith, .equivalentproperty, .transitiveproperty, .functionalproperty, .inversefunctionalproperty, .symmetricproperty, .allvaluesfromproperty, .somevaluesfromproperty",[{name:"fill",value:"#acf"}]),i(".label .datatype, .datatypeproperty",[{name:"fill",value:"#9c6"}]),i(".rdf, .rdfproperty",[{name:"fill",value:"#c9c"}]),i(".literal, .node .datatype",[{name:"fill",value:"#fc3"}]),i(".deprecated, .deprecatedproperty",[{name:"fill",value:"#ccc"}]),i(".external, .externalproperty",[{name:"fill",value:"#36c"}]),i("path, .nofill",[{name:"fill",value:"none"}]),i("marker path",[{name:"fill",value:"#000"}]),i(".class, path, line, .fineline",[{name:"stroke",value:"#000"}]),i(".white, .subclass, .subclassproperty, .external + text",[{name:"fill",value:"#fff"}]),i(".class.hovered, .property.hovered, .cardinality.hovered, .cardinality.focused, circle.pin, .filled.hovered, .filled.focused",[{name:"fill",value:"#f00"},{name:"cursor",value:"pointer"}]),i(".focused, path.hovered",[{name:"stroke",value:"#f00"}]),i(".indirect-highlighting, .feature:hover",[{name:"fill",value:"#f90"}]),i(".values-from",[{name:"stroke",value:"#69c"}]),i(".symbol, .values-from.filled",[{name:"fill",value:"#69c"}]),i(".class, path, line",[{name:"stroke-width",value:"2"}]),i(".fineline",[{name:"stroke-width",value:"1"}]),i(".dashed, .anonymous",[{name:"stroke-dasharray",value:"8"}]),i(".dotted",[{name:"stroke-dasharray",value:"3"}]),i("rect.focused, circle.focused",[{name:"stroke-width",value:"4px"}]),i(".nostroke",[{name:"stroke",value:"none"}]),i("marker path",[{name:"stroke-dasharray",value:"100"}])}function i(t,e){var r=n.selectAll(t);r.empty()||e.forEach((function(t){r.each((function(){var e=n.select(this);a(e,t.name)||e.style(t.name,t.value)}))}))}function a(t,n){return"fill"===n&&function(t){var n=t.datum();return void 0!==n&&n.backgroundColor&&!!n.backgroundColor()}(t)}function u(){if(t.options().navigationMenu().hideAllMenus(),!f)return alert("No graph data available."),void n.event.preventDefault();var e,r=t.graphNodeElements(),o=t.graphLabelElements(),i=JSON.parse(f),a=i._comment;-1===a.indexOf(" [Additional Information added by WebVOWL Exporter Version: @@WEBVOWL_VERSION]")&&(i._comment=a+" [Additional Information added by WebVOWL Exporter Version: @@WEBVOWL_VERSION]");var u,l=i.classAttribute,h=i.propertyAttribute;for(e=0;e<l.length;e++){var d=l[e];delete d.pos,delete d.pinned}for(e=0;e<h.length;e++)delete(u=h[e]).pos,delete u.pinned;r.each((function(t){var n=t.id();for(e=0;e<l.length;e++){var r=l[e];if(r.id===n){r.pos=[t.x,t.y],t.pinned()&&(r.pinned=!0);break}}}));for(var p,g=0;g<o.length;g++)for(p=o[g].property(),e=0;e<h.length;e++)if((u=h[e]).id===p.id()){u.pos=[o[g].x,o[g].y],o[g].pinned()&&(u.pinned=!0);break}i.settings={};var v=t.scaleFactor(),y=t.paused(),m=t.translation();i.settings.global={},i.settings.global.zoom=v,i.settings.global.translation=m,i.settings.global.paused=y;var x,b,M,w=t.options().classDistance(),S=t.options().datatypeDistance();i.settings.gravity={},i.settings.gravity.classDistance=w,i.settings.gravity.datatypeDistance=S;var _=t.options().filterMenu(),k=_.getCheckBoxContainer(),C=[];for(e=0;e<k.length;e++)x=k[e].checkbox.attr("id"),b=k[e].checkbox.property("checked"),(M={}).id=x,M.checked=b,C.push(M);var E=_.getDegreeSliderValue();i.settings.filter={},i.settings.filter.checkBox=C,i.settings.filter.degreeSliderValue=E;var L=t.options().modeMenu(),A=L.getCheckBoxContainer(),N=[];for(e=0;e<A.length;e++)x=A[e].attr("id"),b=A[e].property("checked"),(M={}).id=x,M.checked=b,N.push(M);var O=L.colorModeState();i.settings.modes={},i.settings.modes.checkBox=N,i.settings.modes.colorSwitchState=O;var T={_comment:i._comment,header:i.header,namespace:i.namespace,metrics:i.metrics,settings:i.settings,class:i.class,classAttribute:i.classAttribute,property:i.property,propertyAttribute:i.propertyAttribute},D=JSON.stringify(T,null,"  "),F="data:text/json;charset=utf-8,"+encodeURIComponent(D);s.attr("href",F).attr("download",c+".json")}var l,c,s,f,h={setup:function(){l=n.select("#exportSvg").on("click",r),s=n.select("#exportJson").on("click",u),n.select("#copyBt").on("click",e),n.select("#m_export").on("mouseover",(function(){t.options().searchMenu().hideSearchEntries(),h.exportAsUrl()}))},setFilename:function(t){c=t||"export"},setJsonText:function(t){f=t},exportAsUrl:function(){var e={sidebar:t.options().sidebar().getSidebarVisibility()},r=t.options().filterMenu().getDefaultDegreeValue(),o=t.options().filterMenu().getDegreeSliderValue();e.doc=parseInt(r)===parseInt(o)?-1:o,e.cd=t.options().classDistance(),e.dd=t.options().datatypeDistance(),e.filter_datatypes=t.options().filterMenu().getCheckBoxValue("datatypeFilterCheckbox")+"",e.filter_sco=t.options().filterMenu().getCheckBoxValue("subclassFilterCheckbox")+"",e.filter_disjoint=t.options().filterMenu().getCheckBoxValue("disjointFilterCheckbox")+"",e.filter_setOperator=t.options().filterMenu().getCheckBoxValue("setoperatorFilterCheckbox")+"",e.filter_objectProperties=t.options().filterMenu().getCheckBoxValue("objectPropertyFilterCheckbox")+"",e.mode_dynamic=t.options().dynamicLabelWidth()+"",e.mode_scaling=t.options().modeMenu().getCheckBoxValue("nodescalingModuleCheckbox")+"",e.mode_compact=t.options().modeMenu().getCheckBoxValue("compactnotationModuleCheckbox")+"",e.mode_colorExt=t.options().modeMenu().getCheckBoxValue("colorexternalsModuleCheckbox")+"",e.mode_multiColor=t.options().modeMenu().colorModeState()+"",e.rect=0;var i,a=function(t,n){var e=0,r="opts=";for(var o in t)if(t.hasOwnProperty(o)){var i=t[o],a=n[o];i!==a&&(r+=o+"="+a+";",e++)}return r+="",0==e?"":r}(t.options().defaultConfig(),e),u=location+"";if(0===a.length)return(i=n.select("#exportedUrl").node()).value=u,void(i.title=u);var l,c=(u.match(/#/g)||[]).length;if((void 0===c||0===c)&&(l=u+"#"+a),0<c){var s,f=u.split("#");for(0<=f[1].indexOf("opts=")?(f[1]=a,l=f[0]):(l=f[0]+"#",l+=a),s=1;s<f.length;s++)0<f[s].length&&(l+="#"+f[s])}(i=n.select("#exportedUrl").node()).value=l,i.focus(),i.select(),i.title=l}};return h}}).call(this,e(0))},318:function(t,n,e){(function(n){t.exports=function(t){function e(e,r,o,i){var a,u;a=n.select(i).append("div").classed("checkboxContainer",!0),u=a.append("input").classed("filterCheckbox",!0).attr("id",r+"FilterCheckbox").attr("type","checkbox").property("checked",e.enabled()),c.push({checkbox:u,defaultState:e.enabled()}),u.on("click",(function(n){var r=u.property("checked");e.enabled(r),!0!==n&&t.update()})),a.append("label").attr("for",r+"FilterCheckbox").text(o)}function r(n,e){var r,l;n.setMaxDegreeSetter((function(t){u.attr("max",t),i(u,Math.min(t,u.property("value")))})),n.setDegreeGetter((function(){return+u.property("value")})),n.setDegreeSetter((function(t){i(u,t)})),r=e.append("div").classed("distanceSliderContainer",!0),u=r.append("input").attr("id","nodeDegreeDistanceSlider").attr("type","range").attr("min",0).attr("step",1),r.append("label").classed("description",!0).attr("for","nodeDegreeDistanceSlider").text("Degree of collapsing"),l=r.append("label").classed("value",!0).attr("for","nodeDegreeDistanceSlider").text(0),u.on("change",(function(n){!0!==n&&(t.update(),a=u.property("value"))})),u.on("input",(function(){var t=u.property("value");l.text(t)})),u.on("wheel",o),u.on("focusout",(function(){u.property("value")!==a&&t.update()}))}function o(){var e,r=n.event;0>r.deltaY&&(e=1),0<r.deltaY&&(e=-1);var o=parseInt(u.property("value")),i=o+e;o!==i&&(u.property("value",i),u.on("input")(),t.update()),n.event.preventDefault()}function i(t,n){t.property("value",n).on("input")()}var a,u,l={},c=[],s=(n.select("#m_filter"),n.select("#c_filter a")),f=n.select("#nodeDegreeFilteringOption"),h=0;return l.setDefaultDegreeValue=function(t){h=t},l.getDefaultDegreeValue=function(){return h},l.getGraphObject=function(){return t},l.getCheckBoxContainer=function(){return c},l.getDegreeSliderValue=function(){return u.property("value")},l.setup=function(n,o,i,a,u,c){s.on("mouseover",(function(){t.options().searchMenu().hideSearchEntries()})),s.on("mouseleave",(function(){l.highlightForDegreeSlider(!1)})),e(n,"datatype","Datatype properties","#datatypeFilteringOption"),e(o,"objectProperty","Object properties","#objectPropertyFilteringOption"),e(i,"subclass","Solitary subclasses","#subclassFilteringOption"),e(a,"disjoint","Class disjointness","#disjointFilteringOption"),e(u,"setoperator","Set operators","#setOperatorFilteringOption"),r(c,f),s.node().addEventListener("animationend",(function(){s.classed("buttonPulse",!1),s.classed("filterMenuButtonHighlight",!0)}))},l.reset=function(){c.forEach((function(t){var n=t.checkbox,e=t.defaultState;n.property("checked")!==e&&(n.property("checked",e),n.on("click")())})),i(u,0),u.on("change")()},l.killButtonAnimation=function(){s.classed("buttonPulse",!1),s.classed("filterMenuButtonHighlight",!1)},l.highlightForDegreeSlider=function(t){if(arguments.length||(t=!0),s.classed("highlighted",t),f.classed("highlighted",t),!0===s.classed("buttonPulse")&&!0===t){s.classed("buttonPulse",!1);var n=setTimeout((function(){s.classed("buttonPulse",t),clearTimeout(n)}),100)}else s.classed("buttonPulse",t),s.classed("filterMenuButtonHighlight",t)},l.setCheckBoxValue=function(t,n){for(var e=0;e<c.length;e++)if(c[e].checkbox.attr("id")===t){c[e].checkbox.property("checked",n);break}},l.getCheckBoxValue=function(t){for(var n=0;n<c.length;n++)if(c[n].checkbox.attr("id")===t)return c[n].checkbox.property("checked")},l.setDegreeSliderValue=function(t){u.property("value",t)},l.getDegreeSliderValue=function(){return u.property("value")},l.updateSettings=function(){0<u.property("value")?l.highlightForDegreeSlider(!0):l.highlightForDegreeSlider(!1),c.forEach((function(t){t.checkbox.on("click")(!0)})),u.on("input")(),u.on("change")(!0)},l}}).call(this,e(0))},319:function(t,n,e){(function(n){t.exports=function(t){function e(e,o,a,u){var l,c,s=u(),f=(l=n.select(e).append("div").datum({distanceFunction:u}).classed("distanceSliderContainer",!0)).append("input").attr("id",o+"DistanceSlider").attr("type","range").attr("min",10).attr("max",600).attr("value",u()).attr("step",10);l.append("label").classed("description",!0).attr("for",o+"DistanceSlider").text(a),c=l.append("label").classed("value",!0).attr("for",o+"DistanceSlider").text(u()),i.push(f),f.on("focusout",(function(){t.updateStyle()})),f.on("input",(function(){var n=f.property("value");u(n),r(s),c.text(n),t.updateStyle()})),f.on("wheel",(function(){var t,e=n.event;0>e.deltaY&&(t=10),0<e.deltaY&&(t=-10);var r=parseInt(f.property("value")),o=r+t;o!==r&&(f.property("value",o),u(o),f.on("input")()),n.event.preventDefault()}))}function r(t){var n=Math.max(a.classDistance(),a.datatypeDistance());a.charge(u*(n/t))}var o={},i=[],a=t.graphOptions(),u=a.charge();return o.setup=function(){n.select("#m_gravity").on("mouseover",(function(){t.options().searchMenu().hideSearchEntries()})),e("#classSliderOption","class","Class distance",a.classDistance),e("#datatypeSliderOption","datatype","Datatype distance",a.datatypeDistance)},o.reset=function(){i.forEach((function(t){t.property("value",(function(t){return t.distanceFunction()})),t.on("input")()}))},o}}).call(this,e(0))},320:function(t,n,e){(function(n){t.exports=function(t){function e(e,r,o,i,a){var l=n.select(o).append("div").classed("checkboxContainer",!0),c=l.append("input").classed("moduleCheckbox",!0).attr("id",e+"ModuleCheckbox").attr("type","checkbox").property("checked",i());c.on("click",(function(){var e=c.property("checked");i(e),n.select("#maxLabelWidthSliderOption").classed("hidden",!e),0<a&&t.lazyRefresh()})),l.append("label").attr("for",e+"ModuleCheckbox").text(r),u=c}function r(e,r,o,i,a){var u,l;return u=n.select(i).append("div").classed("checkboxContainer",!0).datum({module:e,defaultState:e.enabled()}),l=u.append("input").classed("moduleCheckbox",!0).attr("id",r+"ModuleCheckbox").attr("type","checkbox").property("checked",e.enabled()),f.push(l),l.on("click",(function(n,e){var r=l.property("checked");n.module.enabled(r),a&&!0!==e&&t.update()})),u.append("label").attr("for",r+"ModuleCheckbox").text(o),u}function o(n,e){var r=n.append("button").datum({active:!1}).classed("color-mode-switch",!0);return i(r,e),r.on("click",(function(n){var o=r.datum();o.active=!o.active,i(r,e),e.enabled()&&!0!==n&&t.update()})),r}function i(t,n){var e=t.datum().active,r=function(t){return t?c:l}(e);t.classed("active",e).text(r.text),n&&n.colorModeType(r.type)}var a,u,l={text:"Multicolor",type:"same"},c={text:"Multicolor",type:"gradient"},s={},f=[];return s.colorModeState=function(t){return arguments.length?(a.datum().active=t,s):a.datum().active},s.setDynamicLabelWidth=function(t){u.property("checked",t)},s.getCheckBoxContainer=function(){return f},s.colorModeSwitch=function(){return a},s.setup=function(i,u,l,c){n.select("#m_modes").on("mouseover",(function(){t.options().searchMenu().hideSearchEntries()})),e("labelWidth","Dynamic label width","#dynamicLabelWidth",t.options().dynamicLabelWidth,1),r(i,"pickandpin","Pick & pin","#pickAndPinOption",!1),r(u,"nodescaling","Node scaling","#nodeScalingOption",!0),r(l,"compactnotation","Compact notation","#compactNotationOption",!0);var s=r(c,"colorexternals","Color externals","#colorExternalsOption",!0);a=o(s,c)},s.reset=function(){f.forEach((function(t){var n=t.datum().defaultState;t.property("checked")!==n&&(t.property("checked",n),t.on("click")(t.datum())),t.datum().module.reset()})),a.datum().active=!0,a.on("click")()},s.setCheckBoxValue=function(t,n){for(var e=0;e<f.length;e++)if(f[e].attr("id")===t){f[e].property("checked",n);break}},s.getCheckBoxValue=function(t){for(var n=0;n<f.length;n++)if(f[n].attr("id")===t)return f[n].property("checked")},s.setColorSwitchState=function(t){s.colorModeState(!t)},s.setColorSwitchStateUsingURL=function(t){s.colorModeState(!t),a.on("click")(!0)},s.updateSettingsUsingURL=function(){f.forEach((function(t){t.on("click")(t.datum(),!0)}))},s.updateSettings=function(){f.forEach((function(t){t.on("click")(t.datum(),!0)})),a.on("click")(!0)},s}}).call(this,e(0))},321:function(t,n,e){(function(n){e(322);t.exports=function(t){function e(){n.select(window).on("hashchange",(function(){var t=n.event.oldURL,e=n.event.newURL;if(t!==e){if(e===t+"#")return;r(),m.parseUrlAndLoadOntology()}})),r()}function r(){n.selectAll("#menuElementContainer > li > a").attr("href",location.hash||"#")}function o(t){n.select("#bulletPoint_container").append("div").node().innerHTML=t,m.scrollDownDetails()}function i(t){var e=n.select("#o2vConverterContainer");e.node()||((e=n.select("#bulletPoint_container").append("div").append("ul")).attr("id","o2vConverterContainer"),e.style("margin-left","-25px"));for(var r=e.node().children,o=r.length,i=0;i<o;i++)r[0].remove();for(var a,u,l=t.split("* "),c=0;c<l.length;c++)0<(u=l[c]).length&&((a=e.append("li")).attr("type","disc"),a.node().innerHTML=u.replace(/\n/g,"<br>"));a&&(a.node().innerHTML+="<br>"),m.scrollDownDetails()}function a(t,e){n.xhr("loadingStatus?sessionId="+y,"application/text",(function(n,r){n&&(console.log("ontologyMenu getLoadingStatusOnceCallBacked throws error"),console.log("---------Error -----------"),console.log(n),console.log("---------Request -----------"),console.log(r)),i(r.responseText),t(e)}))}function u(){clearTimeout(v),!1===S&&(v=setTimeout((function(){n.xhr("loadingStatus?sessionId="+y,"application/text",(function(t,n){t&&(console.log("ontologyMenu getLoadingStatusTimeLooped throws error"),console.log("---------Error -----------"),console.log(t),console.log("---------Request -----------"),console.log(n)),!1===S&&(i(n.responseText),u())}))}),1e3))}function l(t){n.xhr("loadingStatus","application/text",(function(n,e){void 0===e?o(t):i(e.responseText+"<br>"+t)}))}function c(t){var n=t[2];return n===y?(m.loadFromOWL2VOWL(t[0],t[1]),void b.conversionFinished()):(console.log("The conversion process for file:"+t[1]+" has been canceled!"),void b.conversionFinished(n))}function s(t){return t[2]===y?void m.loadFromOWL2VOWL(t[0],t[1]):void console.log("The conversion process for file:"+t[1]+" has been canceled!")}function f(n){var e=n[0],r=n[1],i=n[2];return i===y?(l('<br><span style=\'color:red\'> Failed to convert the file.</span>  Ontology could not be loaded.<br>Is it a valid OWL ontology? Please check with <a target="_blank"href="http://visualdataweb.de/validator/">OWL Validator</a>'),null!==e&&500===e.status&&o("<span style='color:red'>Could not find ontology  at the URL</span>"),r&&0===r.responseText.length&&o("<span style='color:red'>Received empty graph</span>"),t.handleOnLoadingError(),void b.conversionFinished()):(console.log("This thread has been canceled!!"),void b.conversionFinished(i))}function h(n){var e=n[0],r=n[1];return n[2]===y?(null!==e&&500===e.status&&o("<span style='color:red'>Could not find json at the URL</span>"),r&&0===r.responseText.length&&o("<span style='color:red'>Received empty graph</span>"),t.handleOnLoadingError(),void b.conversionFinished()):void console.log("The loading process of JSON_URL has been canceled!")}function d(n){var e=n[0],r=n[1],o=n[2];return o===y?void(200===e.status?(m.loadFromOWL2VOWL(e.responseText,r),b.conversionFinished()):(l('Failed to convert the file. Ontology could not be loaded.<br>Is it a valid OWL ontology? Please check with <a target="_blank"href="http://visualdataweb.de/validator/">OWL Validator</a>'),t.handleOnLoadingError(),b.conversionFinished())):(console.log("The conversion process for file:"+r+" has been canceled!"),void b.conversionFinished(o))}function p(){function t(){e.style("display",void 0),clearTimeout(g),n.select(window).on("click",void 0).on("keydown",void 0),e.on("mouseover",void 0)}var e=n.select("#select .toolTipMenu");e.on("click",(function(){n.event.stopPropagation()})).on("keydown",(function(){n.event.stopPropagation()})),e.style("display","block"),clearTimeout(g),g=setTimeout((function(){t()}),3e3),n.select(window).on("click",(function(){t()})).on("keydown",(function(){t()})),e.on("mouseover",(function(){t()}))}var g,v,y,m,x,b={},M=n.select("#loading-info"),w=n.select("#loading-progress"),S=!1,_={};return String.prototype.beginsWith=function(t){return 0===this.indexOf(t)},b.getLoadingFunction=function(){return x},b.cachedOntology=function(t){return _[t]},b.setCachedOntology=function(t,n){_[t]=n},b.getErrorStatus=function(){return!1},b.setup=function(r){x=r,m=t.options().loadingModule(),n.select("#m_select").on("mouseover",(function(){t.options().searchMenu().hideSearchEntries()})),function(){var t=n.select("#iri-converter-button"),e=n.select("#iri-converter-input");e.on("input",(function(){p();var n=""===e.property("value");t.attr("disabled",n||void 0)})).on("click",(function(){p()})),n.select("#iri-converter-form").on("submit",(function(){for(var t=e.property("value"),r=t.replace(/%20/g," ");r.beginsWith(" ");)r=r.substr(1,r.length);for(;r.endsWith(" ");)r=r.substr(0,r.length-1);return(t=r).toLowerCase().endsWith(".json")?(location.hash="url="+t,e.property("value",""),e.on("input")()):(location.hash="iri="+t,e.property("value",""),e.on("input")()),n.event.preventDefault(),!1}))}(),function(){var e=n.select("#file-converter-input"),r=n.select("#file-converter-label"),o=n.select("#file-converter-button");e.on("change",(function(){var n=e.property("files");0>=n.length?(r.text("Select ontology file"),o.property("disabled",!0)):(r.text(n[0].name),n[0].name,o.property("disabled",!1),o.node().click(),t.options().navigationMenu().hideAllMenus())})),o.on("click",(function(){var t=e.property("files")[0];if(!t)return!1;var n="file="+t.name;location.hash==="#"+n?m.parseUrlAndLoadOntology():location.hash=n}))}(),e(),m.setOntologyMenu(b)},b.stopLoadingTimer=function(){S=!0,clearTimeout(v)},b.setIriText=function(t){n.select("#iri-converter-input").node().value=t,n.select("#iri-converter-button").attr("disabled",!1),n.select("#iri-converter-form").on("submit")()},b.clearDetailInformation=function(){for(var t=n.select("#bulletPoint_container").node().children,e=t.length,r=0;r<e;r++)t[0].remove()},b.append_message=function(t){o(t)},b.append_message_toLastBulletPoint=function(t){!function(t){var e=n.select("#bulletPoint_container").node().getElementsByTagName("LI"),r=e.length-1;if(0<=r){var o=e[r].innerHTML;e[r].innerHTML=o+t}m.scrollDownDetails()}(t)},b.append_bulletPoint=function(t){!function(t){n.select("#bulletPoint_container").append("li").node().innerHTML=t,n.select("#currentLoadingStep").node().innerHTML=t,m.scrollDownDetails()}(t)},b.setLoadingStatusInfo=function(t){i(t)},b.setConversionID=function(t){y=t},b.callbackLoad_Ontology_FromIRI=function(t){var e=t[0],r=t[1],o=t[2];S=!1,u(),n.xhr(e,"application/json",(function(t,n){(null!==t&&500===t.status||n&&0===n.responseText.length)&&(clearTimeout(v),S=!0,a(f,[t,n,o])),!t&&(clearTimeout(v),S=!0,a(c,[n.responseText,r,o]))}))},b.getConversionId=function(){return y},b.callbackLoad_JSON_FromURL=function(t){var e=t[0],r=t[1],o=t[2];S=!1,u(),n.xhr(e,"application/json",(function(t,n){var e=!t;((null!==t&&500===t.status||n&&0===n.responseText.length)&&(clearTimeout(v),S=!0,e=!1,console.log(n),console.log(n.responseText.length),a(h,[t,n,o])),e)&&(clearTimeout(v),S=!0,a(s,[n.responseText,r,o]))}))},b.callbackLoadFromOntology=function(t,n,e){!function(t,n,e){S=!1,u();var r=new FormData;r.append("ontology",t),r.append("sessionId",e);var o=new XMLHttpRequest;o.open("POST","convert",!0),o.onload=function(){clearTimeout(v),S=!0,a(d,[o,n,e])},u(),o.send(r)}(t,n,e)},b.conversionFinished=function(t){var e=y;t&&(e=t),n.xhr("conversionDone?sessionId="+e,"application/text",(function(t,n){t&&(console.log("ontologyMenu conversionFinished throws error"),console.log("---------Error -----------"),console.log(t),console.log("---------Request -----------"),console.log(n))}))},b.showLoadingStatus=function(t){!0===t?(n.select("#layoutLoadingProgressBarContainer").classed("hidden",!1),M.classed("hidden",!1),w.classed("hidden",!1)):M.classed("hidden",!0)},b}}).call(this,e(0))},322:function(t,n,e){var r=e(66),o=e(323),i=/&(?:amp|lt|gt|quot|#39);/g,a=RegExp(i.source);t.exports=function(t){return(t=r(t))&&a.test(t)?t.replace(i,o):t}},323:function(t,n,e){var r=e(324)({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});t.exports=r},324:function(t,n){t.exports=function(t){return function(n){return null==t?void 0:t[n]}}},325:function(t,n,e){(function(n){t.exports=function(t){function e(){r.classed("paused",(function(t){return t.paused})),r.datum().paused?r.text("Resume"):r.text("Pause")}var r,o={setup:function(){n.select("#pauseOption").on("mouseover",(function(){t.options().searchMenu().hideSearchEntries()})),r=n.select("#pause-button").datum({paused:!1}).on("click",(function(n){t.paused(!n.paused),n.paused=!n.paused,e(),r.classed("highlighted",n.paused)})),e()},setPauseValue:function(n){r.datum().paused=n,t.paused(n),r.classed("highlighted",n),e()},reset:function(){o.setPauseValue(!1)}};return o}}).call(this,e(0))},326:function(t,n,e){(function(n){t.exports=function(t){function e(){t.resetSearchHighlight(),t.options().searchMenu().clearText(),i.classDistance(a.classDistance()),i.datatypeDistance(a.datatypeDistance()),i.charge(a.charge()),i.gravity(a.gravity()),i.linkStrength(a.linkStrength()),t.reset(),r.forEach((function(t){t.reset()})),t.updateStyle()}var r,o={},i=t.graphOptions(),a=webvowl.options();return o.setup=function(o){r=o,n.select("#reset-button").on("click",e),n.select("#resetOption").on("mouseover",(function(){t.options().searchMenu().hideSearchEntries()}))},o}}).call(this,e(0))},327:function(t,n,e){(function(n){t.exports=function(t){function e(){f=t.getUpdateDictionary(),v=!1,p=[],g=[];var n,e=[],r=[];for(n=0;n<f.length;n++){var o=f[n].labelForCurrentLanguage();if(e.push(f[n].id()),r.push(o),f[n].equivalents&&0<f[n].equivalents().length)for(var i=f[n].equivalentsString().split(", "),a=0;a<i.length;a++)e.push(f[n].id()),r.push(i[a])}c=[],s=[];var u,l,h=-1;for(n=0;n<r.length;n++)if(0!==n)if(u=r[n],l=e[n],-1===(h=c.indexOf(u))){c.push(r[n]),s.push([]);var d=s.length;s[d-1].push(l)}else s[h].push(l);else c.push(r[n]),s.push([]),s[0].push(e[n]);for(n=0;n<c.length;n++){for(var y=c[n],m=s[n],x="[ ",b=0;b<m.length;b++)x+=m[b].toString(),x+=", ";x=x.substring(0,x.length-2),x+=" ]";var M=m[0];if(1<m.length){for(var w=!0,S=0;S<m.length;S++)m[S]!==M&&(w=!1);!0===w?p.push(y):p.push(y+" ("+m.length+")")}else p.push(y);g.push(y)}}function r(){d.showSearchEntries()}function o(){y?d.hideSearchEntries():d.showSearchEntries()}function i(){v&&e();var r,o=x.node().children,i=o.length,a=0,u=-1;for(r=0;r<i;r++){"dbEntrySelected"===o[r].getAttribute("class")&&(u=r)}if(13===n.event.keyCode)if(0<=u&&u<i)o[u].onclick(),d.hideSearchEntries();else if(0===i){for(var c=(h=l.node().value).replace(/%20/g," ");c.beginsWith(" ");)c=c.substr(1,c.length);for(;c.endsWith(" ");)c=c.substr(0,c.length-1);var s=c.replace(/ /g,"%20");if(function(t){return/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/.test(t)}(s))t.options().ontologyMenu().setIriText(s),l.node().value="";else console.log(s+" is not a valid URL!")}38===n.event.keyCode&&(a=-1,d.showSearchEntries()),40===n.event.keyCode&&(a=1,d.showSearchEntries());var f=u+a;f!==u&&(0>f&&0>=u&&o[0].setAttribute("class","dbEntrySelected"),f>=i&&o[u].setAttribute("class","dbEntrySelected"),0<=f&&f<i&&(o[f].setAttribute("class","dbEntrySelected"),0<=u&&o[u].setAttribute("class","dbEntry")))}function a(){if(v&&e(),t.resetSearchHighlight(),0!==p.length){var n,r=x.node().children,o=r.length;if(h=l.node().value,m.classed("highlighted",!1),m.node().title="Nothing to locate, enter search term.",0!==h.length){var i,a=[],c=[],s=h.toLowerCase();for(n=0;n<p.length;n++){void 0!==p[n]&&(-1<(i=p[n].toLowerCase()).indexOf(s)&&(a.push(p[n]),c.push(n)))}for(o=(r=x.node().children).length,n=0;n<o;n++)r[0].remove();var f=a;6<(o=a.length)&&(o=6);var g=[],y=[];for(n=0;n<o;n++){for(var b=1e8,M=1e8,w=-1,S=0;S<f.length;S++){var _=(i=f[S].toLowerCase()).indexOf(s),k=i.length;-1<_&&_<=b&&k<=M&&(w=S,b=_,M=k)}g.push(f[w]),y.push(c[w]),f[w]=""}for(n=0;n<o;n++){var C;(C=document.createElement("li")).setAttribute("elementID",y[n]),C.setAttribute("class","dbEntry"),C.onclick=u(y[n]);var E=document.createTextNode(g[n]);C.appendChild(E),x.node().appendChild(C)}d.showSearchEntries()}else for(n=0;n<o;n++)r[0].remove()}else console.log("dictionary is empty")}function u(n){return function(){var e=n,r=s[e],o=g[e];l.node().value=o,t.resetSearchHighlight(),t.highLightNodes(r),m.node().title="Locate search term",o!==h&&function(){var t,n,e,r,o=[],i=[],a=(h=l.node().value).toLowerCase();for(e=0;e<p.length;e++){void 0!==p[e]&&(-1<(r=p[e].toLowerCase()).indexOf(a)&&(o.push(p[e]),i.push(e)))}for(n=(t=x.node().children).length,e=0;e<n;e++)t[0].remove();var c=o;6<(n=o.length)&&(n=6);var s=[],f=[];for(e=0;e<n;e++){for(var d=1e6,g=1e6,v=-1,y=0;y<c.length;y++){var m=(r=c[y].toLowerCase()).indexOf(a),b=r.length;-1<m&&m<=d&&b<=g&&(v=y,d=m,g=b)}s.push(c[v]),f.push(i[v]),c[v]=""}for(6<(n=o.length)&&(n=6),e=0;e<n;e++){var M=document.createElement("li");M.setAttribute("elementID",f[e]),M.onclick=u(f[e]),M.setAttribute("class","dbEntry");var w=document.createTextNode(s[e]);M.appendChild(w),x.node().appendChild(M)}}(),d.hideSearchEntries()}}var l,c,s,f,h,d={},p=[],g=[],v=!0,y=!1,m=n.select("#locateSearchResult"),x=(n.select("#c_search"),n.select("#m_search"));return String.prototype.beginsWith=function(t){return 0===this.indexOf(t)},d.requestDictionaryUpdate=function(){v=!0;for(var t=x.node().children,n=t.length,e=0;e<n;e++)t[0].remove();l.node().value=""},d.setup=function(){p=[],(l=n.select("#search-input-text")).on("input",a),l.on("keydown",i),l.on("click",o),l.on("mouseover",r),m.on("click",(function(){t.locateSearchResult()})),m.on("mouseover",(function(){d.hideSearchEntries()}))},d.hideSearchEntries=function(){x.style("display","none"),y=!1},d.showSearchEntries=function(){x.style("display","block"),y=!0},d.getSearchString=function(){return l.node().value},d.clearText=function(){l.node().value="",m.classed("highlighted",!1),m.node().title="Nothing to locate, enter search term.";for(var t=x.node().children,n=t.length,e=0;e<n;e++)t[0].remove()},d}}).call(this,e(0))},328:function(t,n,e){(function(n){t.exports=function(t){function e(){cancelAnimationFrame(p),cancelAnimationFrame(g)}function r(){return s+=5,y.scrollLeft=s,v.updateScrollButtonVisibility(),s>=f?void e():void(g=requestAnimationFrame(r))}function o(){return s-=5,y.scrollLeft=s,v.updateScrollButtonVisibility(),0>=s?void e():void(g=requestAnimationFrame(o))}function i(){v.hideAllMenus(),M||c(this.id)}function a(){!function(t){d=n.select("#"+t),"c_search"!==t&&(n.select("#"+t).select("path").style("stroke-width","0"),n.select("#"+t).select("path").style("fill","#fff"))}(this.id)}function u(){var t=S[w.indexOf(this.id)];if(t){var e=n.select("#"+t);e&&("block"===e.style("display")?e.style("display","none"):c(this.id))}}function l(){M=!0}function c(e){d=n.select("#"+e).node();var r=S[w.indexOf(e)];r&&("c_search"!==e&&(n.select("#"+e).select("path").style("stroke-width","0"),n.select("#"+e).select("path").style("fill","#bdc3c7")),(h=n.select("#"+r)).style("display","block"),"m_export"===r&&t.options().exportMenu().exportAsUrl(),function(){if(d){var t=d.offsetLeft,n=y.scrollLeft,e=Math.max(0,t-n),r=y.getBoundingClientRect().width,o=h.node().getBoundingClientRect().width;e+o>r&&(e=r-o),e=Math.max(0,e),h.style("left",e+"px")}}())}var s,f,h,d,p,g,v={},y=n.select("#menuElementContainer").node(),m=n.select("#menuContainer").node(),x=n.select("#scrollLeftButton"),b=n.select("#scrollRightButton"),M=!1,w=[],S=[];return v.hideAllMenus=function(){n.selectAll(".toolTipMenu").style("display","none")},v.updateScrollButtonVisibility=function(){f=y.scrollWidth-y.clientWidth-2,0===y.scrollLeft?x.classed("hidden",!0):x.classed("hidden",!1),y.scrollLeft>f?b.classed("hidden",!0):b.classed("hidden",!1)},v.setup=function(){(function(){w=[],S=[];var t,c=[],f=[],h=y.children,d=h.length;for(t=0;t<d;t++)c.push(h[t].id.slice(2));var x=m.children;for(d=x.length,t=0;t<d;t++)f.push(x[t].id.slice(2));for(d=h.length,t=0;t<d;t++)w[t]="c_"+c[t],S[t]=-1<f.indexOf(c[t])?"m_"+c[t]:void 0,n.select("#"+w[t]).on("mouseover",i),n.select("#"+w[t]).on("mouseout",a),n.select("#"+w[t]).on("click",u),n.select("#"+w[t]).on("touchstart",l);n.select("#menuElementContainer").on("wheel",(function(){var t,e=n.event;0>e.deltaY&&(t=20),0<e.deltaY&&(t=-20),y.scrollLeft+=t,v.hideAllMenus(),v.updateScrollButtonVisibility()})),n.select("#scrollRightButton").on("mousedown",(function(){s=y.scrollLeft,v.hideAllMenus(),g=requestAnimationFrame(r)})).on("touchstart",(function(){s=y.scrollLeft,v.hideAllMenus(),g=requestAnimationFrame(r)})).on("mouseup",e).on("touchend",e).on("touchcancel",e),n.select("#scrollLeftButton").on("mousedown",(function(){s=y.scrollLeft,v.hideAllMenus(),p=requestAnimationFrame(o)})).on("touchstart",(function(){s=y.scrollLeft,v.hideAllMenus(),p=requestAnimationFrame(o)})).on("mouseup",e).on("touchend",e).on("touchcancel",e),n.select("#menuElementContainer").on("scroll",(function(){v.updateScrollButtonVisibility(),v.hideAllMenus()}))})(),n.select("#graph").on("mouseover",(function(){v.hideAllMenus()})),n.select("#generalDetails").on("mouseover",(function(){v.hideAllMenus()}))},v}}).call(this,e(0))},329:function(t,n,e){(function(n){t.exports=function(t){function e(){cancelAnimationFrame(a),cancelAnimationFrame(u)}function r(){(l*=.98)<f&&(l=f),t.setSliderZoom(l),a=requestAnimationFrame(r)}function o(){(l*=1.02)>h&&(l=h),t.setSliderZoom(l),u=requestAnimationFrame(o)}var i,a,u,l,c,s={},f=t.options().minMagnification(),h=t.options().maxMagnification(),d=!0,p=t.options().width(),g=t.options().height();return i=Math.min(p,g)/1e3,s.setup=function(){c=n.select("#zoomSliderParagraph").append("input").datum({}).attr("id","zoomSliderElement").attr("type","range").attr("value",i).attr("min",f).attr("max",h).attr("step",(h-f)/40).attr("title","zoom factor").on("input",(function(){s.zooming()})),n.select("#zoomOutButton").on("mousedown",(function(){t.options().navigationMenu().hideAllMenus(),l=t.scaleFactor(),a=requestAnimationFrame(r)})).on("touchstart",(function(){t.options().navigationMenu().hideAllMenus(),l=t.scaleFactor(),a=requestAnimationFrame(r)})).on("mouseup",e).on("touchend",e).on("touchcancel",e).attr("title","zoom out"),n.select("#zoomInButton").on("mousedown",(function(){t.options().navigationMenu().hideAllMenus(),l=t.scaleFactor(),u=requestAnimationFrame(o)})).on("touchstart",(function(){t.options().navigationMenu().hideAllMenus(),l=t.scaleFactor(),u=requestAnimationFrame(o)})).on("mouseup",e).on("touchend",e).on("touchcancel",e).attr("title","zoom in"),n.select("#centerGraphButton").on("click",(function(){t.options().navigationMenu().hideAllMenus(),t.forceRelocationEvent()})).attr("title","center graph")},s.showSlider=function(t){return arguments.length?(n.select("#zoomSlider").classed("hidden",!t),void(d=t)):d},s.zooming=function(){t.options().navigationMenu().hideAllMenus();var n=c.property("value");c.attr("value",n),t.setSliderZoom(n)},s.updateZoomSliderValue=function(t){c&&(c.attr("value",t),c.property("value",t))},s}}).call(this,e(0))},33:function(t,n,e){(function(n){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r="object"==(void 0===n?"undefined":e(n))&&n&&n.Object===Object&&n;t.exports=r}).call(this,e(31))},330:function(t,n,e){(function(n){t.exports=function(t){function e(e){(e=e||[]).sort((function(t,n){return t===webvowl.util.constants().LANG_IRIBASED?-1:n===webvowl.util.constants().LANG_IRIBASED?1:t===webvowl.util.constants().LANG_UNDEFINED?-1:n===webvowl.util.constants().LANG_UNDEFINED?1:t.localeCompare(n)}));var i=n.select("#language").on("change",(function(){t.language(n.event.target.value),o(),m.updateSelectionInformation(y)}));i.selectAll("option").remove(),i.selectAll("option").data(e).enter().append("option").attr("value",(function(t){return t})).text((function(t){return t})),r(i,e,"en")||r(i,e,webvowl.util.constants().LANG_UNDEFINED)||r(i,e,webvowl.util.constants().LANG_IRIBASED)}function r(n,e,r){var o=e.indexOf(r);return!!(0<=o)&&(n.property("selectedIndex",o),t.language(r),!0)}function o(){var e=t.graphOptions().subtitle(),r=t.graphOptions().title();n.select("#logo h2").text(r),n.select("#title").text(e),n.select("#about").attr("href",v.iri).attr("target","_blank").text(v.iri),n.select("#version").text(v.version||"--");var o=v.author;"string"==typeof o?n.select("#authors").text(o):o instanceof Array?n.select("#authors").text(o.join(", ")):n.select("#authors").text("--");var i=x.textInLanguage(v.description,t.language());n.select("#description").text(i||"No description available.")}function i(t,e){e=e||{};var r=[];for(var o in e)e.hasOwnProperty(o)&&r.push(e[o][0]);t.selectAll(".annotation").remove(),t.selectAll(".annotation").data(r).enter().append("p").classed("annotation",!0).classed("statisticDetails",!0).text((function(t){return t.identifier+":"})).append("span").each((function(t){s(n.select(this),t.value,"iri"===t.type?t.value:void 0)}))}function a(){u(!1,!1,!0)}function u(t,e,r){n.select("#classSelectionInformation").classed("hidden",!t),n.select("#propertySelectionInformation").classed("hidden",!e),n.select("#noSelectionInformation").classed("hidden",!r)}function l(t){u(!1,!0,!1),c(n.select("#propname"),t.labelForCurrentLanguage(),t.iri()),n.select("#typeProp").text(t.type()),void 0===t.inverse()?n.select("#inverse").classed("hidden",!0):(n.select("#inverse").classed("hidden",!1),c(n.select("#inverse span"),t.inverse().labelForCurrentLanguage(),t.inverse().iri())),p(n.select("#propEquivUri"),t.equivalents()),p(n.select("#subproperties"),t.subproperties()),p(n.select("#superproperties"),t.superproperties()),void 0===t.minCardinality()?void 0===t.cardinality()?(n.select("#infoCardinality").classed("hidden",!0),n.select("#minCardinality").classed("hidden",!0),n.select("#maxCardinality").classed("hidden",!0)):(n.select("#minCardinality").classed("hidden",!0),n.select("#maxCardinality").classed("hidden",!0),n.select("#infoCardinality").classed("hidden",!1),n.select("#infoCardinality span").text(t.cardinality())):(n.select("#infoCardinality").classed("hidden",!0),n.select("#minCardinality").classed("hidden",!1),n.select("#minCardinality span").text(t.minCardinality()),n.select("#maxCardinality").classed("hidden",!1),void 0===t.maxCardinality()?n.select("#maxCardinality span").text("*"):n.select("#maxCardinality span").text(t.maxCardinality())),c(n.select("#domain"),t.domain().labelForCurrentLanguage(),t.domain().iri()),c(n.select("#range"),t.range().labelForCurrentLanguage(),t.range().iri()),f(t.attributes(),n.select("#propAttributes")),g(n.select("#propDescription"),t.descriptionForCurrentLanguage()),g(n.select("#propComment"),t.commentForCurrentLanguage()),i(n.select("#propertySelectionInformation"),t.annotations())}function c(t,e,r){var o=n.select(t.node().parentNode);e?(t.selectAll("*").remove(),s(t,e,r),o.classed("hidden",!1)):o.classed("hidden",!0)}function s(t,n,e){(e?t.append("a").attr("href",e).attr("title",e).attr("target","_blank"):t.append("span")).text(n)}function f(t,e){var r=n.select(e.node().parentNode);t&&0<t.length&&(h("object",t),h("datatype",t),h("rdf",t)),t&&0<t.length?(e.text(t.join(", ")),r.classed("hidden",!1)):r.classed("hidden",!0)}function h(t,n){var e=n.indexOf(t);-1<e&&n.splice(e,1)}function d(t){u(!0,!1,!1),c(n.select("#name"),t.labelForCurrentLanguage(),t.iri()),p(n.select("#classEquivUri"),t.equivalents()),n.select("#typeNode").text(t.type()),p(n.select("#individuals"),t.individuals());var e=n.select("#disjointNodes"),r=n.select(e.node().parentNode);void 0===t.disjointWith()?r.classed("hidden",!0):(e.selectAll("*").remove(),t.disjointWith().forEach((function(t,n){0<n&&e.append("span").text(", "),s(e,t.labelForCurrentLanguage(),t.iri())})),r.classed("hidden",!1)),f(t.attributes(),n.select("#classAttributes")),g(n.select("#nodeDescription"),t.descriptionForCurrentLanguage()),g(n.select("#nodeComment"),t.commentForCurrentLanguage()),i(n.select("#classSelectionInformation"),t.annotations())}function p(t,e){var r=n.select(t.node().parentNode);e&&e.length?(t.selectAll("*").remove(),e.forEach((function(n,e){0<e&&t.append("span").text(", "),s(t,n.labelForCurrentLanguage(),n.iri())})),r.classed("hidden",!1)):r.classed("hidden",!0)}function g(t,e){var r=n.select(t.node().parentNode);e&&t.text(e),r.classed("hidden",!e)}var v,y,m={},x=webvowl.util.languageTools(),b=webvowl.util.elementTools(),M=1,w=n.select("#detailsArea"),S=n.select("#canvasArea"),_=n.select("#swipeBarContainer"),k=n.select("#sidebarExpandButton");return m.clearOntologyInformation=function(){n.select("#title").text("No title available"),n.select("#about").attr("href","#").attr("target","_blank").text("not given"),n.select("#version").text("--"),n.select("#authors").text("--"),n.select("#description").text("No description available."),n.select("#ontology-metadata").selectAll("*").remove(),n.select("#classCount").text("0"),n.select("#objectPropertyCount").text("0"),n.select("#datatypePropertyCount").text("0"),n.select("#individualCount").text("0"),n.select("#nodeCount").text("0"),n.select("#edgeCount").text("0"),n.select("#selection-details-trigger").classed("accordion-trigger-active")&&n.select("#selection-details-trigger").node().click(),a()},m.updateOntologyInformation=function(t,r){v=(t=t||{}).header||{},o(),function(t,e){t=t||{},n.select("#classCount").text(t.classCount||e.classCount()),n.select("#objectPropertyCount").text(t.objectPropertyCount||e.objectPropertyCount()),n.select("#datatypePropertyCount").text(t.datatypePropertyCount||e.datatypePropertyCount()),n.select("#individualCount").text(t.totalIndividualCount||e.totalIndividualCount()),n.select("#nodeCount").text(e.nodeCount()),n.select("#edgeCount").text(e.edgeCount())}(void 0,r),function(t){var e=n.select("#ontology-metadata");e.selectAll("*").remove(),i(e,t),0>=e.selectAll(".annotation").size()&&e.append("p").text("No annotations available.")}(v.other),m.updateSelectionInformation(void 0),e(v.languages)},m.updateSelectionInformation=function(t){if(y=t,!n.event||!n.event.defaultPrevented){var e=n.select("#selection-details-trigger").classed("accordion-trigger-active");if(t&&!e)n.select("#selection-details-trigger").node().click();else if(!t&&e)return void a();b.isProperty(t)?l(t):b.isNode(t)&&d(t)}},m.showSidebar=function(n,e){1===n&&(M=!0,k.node().innerHTML=">",w.classed("hidden",!0),!0===e?(w.classed("hidden",!M),S.style("width","78%"),S.style("-webkit-animation-name","none"),_.style("width","78%"),_.style("-webkit-animation-name","none")):(S.style("width","78%"),S.style("-webkit-animation-name","sbCollapseAnimation"),S.style("-webkit-animation-duration","0.5s"),_.style("width","78%"),_.style("-webkit-animation-name","sbCollapseAnimation"),_.style("-webkit-animation-duration","0.5s")),t.options().width(window.innerWidth-.22*window.innerWidth),t.options().navigationMenu().updateScrollButtonVisibility()),0===n&&(M=!1,w.classed("hidden",!0),k.node().innerHTML="<",!0===e?(S.style("width","100%"),S.style("-webkit-animation-name","none"),_.style("width","100%"),_.style("-webkit-animation-name","none")):(S.style("width","100%"),S.style("-webkit-animation-name","sbExpandAnimation"),S.style("-webkit-animation-duration","0.5s"),_.style("width","100%"),_.style("-webkit-animation-name","sbExpandAnimation"),_.style("-webkit-animation-duration","0.5s")),t.options().width(window.innerWidth),t.updateCanvasContainerSize(),t.options().navigationMenu().updateScrollButtonVisibility())},m.isSidebarVisible=function(){return M},m.updateSideBarVis=function(t){var n=m.getSidebarVisibility();m.showSidebar(parseInt(n),t)},m.getSidebarVisibility=function(){var t=w.classed("hidden");return!1===t?"1":!0===t?"0":void 0},m.initSideBarAnimation=function(){S.node().addEventListener("animationend",(function(){w.classed("hidden",!M),t.updateCanvasContainerSize(),t.options().navigationMenu().updateScrollButtonVisibility()}))},m.setup=function(){(function(){function t(t){t.classed("hidden",!0)}var e=n.selectAll(".accordion-trigger");t(n.selectAll(".accordion-trigger:not(.accordion-trigger-active) + div")),e.on("click",(function(){var e=n.select(this),r=n.selectAll(".accordion-trigger-active");e.classed("accordion-trigger-active")?(t(n.select(e.node().nextElementSibling)),e.classed("accordion-trigger-active",!1)):(t(n.selectAll(".accordion-trigger-active + div")),r.classed("accordion-trigger-active",!1),function(t){t.classed("hidden",!1)}(n.select(e.node().nextElementSibling)),e.classed("accordion-trigger-active",!0))}))})(),m.initSideBarAnimation(),k.on("click",(function(){t.options().navigationMenu().hideAllMenus(),1===parseInt(m.getSidebarVisibility())?m.showSidebar(0):m.showSidebar(1)}))},m}}).call(this,e(0))},331:function(t,n,e){(function(n){t.exports=function(t){var e={},r=[];return e.setup=function(){n.select("#m_modes").on("mouseover",(function(){t.options().searchMenu().hideSearchEntries()})),function(e,o,i,a,u){var l=n.select(i).append("div").classed("checkboxContainer",!0),c=l.append("input").classed("moduleCheckbox",!0).attr("id",e+"ConfigCheckbox").attr("type","checkbox").property("checked",a());c.on("click",(function(n){var e=c.property("checked");a(e),!0!==n&&(1===u&&t.lazyRefresh(),2===u&&t.update())})),r.push(c),l.append("label").attr("for",e+"ConfigCheckbox").text(o)}("showZoomSlider","Zoom controls","#zoomSliderOption",t.options().zoomSlider().showSlider,0),function(e,r,o,i){var a,u,l=(a=n.select(e).append("div").classed("distanceSliderContainer",!0)).append("input").attr("id",r+"Slider").attr("type","range").attr("min",20).attr("max",600).attr("value",i()).attr("step",10);a.append("label").classed("description",!0).attr("for",r+"Slider").text(o),u=a.append("label").classed("value",!0).attr("for",r+"Slider").text(i()),l.on("input",(function(){var n=l.property("value");i(n),u.text(n),!0===t.options().dynamicLabelWidth()&&t.animateDynamicLabelWidth()})),l.on("wheel",(function(){var t,e=n.event;0>e.deltaY&&(t=10),0<e.deltaY&&(t=-10);var r=parseInt(l.property("value")),o=r+t;o!==r&&(l.property("value",o),i(o),l.on("input")()),n.event.preventDefault()}))}("#maxLabelWidthSliderOption","maxLabelWidth","Max label width",t.options().maxLabelWidth)},e.setCheckBoxValue=function(t,n){for(var e=0;e<r.length;e++)if(r[e].attr("id")===t){r[e].property("checked",n);break}},e.getCheckBoxValue=function(t){for(var n=0;n<r.length;n++)if(r[n].attr("id")===t)return r[n].property("checked")},e.updateSettings=function(){r.forEach((function(t){t.on("click")(!0)}))},e}}).call(this,e(0))},332:function(t,n,e){(function(n){t.exports=function(t){function e(t,e){n.xhr("serverTimeStamp","application/text",(function(n,r){n?(u.append_bulletPoint("Could not establish connection to OWL2VOWL service"),function(t,n){u.append_message_toLastBulletPoint("<br>Trying to convert with other communication protocol."),t(n)}(t,e)):(a=r.responseText,u.setConversionID(a),e.push(a),t(e))}))}function r(t,e){n.xhr("serverTimeStamp","application/text",(function(n,r){n?(u.append_bulletPoint("Could not establish connection to OWL2VOWL service"),function(t){u.append_message_toLastBulletPoint("<br>Trying to convert with other communication protocol.");var n=t[0],e=t[1],r=new FormData;r.append("ontology",n);var o=new XMLHttpRequest;o.open("POST","convert",!0);var a="";o.onload=function(){200===o.status&&(a=o.responseText,u.setCachedOntology(e,a),l=e,f=!0,u.append_message_toLastBulletPoint("<br>Success, <span style='color:yellow'>but you are using a deprecated OWL2VOWL service!<span>"),i(a))},o.onreadystatechange=function(){4===o.readyState&&0===o.status&&(u.append_message_toLastBulletPoint("<br>Old protocol also failed to establish connection to OWL2VOWL service!"),p.setErrorMode(),u.append_bulletPoint("Failed to load ontology"),u.append_message_toLastBulletPoint("<br><span style='color:red'>Could not connect to OWL2VOWL service </span>"),p.showErrorDetailsMessage())},o.send(r)}(e)):(a=r.responseText,u.setConversionID(a),console.log("Request Session ID:"+a),t(e[0],e[1],a))}))}function o(e){s=!1;var r="";u.cachedOntology(e)?(u.append_bulletPoint("Loading already cached ontology: "+e),r=u.cachedOntology(e),s=!0,i(r)):n.xhr("/getFdaVipWebVOWLConfig").header("Authorization","JWT "+t.options().token()).header("Content-Type","application/json").get((function(n,o){n?(u.append_bulletPoint("Failed to load: "+e),u.append_message_toLastBulletPoint("<span style='color: red'>ERROR STATUS:</span> "+n.status),t.handleOnLoadingError(),p.setErrorMode()):i(r=o.responseText)}))}function i(t){u.append_bulletPoint("Reading ontology graph ... "),u.getLoadingFunction()(t,l,"noAlternativeNameYet")}var a,u,l,c=1,s=!1,f=!1,h=!1,d=!0,p={},g=n.select("#loading-info"),v=n.select("#loadingInfo-container"),y=n.select("#show-loadingInfo-button"),m=n.select("#loadingIndicator_closeButton");return p.checkForScreenSize=function(){var e=t.options().width(),r=t.options().height();270>e?n.select("#loading-info").classed("hidden",!0):!0===d?n.select("#loading-info").classed("hidden",!1):n.select("#loading-info").classed("hidden",!0),150>r?n.select("#loadingInfo_msgBox").classed("hidden",!0):n.select("#loadingInfo_msgBox").classed("hidden",!1),80>r?(n.select("#progressBarContext").classed("hidden",!0),n.select("#layoutLoadingProgressBarContainer").style("height","20px")):(n.select("#progressBarContext").classed("hidden",!1),n.select("#layoutLoadingProgressBarContainer").style("height","50px"))},p.getProgressBarMode=function(){return c},p.successfullyLoadedOntology=function(){return s},p.missingImportsWarning=function(){return f},p.setOntologyMenu=function(t){u=t},p.showErrorDetailsMessage=function(){p.showLoadingIndicator(),p.expandDetails(),n.select("#loadingIndicator_closeButton").classed("hidden",!0),p.scrollDownDetails()},p.showWarningDetailsMessage=function(){n.select("#currentLoadingStep").style("color","#ff0"),p.showLoadingIndicator(),p.expandDetails(),n.select("#loadingIndicator_closeButton").classed("hidden",!1),p.scrollDownDetails()},p.scrollDownDetails=function(){var t=n.select("#loadingInfo-container").node();t.scrollTop=t.scrollHeight},p.hideLoadingIndicator=function(){n.select("#loading-info").classed("hidden",!0),d=!1},p.showLoadingIndicator=function(){n.select("#loading-info").classed("hidden",!1),d=!0},p.setup=function(){v.classed("hidden",!h),y.on("click",(function(){h=!h,v.classed("hidden",!h),y.classed("accordion-trigger-active",h)})),m.on("click",(function(){g.classed("hidden",!0)})),p.setBusyMode()},p.updateSize=function(){h=!v.classed("hidden"),v.classed("hidden",!h),y.classed("accordion-trigger-active",h)},p.getDetailsState=function(){return h},p.expandDetails=function(){h=!0,v.classed("hidden",!h),y.classed("accordion-trigger-active",h)},p.collapseDetails=function(){h=!1,v.classed("hidden",!h),y.classed("accordion-trigger-active",h)},p.setBusyMode=function(){n.select("#currentLoadingStep").style("color","#fff"),n.select("#progressBarValue").node().innherHTML="",n.select("#progressBarValue").style("width","20%"),n.select("#progressBarValue").classed("busyProgressBar",!0),c=1},p.setSuccessful=function(){n.select("#currentLoadingStep").style("color","#0f0")},p.setErrorMode=function(){n.select("#currentLoadingStep").style("color","#f00"),n.select("#progressBarValue").style("width","0%"),n.select("#progressBarValue").classed("busyProgressBar",!1),n.select("#progressBarValue").node().innherHTML="",c=0},p.setPercentMode=function(){n.select("#currentLoadingStep").style("color","#fff"),n.select("#progressBarValue").classed("busyProgressBar",!1),n.select("#progressBarValue").node().innherHTML="0%",n.select("#progressBarValue").style("width","0%"),c=2},p.setPercentValue=function(t){n.select("#progressBarValue").node().innherHTML=t},p.emptyGraphContentError=function(){t.clearGraphData(),u.append_message_toLastBulletPoint("<span style='color:red;'>failed</span>"),u.append_message_toLastBulletPoint('<br><span style="color:red;">Error: Received empty graph</span>'),s=!1,t.handleOnLoadingError(),p.setErrorMode()},p.isThreadCanceled=function(){},p.parseUrlAndLoadOntology=function(){a=-1e4,u.setConversionID(a),u.stopLoadingTimer(),t.clearGraphData(),p.setBusyMode(),p.showLoadingIndicator(),p.collapseDetails(),f=!1,n.select("#loadingIndicator_closeButton").classed("hidden",!0),u.clearDetailInformation();var e=function(t){var n=[];if(0<(t.match(/#/g)||[]).length)for(var e=t.split("#"),r=1;r<e.length;r++)0===e[r].length?n[n.length-1]=n[n.length-1]+"#":n.push(e[r]);return n}(location+"");l="foaf",function(n){function e(){t.options().setOptionsFromURL(t.options().defaultConfig())}function r(n){for(var e,r=t.options().defaultConfig(),o=0;o<n.length;o++)r[(e=n[o].split("="))[0]]=e[1];t.options().setOptionsFromURL(r)}switch(n.length){case 0:e();break;case 1:!function(t){if(0<=t[0].indexOf("opts=")){var n=t[0].length;r(t[0].substring(6,n-1).split(";"))}else l=t[0],e()}(n);break;case 2:!function(t){if(0<=t[0].indexOf("opts=")){var n=t[0].length;r(t[0].substr(5,n-6).split(";"))}else e();l=t[1]}(n);break;default:console.log("To many input parameters , loading default config"),e(),l="ERROR_TO_MANY_INPUT_PARAMETERS"}}(e);var r=function(t){var n="url=",e="file=";return t.substr(0,e.length)===e?1:t.substr(0,n.length)===n?2:"iri="===t.substr(0,4)?3:0}(l);n.select("#progressBarValue").node().innerHTML=" ",0===r?p.from_presetOntology(l):1===r?p.from_FileUpload(l):2===r?p.from_JSON_URL(l):3===r?p.from_IRI_URL(l):console.log("Could not identify loading method , or not IMPLEMENTED YET")},p.from_JSON_URL=function(t){var n=decodeURIComponent(t.slice(4));l=n;var r="";u.cachedOntology(n)?(u.append_bulletPoint("Loading already cached ontology: "+n),r=u.cachedOntology(n),s=!0,i(r)):(u.append_message("Retrieving ontology from JSON URL "+n),e(u.callbackLoad_JSON_FromURL,["read?json="+n,n]))},p.from_IRI_URL=function(t){var e=decodeURIComponent(t.slice(4));l=e;var r="";if(u.cachedOntology(e))u.append_bulletPoint("Loading already cached ontology: "+e),r=u.cachedOntology(e),s=!0,i(r);else{var o=encodeURIComponent(e);u.append_bulletPoint("Retrieving ontology from IRI: "+e),function(t,e){n.xhr("serverTimeStamp","application/text",(function(n,r){p.setBusyMode(),n?(u.append_bulletPoint("Could not establish connection to OWL2VOWL service"),p.setErrorMode(),u.append_bulletPoint("Failed to load ontology"),u.append_message_toLastBulletPoint("<br><span style='color:red'>Could not connect to OWL2VOWL service </span>"),p.showErrorDetailsMessage()):(a=r.responseText,u.setConversionID(a),e[0]=e[0]+"&sessionId="+a,e.push(a),t(e))}))}(u.callbackLoad_Ontology_FromIRI,["convert?iri="+o,e])}},p.from_FileUpload=function(e){p.setBusyMode();var o=decodeURIComponent(e.slice(5));l=o;var a="";if(u.cachedOntology(o))u.append_bulletPoint("Loading already cached ontology: "+o),a=u.cachedOntology(o),s=!0,i(a);else{u.append_bulletPoint("Retrieving ontology from file: "+o);var c=n.select("#file-converter-input").property("files")[0];if(!c||o&&o!==c.name)return u.append_message_toLastBulletPoint('<br><span style="color:red;">No cached version of "'+o+'" was found.</span><br>Please reupload the file.'),p.setErrorMode(),n.select("#progressBarValue").classed("busyProgressBar",!1),void t.handleOnLoadingError();if((o=c.name).match(/\.json$/)){u.setConversionID(-1e4);var f=new FileReader;f.readAsText(c),f.onload=function(){a=f.result,l=o,i(a)}}else{var h=[c,o];r(u.callbackLoadFromOntology,h)}}},p.loadFromOWL2VOWL=function(t,e){s=!1,-1!==n.select("#bulletPoint_container").node().innerHTML.indexOf("(with warnings)")&&(f=!0),u.cachedOntology(t)?(u.append_bulletPoint("Loading already cached ontology: "+e),i(t)):i(t)},p.from_presetOntology=function(t){u.append_bulletPoint("Retrieving ontology: "+t),o(t)},p.notValidJsonFile=function(){t.clearGraphData(),u.append_message_toLastBulletPoint("<span style='color:red;'>failed</span>"),u.append_message_toLastBulletPoint("<br><span style='color:red;'>Error: Received empty graph</span>"),s=!1,t.handleOnLoadingError()},p.validJsonFile=function(){u.append_message_toLastBulletPoint("done"),s=!0},p}}).call(this,e(0))},5:function(t,n){var e=Array.isArray;t.exports=e},53:function(t,n,e){var r=e(13),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=r?r.toStringTag:void 0;t.exports=function(t){var n=i.call(t,u),e=t[u];try{t[u]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(n?t[u]=e:delete t[u]),o}},54:function(t,n){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},6:function(t,n){t.exports=function(t,n){for(var e=-1,r=null==t?0:t.length,o=Array(r);++e<r;)o[e]=n(t[e],e,t);return o}},66:function(t,n,e){var r=e(67);t.exports=function(t){return null==t?"":r(t)}},67:function(t,n,e){var r=e(13),o=e(6),i=e(5),a=e(14),u=r?r.prototype:void 0,l=u?u.toString:void 0;t.exports=function t(n){if("string"==typeof n)return n;if(i(n))return o(n,t)+"";if(a(n))return l?l.call(n):"";var e=n+"";return"0"==e&&1/n==-1/0?"-0":e}},8:function(t,n,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=e(33),i="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,a=o||i||Function("return this")();t.exports=a}});